<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Tomas&#39;Blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;5&#x2F;index.html">
<meta property="og:site_name" content="Tomas&#39;Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/"/>





  <title>Tomas'Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tomas'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%B8%80)%EF%BC%9ANAMP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%B8%80)%EF%BC%9ANAMP/" itemprop="url">Kali Linux笔记(二十一)：NMAP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-NMAP"><a href="#1-NMAP" class="headerlink" title="1. NMAP"></a>1. NMAP</h4><ul>
<li>所有参数</li>
<li>目标发现<ul>
<li>-iL <inputfilename>（列表文件作为输入）</li>
<li>-iR <num hosts>（随机选择目标进行扫描）</li>
<li>–exclude &lt;host1[,host2]&gt;（扫描网址段不包含）</li>
<li>–excludefile <exclude_file>（排除文件）</li>
</ul>
</li>
<li>主机发现<ul>
<li>-sL（不做扫描，列出地址段）</li>
<li>-sn（ping扫描，不做端口扫描）</li>
<li>-Pn（彻底扫描地址段，不回包也进行扫描）</li>
<li>-PS/PA/PU/PY （TCP SYN/ACK，UDP or SCTP发现）</li>
<li>-P0/PS/PE/PP/PM （Ping层的发现/SCTP发现/ICMP echo/时间戳/子网掩码发现）</li>
<li>-n/-R （不做DNS解析/自动做反向解析）</li>
<li>–dns-servers &lt;serv1[,serv2]&gt;（指定DNS解析服务器）</li>
<li>–system-dns（操作系统默认的DNS解析服务器）</li>
<li>–traceroute（扫描进行路由追踪）</li>
</ul>
</li>
<li>端口发现<ul>
<li>sS/sT/sA/sW/sM （TCP SYN/Connect()/ACK/Window/Maimon scans）</li>
<li>sU （UDP扫描）</li>
<li>sN/sF/sX （TCP Null，Fin and xmas scans）</li>
<li>–scanflags <flags> （选择要扫描的flags）</li>
<li>-sI &lt;zombie host[:probeport]&gt;（僵尸扫描）</li>
<li>-sY/sZ （SCTP协议参数）</li>
<li>-s0（IP扫描）</li>
<li>-b <FTP relay host>（FTP中继扫描）</li>
</ul>
</li>
<li>指定扫描端口<ul>
<li>-p <port number> U → UDP T → TCP</li>
<li>–exclude-ports <port ranges> （排除端口）</li>
<li>-F （快速模式，比较少数量端口）</li>
<li>-r （连续扫描端口，少于1000个端口）</li>
<li>–top-ports <number> （扫描1000端口的前面端口）</li>
<li>–port-ratio <ratio> （扫描更常见的端口）</li>
</ul>
</li>
<li>服务/版本识别<ul>
<li>-sV （服务特征库匹配）</li>
<li>-sV –version-intensity <level> （扫描的深度、强度）</li>
<li>-sV –version-light （intensity=2）</li>
<li>-sV –version-all （intensity=9）</li>
<li>-sV –version-trace（扫描过程进行跟踪）</li>
</ul>
</li>
<li>脚本扫描<ul>
<li>-sC （脚本扫描，一般是–script=default）</li>
<li>–script=<Lua script> （使用Lua脚本）</li>
<li>–script-args=&lt;n1=v1[,n2=v2]&gt; （修改参数）</li>
<li>–script-update （脚本库更新）</li>
<li>–script-trace （进行路由追踪）</li>
<li>–script-help=<Lua scripts> （脚本使用教程帮助）</li>
</ul>
</li>
<li>OS 扫描<ul>
<li>-O （检测OS）</li>
<li>–osscan-limit （OS检测限制）</li>
<li>–osscan-guess （OS猜测）</li>
</ul>
</li>
<li>时间和性能<ul>
<li>-‘s’,’m’,’h’,’ms’ （秒、分、时、毫秒）</li>
<li>–min-hostgroup/max-hostgroup <size> （并行扫描主机组的数量）</li>
<li>–min-parallelism/max-parallelism <numprobes> （并行探测数量）</li>
<li>–min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout <time> （rtt时间）</li>
<li>–max-retries <tries> （最大回包时间）</li>
<li>–host-timeout <time> （主机超时时间）</li>
<li>–scan-delay/–max-scan-delay <time> （主机延迟发包时间）</li>
<li>–min-rate <number> （最小发包速率）</li>
<li>–max-rate <number> （最大发包速率）</li>
</ul>
</li>
<li>防火墙/IDS躲避、欺骗<ul>
<li>-f –mtu <val> （设置传输单元）</li>
<li>-D &lt;decoy1,decoy2[,ME]&gt; （伪造源地址，增加噪声IP）</li>
<li>-S <IP Address> （欺骗源地址）</li>
<li>-e <iface> （指定使用的网卡）</li>
<li>-g/–source-port <portnum> （指定源端口进行发包）</li>
<li>–proxies &lt;url1,[url2]&gt; （指定代理服务器）</li>
<li>–data <hex string> （指定十六进制字符串，在包的后面增加）</li>
<li>–data-string <string> （增加ACSII码字符串）</li>
<li>–data-length <num> （数据的长度）</li>
<li>–ip-options <options> （修改IP的选项）</li>
<li>–ttl <val> （设置IP的TTL值）</li>
<li>–spoof-mac &lt;mac address/prefix/vendor name&gt; （欺骗MAC地址）</li>
<li>–badsum （发送错误的TCP/UDP/SCTP 校验和）</li>
</ul>
</li>
<li>MISC<ul>
<li>-6 （可以扫IPv6地址）</li>
<li>-A （OS，version，script，traceroute的组合命令）</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%BA%94)%EF%BC%9ANEXPOSE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%BA%94)%EF%BC%9ANEXPOSE/" itemprop="url">Kali Linux笔记(二十五)：NEXPOSE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-NEXPOSE"><a href="#1-NEXPOSE" class="headerlink" title="1. NEXPOSE"></a>1. NEXPOSE</h4><ul>
<li>Rapid7<ul>
<li>Nexpose</li>
<li>完整的漏洞管理实现</li>
</ul>
</li>
<li>环境准备<ul>
<li>建议VM 4G内存</li>
<li><a href="https://www.rapid7.com/products/nexpose/download/" target="_blank" rel="noopener">https://www.rapid7.com/products/nexpose/download/</a></li>
<li><a href="https://IP_ADDR:3780（nxadmin/nxpassword,后改为Rapid7@mazhentao）" target="_blank" rel="noopener">https://IP_ADDR:3780（nxadmin/nxpassword,后改为Rapid7@mazhentao）</a></li>
<li>操作系统账号密码：nexpose</li>
<li><a href="https://www.rapid7.com/try/nexpose/" target="_blank" rel="noopener">https://www.rapid7.com/try/nexpose/</a></li>
<li>QHWT-72GT-BHDS-FQLH（激活码进行注册，30天有效期）</li>
<li>service nexposeconsole.cc restart（重启命令，但初始化时间非常长）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>概念：用扫描器去发现漏洞，用渗透框架去验证漏洞
▲ 2019.12.8可以注册一个企业邮箱，可申请多个（腾讯。网易等）
▲ 2019.12.8需要修改密码，至少一个数字，一个大写字母，一个字符，长度大于14位，多次不成功会锁账号 Rapid7@mazhentao
▲ 2019.12.8只有注册后，才可下载到ova文件</code></pre></blockquote>
<h4 id="2-Administrator"><a href="#2-Administrator" class="headerlink" title="2. Administrator"></a>2. Administrator</h4><ul>
<li>Scan Templates<ul>
<li>Exhaustive → Copy</li>
<li>General → Name → Types of Checks（Assert Discovery、Vulnerability、WebSpldering、Policies）</li>
<li>Asset Discovery（主机发现）</li>
<li>Service Discovery（服务发现）</li>
<li>Discovery Performance（发现选项）</li>
<li>Vulnerability Checks（unsafe or safe，<strong>！Select Checks！</strong>）</li>
<li>File Searching（文件搜索）</li>
<li>Spam Relaying（垃圾邮件）</li>
<li>Database Servers（数据库）</li>
<li>Mail Server（邮件服务器）</li>
<li>CVS Serverr（版本管理服务器）</li>
<li>DHCP Server</li>
<li>Telnet Server</li>
<li>Web Spldering（网页爬网，有可能造成CC攻击）</li>
<li>Oracle Policy（Oracle 策略）</li>
<li>Lotus Domino Policy（Lotus Domino 策略）</li>
<li>Windows Group Policy（window 组策略）</li>
<li>CIFS/SMB Account Policy（CIFS/SMB 账号策略）</li>
<li>AS/400 Policy（AS/400 机型策略）</li>
<li>Unix Policy（Unix 策略）</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>企业在美国上市需要过塞班思发案，也即404法案，Sarbans-Oxley compliance
支付行业要过PCI ASV Extemal Audit/PCI Internal Aduit</code></pre></blockquote>
<ul>
<li>Sites（在home）<ul>
<li>Create sites</li>
<li>INFO &amp; SECURITY</li>
<li>ASSETS</li>
<li>AUTHENTICATION（Web Application → HTML FORM/HTTP HEADERS（SEESIONID））</li>
<li>TEMPLATES</li>
<li>ENGINES（扫描引擎）</li>
<li>ALERTS（到点，可以用于发送mail）</li>
<li>SCHEDULE</li>
</ul>
</li>
</ul>
<h4 id="3-扫描结果分析"><a href="#3-扫描结果分析" class="headerlink" title="3. 扫描结果分析"></a>3. 扫描结果分析</h4><ul>
<li>False Positive：误报</li>
<li>False negative：漏报</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E5%9B%9B)%EF%BC%9ANESSUS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E5%9B%9B)%EF%BC%9ANESSUS/" itemprop="url">Kali Linux笔记(二十四)：NESSUS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-NESSUS"><a href="#1-NESSUS" class="headerlink" title="1. NESSUS"></a>1. NESSUS</h4><ul>
<li>家庭版<ul>
<li>免费</li>
</ul>
</li>
<li>专业版<ul>
<li>收费，无限的并发连接</li>
</ul>
</li>
<li>下载<ul>
<li><a href="https://www.tenable.com/downloads/nessus" target="_blank" rel="noopener">https://www.tenable.com/downloads/nessus</a></li>
</ul>
</li>
<li>安装<ul>
<li><strong><code>🔺命令：dpkg -i 文件dbg</code></strong></li>
<li>安装路径：/opt/nessus</li>
</ul>
</li>
<li>启动服务<ul>
<li><strong><code>🔺命令：/etc/init.d/nessusd start</code></strong></li>
<li><strong><code>🔺命令：/etc/init.d/nessusd status</code></strong>（查看状态）</li>
</ul>
</li>
<li>管理地址<ul>
<li><a href="https://127.0.0.1:8834" target="_blank" rel="noopener">https://127.0.0.1:8834</a></li>
</ul>
</li>
<li>注册激活码<ul>
<li><a href="https://www.tenable.com/products/nessus/nessus-essentials" target="_blank" rel="noopener">https://www.tenable.com/products/nessus/nessus-essentials</a></li>
</ul>
</li>
<li>管理账号<ul>
<li>更新插件</li>
</ul>
</li>
<li>基本配置（setting）<ul>
<li>升级</li>
<li>账号</li>
<li>SMTP</li>
<li>代理</li>
</ul>
</li>
<li>Policy Library<ul>
<li>Advanced Scan（高级扫描）</li>
<li>Basic Shellshock Detection（检测破壳漏洞，系统的环境变量）</li>
<li>Basic Network Scan（基本网络扫描，for any host）</li>
<li>Credentialed Patch Audit（身份验证补丁）</li>
<li>GHOST（glibc）Detection（底层C语言模块漏洞）</li>
<li>Host Discovery（主机发现）</li>
<li>Web Applicattion Test（针对Web的漏洞，XSS,CSRF,SQL注入等）</li>
<li>Windows Mainware Scan（扫描恶意软件，计算恶意程序的哈希值，生成列表，来匹配）</li>
</ul>
</li>
</ul>
<h4 id="2-NESSUS扫描（window）"><a href="#2-NESSUS扫描（window）" class="headerlink" title="2. NESSUS扫描（window）"></a>2. NESSUS扫描（window）</h4><ul>
<li>Advanced Scan → Setting<ul>
<li>Basic → General（Name → window_vuln_scan_policy）</li>
<li>Basic → Permissions</li>
<li>Discovery → Host Discovery（Use fast network discovery，Add File（添加MAC地址））</li>
<li>Discovery → Prot Scanning（Ports → defult，TCP → SYN）</li>
<li>Discovery → Service Discovery（All Ports，Enable all SSL ciphers，Enable CRL checking）</li>
<li>Assessment → Web Application（open）</li>
<li>Advanced（not safe）</li>
</ul>
</li>
<li>Advanced Scan → Credentials（证书，证明提高）</li>
<li>Advanced Scan → Compliance（合规性）</li>
<li>Advanced Scan → Plugins（类似于openvas的family，插件）</li>
<li>New Scan → window_vuln_scan_policy  ▲ 2019.12.8 SMTP 25端口无法连接socket<ul>
<li>setting → send Email（SMTP Server）</li>
<li>Host：<a href="mailto:smtp@163.com" target="_blank" rel="noopener">smtp@163.com</a></li>
<li>Port：25</li>
<li>From：<a href="mailto:nessus@163.com" target="_blank" rel="noopener">nessus@163.com</a></li>
<li>Encryption：Use TLS if available</li>
<li>Hostname：localhost：8834</li>
<li>Auth Method：PLAIN</li>
<li>Username/Password   </li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>windows增加用户密码：net user 用户 -
可添加一个针对Linux系统的Advabced Scan（linux_vuln_scan_policy）
可通过设置User Profile → API Keys来设置Access Key和Secret Key</code></pre></blockquote>
<h4 id="3-NESSUS"><a href="#3-NESSUS" class="headerlink" title="3. NESSUS"></a>3. NESSUS</h4><ul>
<li>策略</li>
<li>扫描</li>
<li>扫描本机</li>
<li>扫描windows</li>
<li>扫描Linux</li>
<li>扫描网络设备</li>
<li>扫描web server</li>
<li>报告</li>
<li>调度</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%B8%89)%EF%BC%9AOPENVAS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%B8%89)%EF%BC%9AOPENVAS/" itemprop="url">Kali Linux笔记(二十三)：OPENVAS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-OPENVAS"><a href="#1-OPENVAS" class="headerlink" title="1. OPENVAS"></a>1. OPENVAS</h4><ul>
<li>Openvas<ul>
<li>Nessus项目分支</li>
<li>管理目标系统的漏洞</li>
<li>免费开源</li>
<li>Kali默认安装，但未配置和启动</li>
</ul>
</li>
</ul>
<h4 id="2-OPENVAS"><a href="#2-OPENVAS" class="headerlink" title="2. OPENVAS"></a>2. OPENVAS</h4><ul>
<li>安装</li>
<li>创建证书</li>
<li>同步弱点数据库NVT</li>
<li>创建客户端证书</li>
<li>重建数据库</li>
<li>备份数据库</li>
<li>启动服务装入插件</li>
<li>创建管理员账户</li>
<li>创建普通用户账号</li>
<li>配置服务侦听端口</li>
<li>安装验证</li>
</ul>
<blockquote>
<pre><code>Kali Linux配置OPENVAS，openvas-setup，现在一条命令即可
OPENVAS每天会发布feed，里面包含由一个或多个NVT</code></pre></blockquote>
<h4 id="3-OPENVAS"><a href="#3-OPENVAS" class="headerlink" title="3. OPENVAS"></a>3. OPENVAS</h4><ul>
<li>OpenVAS Manager（负责把其他的组件连接）<ul>
<li>控制Scanner和其他Manager的中心组件</li>
<li>控制中心数据库，保存用户配置及扫描结果</li>
<li>客户端使用基于XML的无状态OMP协议与其通信</li>
<li>集中排序筛选，使客户端获得一致展现</li>
</ul>
</li>
<li>OpenVAS Scanner（扫描器，可以多个scanner，多级部署）<ul>
<li>具体执行Network Vulnerability Tests（NVTs）</li>
<li>NVTs 每天通过更新Feed更新</li>
<li>受Manager控制</li>
</ul>
</li>
<li>OSP Scanner（scanner扫描器组）<ul>
<li>可以统一管理多个Scanner</li>
<li>将一组Scanner作为一个对象交给manager管理</li>
</ul>
</li>
<li>Greenbone Security Assistant（相当于一个服务器端，访问OpenVASManage）<ul>
<li>提高Web Service</li>
</ul>
</li>
<li>OMP Clients（支持通过API的方式去调用OpenVAS Manager）</li>
<li>Web Browser（通过GreenBone去访问OpenVAS Manager）</li>
<li>Feed（NVTS，SCAP CERT,User Data） </li>
<li>Target System</li>
<li>OpenVAS CLI<ul>
<li>omp命令行工具，可实现批处理控制manager</li>
</ul>
</li>
<li>更新很快<ul>
<li>所有找得到的资料几乎都已不同程度的过时了</li>
</ul>
</li>
</ul>
<h4 id="4-OPENVAS"><a href="#4-OPENVAS" class="headerlink" title="4. OPENVAS"></a>4. OPENVAS</h4><ul>
<li>初始化安装<ul>
<li><strong><code>🔺命令：openvas-setup</code></strong></li>
</ul>
</li>
<li>检查安装结果<ul>
<li><strong><code>🔺命令：openvas-check-setup</code></strong>（出问题会出现FIX错误项）</li>
</ul>
</li>
<li>查看当前账号<ul>
<li><strong><code>🔺命令：openvasmd --list-users</code></strong> ▲2019.12.7 无此参数</li>
</ul>
</li>
<li>修改账户密码<ul>
<li><strong><code>🔺命令：openvas --user=admin --new-password=Password</code></strong></li>
</ul>
</li>
<li>升级<ul>
<li><strong><code>🔺命令：openvas-feed-update</code></strong></li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>openvasmd -h 可修改账户密码，可增加账户
9390端口：openvas manager
9391端口：默认第一scanner
9392端口：web登陆（https）
openvas-check-setup | grep Fix 可查看报错的组件
证书报错的原因：（1）名称与URL地址不一致（2）证书为自签名证书</code></pre></blockquote>
<h4 id="5-OPENVAS"><a href="#5-OPENVAS" class="headerlink" title="5. OPENVAS"></a>5. OPENVAS</h4><ul>
<li><strong><code>🔺命令：vi /usr/bin/openvas-start</code></strong>（调整启动服务顺序，对于kali2.0版本以下）<ul>
<li>Starting OpenVas Services</li>
<li>3\Starting OpenVas Manager.openvasmd</li>
<li>2\Starting OpenVas Scanner.openvassd</li>
<li>1\Starting Greenbone Security Assistant:gsad</li>
</ul>
</li>
<li>openvas-start</li>
</ul>
<h4 id="6-OPENVAS"><a href="#6-OPENVAS" class="headerlink" title="6. OPENVAS"></a>6. OPENVAS</h4><ul>
<li>Configration<ul>
<li>scan configs → windows_server_scan_configration</li>
<li>target → windows_xp（Alive Test → Consider Alive，Port List）</li>
<li>Port List → windows_xp_ports （or OpenVAS Default）</li>
<li>Schedules → weekly_scan（Period，Duration）</li>
</ul>
</li>
<li>Scan Management<ul>
<li>Tasks → weekly_windows_scan_task（Scan Target，Schedule，Add results to Asset Management，OpenVAS Scanner，Scan config，Slave，Network Sourece Interface，Order for target hosts，Maximum concurrently executed NVTs per host，Maximum concurrently scanner host）</li>
</ul>
</li>
<li>Configration<ul>
<li>scan configs → linux_unix_scan_configration</li>
</ul>
</li>
<li>start a short scan（full and fast，需要一个IP） ▲2019.12.7新版在Task Wizard中</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%BA%8C)%EF%BC%9A%E5%BC%B1%E7%82%B9%E6%89%AB%E6%8F%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81%E4%BA%8C)%EF%BC%9A%E5%BC%B1%E7%82%B9%E6%89%AB%E6%8F%8F/" itemprop="url">Kali Linux笔记(二十二)：弱点扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-发现弱点"><a href="#1-发现弱点" class="headerlink" title="1. 发现弱点"></a>1. 发现弱点</h4><ul>
<li>发现漏洞<ul>
<li>基于端口服务扫描结果版本信息（速度慢）</li>
<li>搜索已公开的漏洞数据库（数量大）</li>
<li>使用弱点扫描器实现漏洞管理</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>（1）https://www.exploit-db.com Kali 官方公布的漏洞代码
（2）searchsploit 服务类型  查找相关漏洞利用代码 （相干文件放在usr/share/exploitdb/platforms）
（3）Kali自带工具 sandi-gui  ▲2019.12.7暂无此工具</code></pre></blockquote>
<h4 id="2-从信息的维度定义漏洞管理"><a href="#2-从信息的维度定义漏洞管理" class="headerlink" title="2. 从信息的维度定义漏洞管理"></a>2. 从信息的维度定义漏洞管理</h4><ul>
<li>信息收集：<ul>
<li>扫描发现网络IP、OS、服务、配置、漏洞</li>
<li>能力要求：定义扫描方式内容和目标</li>
</ul>
</li>
<li>信息管理<ul>
<li>格式化信息，并进行筛选、分组、定义优先级</li>
<li>能力要求：资产分组、指定所有者、向所有者报告漏洞</li>
</ul>
</li>
<li>信息输出<ul>
<li>向不同层级的人群展示足够的信息量</li>
<li>能力需求：生成报告、导出数据、与SIEM集成</li>
</ul>
</li>
</ul>
<h4 id="3-弱点扫描类型"><a href="#3-弱点扫描类型" class="headerlink" title="3. 弱点扫描类型"></a>3. 弱点扫描类型</h4><ul>
<li>主动扫描<ul>
<li>有身份验证</li>
<li>无身份验证</li>
</ul>
</li>
<li>被动扫描<ul>
<li>镜像端口抓包</li>
<li>其他来源输入</li>
</ul>
</li>
<li>基于Agent的扫描<ul>
<li>支持平台有限</li>
</ul>
</li>
</ul>
<h4 id="4-漏洞概念"><a href="#4-漏洞概念" class="headerlink" title="4. 漏洞概念"></a>4. 漏洞概念</h4><ul>
<li>CVSS（Common Vulnerability Scoring System）<ul>
<li>通用漏洞评分系统–工业标准</li>
<li>扫描安全漏洞严重程度的统一评分方案</li>
<li>V3版本–2015年6月10日</li>
<li>Basic Metric：基础的恒定不变的弱点权重</li>
<li>Temporal Metric：依赖时间因素的弱点权重</li>
<li>Enviromental Metric：利用弱点的环境要求和实施难度的权重</li>
<li>CVSS是安全内容自动化协议（SCAP）的一部分</li>
<li>通常CVSS与CVE一同由美国国家漏洞库（NVD）发布并保持数据的更新</li>
<li>分值范围：0–10</li>
<li>不同机构按CVSS分值定义威胁的中、高、低威胁级别</li>
<li>CVSS体现弱点的风险，威胁级别（severity）表示弱点风险对企业的影响</li>
<li>CVSS分值是工业标准，但威胁级别不是</li>
</ul>
</li>
<li>Vulnerability Reference</li>
<li>CVE（Common Vulnerability and Exposures）<ul>
<li>已公开的信息安全漏洞字典，统一的漏洞编号标准</li>
<li>MITRE公司负责维护（非盈利机构）</li>
<li>扫描器的大部分扫描项都对应一个CVE编号</li>
<li>实现不同产商之间信息交换的统一标准</li>
</ul>
</li>
<li>CVE发布流程<ul>
<li>发现漏洞</li>
<li>CAN负责指定CVE ID</li>
<li>发布到CVE List–CVE-2008-4250</li>
<li>MITRE负责对内容进行编辑维护</li>
</ul>
</li>
</ul>
<h4 id="5-漏洞基本概念"><a href="#5-漏洞基本概念" class="headerlink" title="5. 漏洞基本概念"></a>5. 漏洞基本概念</h4><ul>
<li><p>很多产商维护自己的Vulnerability Reference</p>
<ul>
<li>MS</li>
<li>MSKB</li>
</ul>
</li>
<li><p>其他Vulnerability Reference</p>
<ul>
<li>CERT TA08-297A</li>
<li>BID 31874</li>
<li>IAVM 2008-A-0081</li>
<li>OVAL OVAL6093</li>
</ul>
</li>
<li><p>OVAL（Open Vulnerability and Assessment Language）</p>
<ul>
<li>描述漏洞检测方法的机器可识别语言</li>
<li>详细的描述漏洞检测的技术细节，可导入自动化检测工具实施漏洞检测工具</li>
<li>OVAL使用XML语言描述，包含了严密的语法逻辑</li>
</ul>
</li>
<li><p>CCE</p>
<ul>
<li>描述软件配置缺陷的一种标准化格式</li>
<li>在信息安全风险评估，配置缺陷的检测是一项重要内容，使用CCE可以配置缺陷以标准的方式展现出来，便于配置缺陷评估的可量化操作</li>
</ul>
</li>
<li><p>CPE（Common Product Enumeration）</p>
<ul>
<li>信息技术产品、系统、软件包的结构化命令规范，分类命名</li>
</ul>
</li>
<li><p>CWE（Common Weakness Enumeration）</p>
<ul>
<li>常见漏洞类型的字典，描述不同类型漏洞的特征（访问控制、信息泄露、拒绝服务）</li>
</ul>
</li>
<li><p>Security Content Automation Protocal（SCAP）</p>
<ul>
<li>SCAP是一个集合了多种安全标准框架</li>
<li>六个元素：CVE、OVAL、CCE、CPE、CVSS、XCCDF</li>
<li>目的是以标准的方法展示和操作安全数据</li>
<li>由NIST负责维护</li>
</ul>
</li>
<li><p>SCAP主要解决三个问题</p>
<ul>
<li>实现高层政策法规等到底层实施的落地（如FISMA，ISO27000系列）</li>
<li>将信息安全所涉及的各个要素标准化（如统一漏洞的命名及严重性度量）</li>
<li>将复杂的系统配置检查工作自动化</li>
</ul>
</li>
<li><p>SCAP是当前美国比较成熟的一套信息安全评估标准体系，其标准化、自动化的思想对信息安全行业产生了深远的影响</p>
</li>
<li><p>NVD（National Vulnerability Database）</p>
<ul>
<li>美国政府的漏洞管理标准数据</li>
<li>完全基于SCAP框架</li>
<li>实现自动化漏洞管理、安全测量、合规要求</li>
<li>包含以下库(<a href="https://nvd.nist.gov/)：" target="_blank" rel="noopener">https://nvd.nist.gov/)：</a></li>
</ul>
<ol>
<li>安全检查列表</li>
<li>软件安全漏洞</li>
<li>配置错误</li>
<li>产品名称</li>
<li>影响程度</li>
</ol>
</li>
</ul>
<h4 id="6-漏洞管理"><a href="#6-漏洞管理" class="headerlink" title="6. 漏洞管理"></a>6. 漏洞管理</h4><ul>
<li>周期性扫描跟踪漏洞</li>
<li>高危漏洞优先处理</li>
<li>扫描注意事项</li>
<li>漏洞管理三要素<ul>
<li>准确性</li>
<li>时间</li>
<li>资源</li>
</ul>
</li>
</ul>
<h4 id="7-Nmap"><a href="#7-Nmap" class="headerlink" title="7. Nmap"></a>7. Nmap</h4><ul>
<li>nmap扫描脚本<ul>
<li>600+</li>
<li>分类</li>
</ul>
</li>
<li><strong><code>🔺命令：cat /usr/share/nmap/scripts/script.db</code></strong>（存放nmap脚本名称路径）</li>
<li><strong><code>🔺命令：grep vuln /usr/share/nmap/scripts/script.db | cut -d &quot;\&quot; -f 2</code></strong></li>
<li><strong><code>🔺命令：cat /usr/share/nmap/scripts/smb-check-vuln.nse</code></strong></li>
<li><strong><code>🔺命令：smb-check-vulns.nse</code></strong><ul>
<li><strong><code>🔺命令：nmap -sU -sS --script=smb-check-vulns.nse --script=args=unsafe=1 -p U:137,T:139,446 IP地址</code></strong></li>
<li>MS08-067</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>中文输入法：桌面的设置，删除本机自带的汉语，然后apt-get install ibus ibus-pinyin，添加汉语</code></pre></blockquote>
<h4 id="8-Nmap"><a href="#8-Nmap" class="headerlink" title="8. Nmap"></a>8. Nmap</h4><ul>
<li><p>smb-vuln-ms10-061.nse</p>
<ul>
<li>Stuxnet蠕虫利用的4个漏洞之一（美国军方打击伊朗核设施攻击的阵亡病毒）</li>
<li>Print Spooler权限不当，打印请求可在系统目录可创建文件、执行任意代码</li>
<li>LANMAN API枚举共享打印机</li>
<li>远程共享打印机名称</li>
<li>smb-enum-shares枚举共享</li>
</ul>
<ol>
<li>身份认证参数–smbuser、smbpassword</li>
<li><strong><code>🔺命令：nmap -p445 --script=smb-enum-shares.nse --script-args=smbuser=admin,smbpassword=pass IP地址</code></strong></li>
</ol>
<ul>
<li>Windows XP，Server 2003 SP2，Vista，Server 2008，win 7</li>
</ul>
</li>
<li><p>影响扫描结果的因素</p>
</li>
</ul>
<blockquote>
<pre><code>不同扫描器对于漏洞的判断是不同的，有些是基于补丁是否安装，有些是基于端口是否开放</code></pre></blockquote>
<h4 id="9-扫描结果确认"><a href="#9-扫描结果确认" class="headerlink" title="9. 扫描结果确认"></a>9. 扫描结果确认</h4><ul>
<li>目标系统版本</li>
<li>补丁是否安装</li>
<li>是否可被入侵</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81)%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%86%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%8C%E5%8D%81)%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%86%E5%88%AB/" itemprop="url">Kali Linux笔记(二十)：操作系统识别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:13:38+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-操作系统识别"><a href="#1-操作系统识别" class="headerlink" title="1. 操作系统识别"></a>1. 操作系统识别</h4><ul>
<li>操作系统识别技术（默认开放的系统开放端口）<ul>
<li>种类繁多</li>
<li>好产品采用多种技术组合</li>
</ul>
</li>
<li>TTL起始值<ul>
<li>Windows：128（65-128）</li>
<li>Linux/Unix：64（1-64）</li>
<li>某些Unix：255</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>TTL值劫持路由器，使不同地区的人访问到网页不一样</code></pre></blockquote>
<h4 id="2-操作系统识别"><a href="#2-操作系统识别" class="headerlink" title="2. 操作系统识别"></a>2. 操作系统识别</h4><ul>
<li>Python<ul>
<li>form scapy.all import*</li>
<li>win=”IP地址”</li>
<li>linx=”IP地址”</li>
<li>aw=sr1(IP(dst=win)/ICMP())</li>
<li>al=sr1(IP(dst=linu)/ICMP())</li>
<li>if al[IP].ttl&lt;=64:</li>
<li>print “host is linux”</li>
<li>else:</li>
<li>print “host is windows”</li>
</ul>
</li>
<li>./ttl_os.py IP地址</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">from scapy.all import*</span><br><span class="line">import logging</span><br><span class="line">logging.getLogger(&quot;scapy,runtime&quot;).setLevel(logging.ERROR)</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv)!=2:</span><br><span class="line">    print &quot;Usage - ./ttl_os.py [IP Address]&quot;</span><br><span class="line">    print &quot;Example - ./ttl_os.py 192.168.100.1&quot;</span><br><span class="line">    print &quot;Example will perform ttl analysize to attempt to determine whether the system is Windows or Linux/Unix&quot;</span><br><span class="line">    sys.exit()</span><br><span class="line"></span><br><span class="line">ip=sys.argv[1]</span><br><span class="line">ans=sr1(IP(dst=&quot;str(ip)&quot;)/ICMP(),timeout=1,verbose=0)</span><br><span class="line">if ans==None:</span><br><span class="line">    print &quot;No response was returned&quot;</span><br><span class="line">elif int(ans[IP].ttl)&lt;=64:</span><br><span class="line">    print &quot;Host is Linux/Unix&quot;</span><br><span class="line">else:</span><br><span class="line">    print &quot;Host is Windows&quot;</span><br></pre></td></tr></table></figure>

<h4 id="3-操作系统识别"><a href="#3-操作系统识别" class="headerlink" title="3. 操作系统识别"></a>3. 操作系统识别</h4><ul>
<li>nmap使用多种技术识别操作系统<ul>
<li><strong><code>🔺命令：nmap IP地址 -O</code></strong></li>
<li>系统服务特征</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>CPE国际标准化组织进行的标准化操作系统，设备类型分类</code></pre></blockquote>
<h4 id="4-操作系统识别"><a href="#4-操作系统识别" class="headerlink" title="4. 操作系统识别"></a>4. 操作系统识别</h4><ul>
<li><strong><code>🔺命令：xprobe2 IP地址</code></strong></li>
<li>结果有误差</li>
</ul>
<h4 id="5-操作系统识别"><a href="#5-操作系统识别" class="headerlink" title="5. 操作系统识别"></a>5. 操作系统识别</h4><ul>
<li>被动操作系统识别<ul>
<li>IDS</li>
<li>抓包分析</li>
</ul>
</li>
<li>被动扫描（不主动向目标主机发包，部署在网络出口的地方）</li>
<li><strong><code>🔺命令：p0f</code></strong><ul>
<li>结合ARP地址欺骗识别全网OS</li>
</ul>
</li>
</ul>
<h4 id="6-防火墙识别（尽量隐蔽）"><a href="#6-防火墙识别（尽量隐蔽）" class="headerlink" title="6. 防火墙识别（尽量隐蔽）"></a>6. 防火墙识别（尽量隐蔽）</h4><ul>
<li>通过检查回包，可能识别端口是否经过防火墙过滤</li>
<li>设备多种多样，结果过存在一定误差</li>
</ul>
<blockquote>
<pre><code>（1）防火墙内部对外部的访问连接  （2）防火墙对源地址的过滤
防火墙几种情况：
Send         Response           Type
SYN          NO              
ACK          RST                Filtered

SYN          SYN+ACK/SYN+RST 
ACK          NO                 Filtered

SYN          SYN+ACK/SYN+RST
ACK          RST                Unfiltered/Open

SYN          NO             
ACK          NO                 Closed</code></pre></blockquote>
<h4 id="7-防火墙识别"><a href="#7-防火墙识别" class="headerlink" title="7. 防火墙识别"></a>7. 防火墙识别</h4><ul>
<li>Scapy</li>
<li>Python<ul>
<li><strong><code>🔺命令：fw_detect.py IP地址 端口</code></strong> ▲ 2019.12.6 脚本实验不成功，逻辑报错</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">from scapy.all import*</span><br><span class="line">import logging</span><br><span class="line">logging.getLogger(&quot;scapy,runtime&quot;).setLevel(logging.ERROR)</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv)!=3:</span><br><span class="line">    print &quot;Usage - ./fw_detect.py [Target IP] [Target Port] &quot;</span><br><span class="line">    print &quot;Example - ./syn_scan.py 192.168.100.1 445&quot;</span><br><span class="line">    print &quot;Example will determine if filtering exists on port 443 of host 192.168.100.1&quot;</span><br><span class="line">    sys.exit()</span><br><span class="line"></span><br><span class="line">ip=sys.argv[1]</span><br><span class="line">port=sys.argv[2]</span><br><span class="line"></span><br><span class="line">ACK_response=sr1(IP(dst=ip)/TCP(dport=port,flags=&apos;A&apos;),timeout=1,verbose=0)</span><br><span class="line">SYN_response=sr1(IP(dst=ip)/TCP(dport=port,flags=&apos;S&apos;),timeout=1,verbose=0)</span><br><span class="line">if (ACK_respnonse==None) and (SYN_response==None):</span><br><span class="line">    print &quot;Port is either unstatefully filered or host is down&quot;</span><br><span class="line">elif (ACK_respnonse==None) and ((SYN_response[flags]==18) or (SYN_response[flags==6])):</span><br><span class="line">    print &quot;Stateful filtering in place&quot;</span><br><span class="line">elif (SYN_response==None) and (ACK_response[flags]==4):</span><br><span class="line">    print &quot;Stateful filtering in place&quot;</span><br><span class="line">elif ((SYN_response[flags]==18) or (SYN_response[flags==6])) and (ACK_response[flags]==4):</span><br><span class="line">    print &quot;Port is unfiltered and open&quot;</span><br><span class="line">else:</span><br><span class="line">    print &quot;Unable to determine if the port is filtered&quot;</span><br></pre></td></tr></table></figure>

<h4 id="8-防火墙识别"><a href="#8-防火墙识别" class="headerlink" title="8. 防火墙识别"></a>8. 防火墙识别</h4><ul>
<li>Nmap有系列防火墙过滤检测功能</li>
<li><strong><code>🔺命令：nmap IP地址 端口</code></strong>（默认SYN包）</li>
<li><strong><code>🔺命令：nmap -sA（ACK包） IP地址 端口</code></strong></li>
</ul>
<h4 id="9-负载均衡识别"><a href="#9-负载均衡识别" class="headerlink" title="9. 负载均衡识别"></a>9. 负载均衡识别</h4><ul>
<li>广域网负载均衡<ul>
<li>DNS</li>
<li>智能DNS（不同地区不同DNS回应）</li>
</ul>
</li>
<li>服务器负载均衡<ul>
<li>基于Web的服务器</li>
</ul>
</li>
<li>组件级负载均衡</li>
<li>HTTP-Loadbalancing<ul>
<li>Nginx</li>
<li>Apache</li>
</ul>
</li>
<li><strong><code>🔺命令：lbd www.baidu.com</code></strong></li>
<li><strong><code>🔺命令：lbd mail.163.com</code></strong></li>
</ul>
<h4 id="10-WAF识别"><a href="#10-WAF识别" class="headerlink" title="10. WAF识别"></a>10. WAF识别</h4><ul>
<li>WEB应用防火墙（基于规则的过滤 → 基于机器学习，特征识别，语法词法的过滤）</li>
<li><strong><code>🔺命令：wafw00f -l</code></strong></li>
<li><strong><code>🔺命令：wafw00f http://www.microsoft.com</code></strong></li>
<li><strong><code>🔺命令：nmap www.microsoft.com --script=http-waf-detect.nse</code></strong></li>
</ul>
<blockquote>
<pre><code>WAF产品
Profense
Barracuda
F5 Trafficshield
Citrix NetScalor
IBM Web Application Security
webApp.secure
BIG IP
ISA Server
AkamaiGHost</code></pre></blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%80)%EF%BC%9A%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%B8%80)%EF%BC%9A%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83%E4%BB%8B%E7%BB%8D/" itemprop="url">Kali Linux笔记(一)：渗透环境介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-安全问题的根源"><a href="#1-安全问题的根源" class="headerlink" title="1. 安全问题的根源"></a>1. 安全问题的根源</h4><ul>
<li>分层（固守层面，在一个固定的圈子里）<ul>
<li>软件工程师，软件开发</li>
<li>数据库管理师，数据库管理以及数据库管理软件的安装与实现</li>
<li>运维</li>
</ul>
</li>
<li>只追求功能的实现</li>
<li>最大的危险还是人</li>
</ul>
<h4 id="2-安全目标"><a href="#2-安全目标" class="headerlink" title="2. 安全目标"></a>2. 安全目标</h4><ul>
<li>先于攻击者发现和防止漏洞出现<ul>
<li>攻击型安全（攻击手段探测漏洞，主动）</li>
<li>防护型安全（投入巨大，周期很大，安全层度脆碎）</li>
</ul>
</li>
</ul>
<h4 id="3-渗透测试"><a href="#3-渗透测试" class="headerlink" title="3.渗透测试"></a>3.渗透测试</h4><ul>
<li>尝试挫败安全防御机制，发现系统安全弱点</li>
<li>从攻击者的角度思考，测量安全防护有效性</li>
<li>证明安全问题的存在，而非破坏（深入了解漏洞价值）</li>
<li>道德约束</li>
<li>法律</li>
</ul>
<h4 id="4-渗透测试标准"><a href="#4-渗透测试标准" class="headerlink" title="4.渗透测试标准"></a>4.渗透测试标准</h4><ul>
<li>PETS（<a href="http://www.pentest-standard.org）" target="_blank" rel="noopener">http://www.pentest-standard.org）</a></li>
<li>前期交互交互阶段（渗透测试范围，每次一个子系统的渗透测试，子系统可以为一个应用系统，要进行简单的信息交互）</li>
<li>情报收集阶段（目标系统，邮箱地址，联系人，DNS，ip，公司动态等，对目标系统进行主动的探测，端口探测，主机探测）</li>
<li>威胁建模阶段（轮廓性认识确定一条两条效率最高的途径）</li>
<li>漏洞分析阶段（软件版本是否存在漏洞，软件逆向，形成针对性代码）</li>
<li>渗透攻击阶段（阶段不一定顺利）</li>
<li>后渗透测试阶段（拿到服务器后，进一步的渗透，获取有价值的信息，很重要，危害大）</li>
<li>渗透测试报告</li>
</ul>
<h4 id="5-渗透测试标准"><a href="#5-渗透测试标准" class="headerlink" title="5.渗透测试标准"></a>5.渗透测试标准</h4><ul>
<li>渗透测试范围</li>
<li>获得授权</li>
<li>渗透测试方法<ul>
<li>是否允许社会工程学</li>
<li>是否允许拒绝服务攻击</li>
</ul>
</li>
</ul>
<h4 id="6-渗透测试误区"><a href="#6-渗透测试误区" class="headerlink" title="6.渗透测试误区"></a>6.渗透测试误区</h4><ul>
<li>扫描器就是一切<ul>
<li>忽视业务逻辑重的逻辑（普通员工有获取经历级别的信息的权限）</li>
</ul>
</li>
</ul>
<h4 id="7-KALI-Linux介绍"><a href="#7-KALI-Linux介绍" class="headerlink" title="7.KALI Linux介绍"></a>7.KALI Linux介绍</h4><ul>
<li>基于Debian的Linux发行版本</li>
<li>前身是BackTrack，2013年3月发布</li>
<li>用于渗透测试和安全审计</li>
<li>包含600+安全工具</li>
<li>FHS标准目录结构（/etc，/bin，/dev，/var等,BT改版的主要原因）</li>
<li>定制内核</li>
<li>支持ARM和手机平台（for ARM树莓派CD卡烧录）</li>
<li>开源免费</li>
</ul>
<h4 id="8-KALI-Linux策略"><a href="#8-KALI-Linux策略" class="headerlink" title="8.KALI Linux策略"></a>8.KALI Linux策略</h4><ul>
<li>Root策略（大量渗透测试需要root权限，不同于其他Linux平台）</li>
<li>网络服务策略（网络服务默认是关闭的，无自动启动脚本）</li>
<li>更新升级策略（同Debian漏洞升级一样）</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%94)%EF%BC%9A%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E4%BA%94)%EF%BC%9A%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83/" itemprop="url">Kali Linux笔记(五)：实验环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-准备实验环境"><a href="#1-准备实验环境" class="headerlink" title="1. 准备实验环境"></a>1. 准备实验环境</h4><ul>
<li>渗透非授权系统的弊端</li>
<li>搭建自己的实验环境</li>
</ul>
<h4 id="2-安装虚拟机"><a href="#2-安装虚拟机" class="headerlink" title="2. 安装虚拟机"></a>2. 安装虚拟机</h4><ul>
<li>微软最新版软件<ul>
<li><a href="https://msdn.itellyou.cn" target="_blank" rel="noopener">https://msdn.itellyou.cn</a></li>
</ul>
</li>
<li>windows虚拟机<ul>
<li><a href="http://dev.modern.ie/tools/vms/" target="_blank" rel="noopener">http://dev.modern.ie/tools/vms/</a>  </li>
</ul>
</li>
<li>安装自己的虚拟机<ul>
<li>win XP</li>
<li>win 7</li>
<li>win 2003</li>
</ul>
</li>
<li>Linux虚拟机<ul>
<li><a href="http://www.turnkeylinux.org" target="_blank" rel="noopener">http://www.turnkeylinux.org</a></li>
<li>Ubuntu（Lamp安装）▲2019.11.25数据库无法登陆</li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>Ubuntu Server（netstat -anol）
1.apt-get install ssh 
2.apt-get install apache2 apache2-utils（若报错，则vi /etc/apache/conf-available/fqdn.conf → ServerName localhost → a2enconf fqdn）
3.apt-get install mysql-sever libapache2-mod-auth-mysql php5-mysql ▲2019.11.25未找到php5-mysql  ▲2019.11.25数据库无法登陆
4.mysql install_db（创建数据库）
5.mysql_security_installation（数据库安全设置）
6.apt-get install php5 php-mysql php-pear php-mcrypt php-curl ▲2019.11.25未找到php5，替换为php7；未找到php-mcrypt。
由于mcrypt扩展开发的结束，扩展也从PHP 7.2中删除，并转移到一个非官方的PECL存储库中。但是，你仍然可以在PHP 5.4到PHP 7.1中找到mcrypt扩展。PHP 7.2已经发布，但是它不包含mcrypt扩展。对于PHP 7.2+， PHP使用libsodium作为加密库。</code></pre></blockquote>
<ul>
<li>Metasploitable2<ul>
<li><a href="https://sourceforge.net/projects/metasploitable/metasploitable-linux-2.0.0.zip" target="_blank" rel="noopener">https://sourceforge.net/projects/metasploitable/metasploitable-linux-2.0.0.zip</a></li>
<li>问题：/var/www/mutilltdae/config.inc（配置文件：dbname=owasp10）</li>
</ul>
</li>
</ul>
<h4 id="3-模拟真实网络"><a href="#3-模拟真实网络" class="headerlink" title="3. 模拟真实网络"></a>3. 模拟真实网络</h4><ul>
<li><p>M0n0wall防火墙（需要三个Host-only网卡，一个桥接网卡，10.1.1.1/24 and 10.1.2.1/24）</p>
<ul>
<li><a href="https://distrowatch.com/?newsid=08257" target="_blank" rel="noopener">https://distrowatch.com/?newsid=08257</a></li>
<li>需要三个Host-only网卡，10.1.1.1/24 and 10.1.2.1/24</li>
<li>一个桥接网卡，连接外网使用</li>
<li>配置</li>
</ul>
<ol>
<li>1接口指令</li>
<li>设置vlan</li>
<li>em0（网卡）→ 10 valan，em1（网卡）→ 11 valan，em2（网卡）→ 13 valan</li>
<li>指定网卡连接LAN（em1），指定网卡连接WAN（em0），指定网卡连接Option（em2）</li>
<li>重启后2指令给LAN指定ip，掩码24</li>
<li>启动dhcp，分配dhcp地址</li>
<li>3指令给WebGui设置密码 → mono（默认）</li>
<li>Kali开启Host-only，需要跟LAN口同在一个网络连接上</li>
<li>WebGUI配置Optional接口，开启，配置IP地址</li>
<li>设置网络防火墙规则，PASS,WAN,ANY,LAN subnet,ANY</li>
<li>WAN设置，Block privat networks去掉勾选</li>
</ol>
</li>
</ul>
<h4 id="4-背靠背防火墙（双层异构）"><a href="#4-背靠背防火墙（双层异构）" class="headerlink" title="4. 背靠背防火墙（双层异构）"></a>4. 背靠背防火墙（双层异构）</h4><ul>
<li>Pfsense<ul>
<li><a href="https://pfsense.org/" target="_blank" rel="noopener">https://pfsense.org/</a></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%9B%9B)%EF%BC%9A%E4%BB%A3%E7%90%86%E3%80%81Tor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/Kali%20Linux%E7%AC%94%E8%AE%B0(%E5%9B%9B)%EF%BC%9A%E4%BB%A3%E7%90%86%E3%80%81Tor/" itemprop="url">Kali Linux笔记(四)：代理、Tor</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-翻墙-amp-代理"><a href="#1-翻墙-amp-代理" class="headerlink" title="1. 翻墙&amp;代理"></a>1. 翻墙&amp;代理</h4><ul>
<li>GFW长城防火墙<ul>
<li>Facebook、youtube</li>
</ul>
</li>
<li>翻墙（VPN connection、Tunnel，前提需要一台可通过GFW过滤的服务器）<ul>
<li>http代理（搭建简单，纯http传输为明文传输，易被GFW发现）</li>
<li>socks代理</li>
<li>ssh隧道（加密隧道）</li>
<li>VPN</li>
</ul>
</li>
<li>Goagent（谷歌官方提供服务）</li>
<li>Tor</li>
</ul>
<h4 id="2-代理的意以所在"><a href="#2-代理的意以所在" class="headerlink" title="2. 代理的意以所在"></a>2. 代理的意以所在</h4><ul>
<li>加密通信</li>
<li>隐藏来源</li>
<li>突破网络封锁</li>
<li>注意事项<ul>
<li>不要触及敏感地带</li>
<li>不要从事非法行为</li>
</ul>
</li>
</ul>
<h4 id="3-GOAGENT（2019-11-23GoAgent基本被墙，2019-11-29使用V2ray代理）"><a href="#3-GOAGENT（2019-11-23GoAgent基本被墙，2019-11-29使用V2ray代理）" class="headerlink" title="3. GOAGENT（2019.11.23GoAgent基本被墙，2019.11.29使用V2ray代理）"></a>3. GOAGENT（2019.11.23GoAgent基本被墙，2019.11.29使用V2ray代理）</h4><ul>
<li><a href="https://code.google.com/p/goagent/" target="_blank" rel="noopener">https://code.google.com/p/goagent/</a> ▲2019.11.23网址不可用<ul>
<li>注册：appengine.google.com</li>
</ul>
</li>
<li><a href="https://github.com/goagent/gpagent" target="_blank" rel="noopener">https://github.com/goagent/gpagent</a> ▲2019.11.23goagent delete</li>
</ul>
<blockquote>
<pre><code>IE → goagent（本地代理）→ GAE → 目标网络</code></pre></blockquote>
<h4 id="4-GOAGENT安装-（2019-11-23GoAgent基本被墙）"><a href="#4-GOAGENT安装-（2019-11-23GoAgent基本被墙）" class="headerlink" title="4. GOAGENT安装 （2019.11.23GoAgent基本被墙）"></a>4. GOAGENT安装 （2019.11.23GoAgent基本被墙）</h4><ul>
<li><a href="http://pan.baidu.com/s/1jG3USAU" target="_blank" rel="noopener">http://pan.baidu.com/s/1jG3USAU</a> （goagent软件）▲2019.11.23链接不可用</li>
<li><a href="http://pan.baidu.com/s/1dDlYw05" target="_blank" rel="noopener">http://pan.baidu.com/s/1dDlYw05</a> （goagent配置指导书）▲2019.11.23链接不可用</li>
<li><strong><code>🔺命令：Apt-get install python-dev python-greenlet python-gevent python-vte python-openssl python-crypto python-appindicator python-pip libnss3-tools</code></strong></li>
<li><strong><code>🔺命令：pip install pyOpenSSL</code></strong></li>
<li><strong><code>🔺命令：pip install gevent --upgrade</code></strong></li>
<li><strong><code>🔺命令：mkdir -p ~/.pki/nssdb</code></strong>(-p 层级创建目录)</li>
<li><strong><code>🔺命令：certutil -d sql:$HOME/.pki/nssdb -N</code></strong></li>
<li>导入证书</li>
<li>设置浏览器代理</li>
<li>使用</li>
</ul>
<blockquote>
<pre><code>设置浏览器代理
浏览器（alt+t）→ Edit → Preferences → Advanced → Certificates → View certificates → Authorities → Import → CA.crt（3 trust）</code></pre></blockquote>
<h4 id="5-Tor"><a href="#5-Tor" class="headerlink" title="5. Tor"></a>5. Tor</h4><ul>
<li>保护隐私防止被追踪</li>
<li>志愿者组成节点网络</li>
<li>长期在天朝完全无法使用<ul>
<li>感谢云（海量的IP地址）</li>
</ul>
</li>
<li>暗网<ul>
<li>互联网搜索引擎无法发现</li>
<li>互联网黑市</li>
<li>比特币交易</li>
<li>至少3跳路由包装</li>
</ul>
</li>
<li>下载和看视频是不道德的行为</li>
<li>下载（Kali Linux可apt-get，但安装复杂）<ul>
<li><a href="https://www.torproject.org/download/" target="_blank" rel="noopener">https://www.torproject.org/download/</a></li>
<li><a href="http://pan.baidu.com/s/1sjkdPO5" target="_blank" rel="noopener">http://pan.baidu.com/s/1sjkdPO5</a> ▲2019.11.23链接不可用</li>
</ul>
</li>
<li>问题1：should not be run as root（文件夹中start-tor-browser修改root，0 → 1）</li>
<li>问题2：服务启动错误（权限造成，修改所有者和组 <strong><code>🔺命令：chown -R root:root tor目录</code></strong>）</li>
</ul>
<blockquote>
<pre><code>集成网桥的连接：meek-amazon、meek-google、meek-azure</code></pre></blockquote>
<ul>
<li>暗网wiki<ul>
<li><a href="http://wiki5kauuihowqi5.onion/" target="_blank" rel="noopener">http://wiki5kauuihowqi5.onion/</a></li>
</ul>
</li>
</ul>
<h4 id="6-代理设置"><a href="#6-代理设置" class="headerlink" title="6. 代理设置"></a>6. 代理设置</h4><ul>
<li>/etc/apt/apt.conf<ul>
<li>Acquire::http::Proxy “<a href="http://127.0.0.1:8087&quot;" target="_blank" rel="noopener">http://127.0.0.1:8087&quot;</a>;</li>
<li>Acquire::https::Proxy “<a href="https://127.0.0.1:8087&quot;" target="_blank" rel="noopener">https://127.0.0.1:8087&quot;</a>;</li>
<li>Acquire::ftp::Proxy “<a href="ftp://127.0.0.1:8087&quot;" target="_blank" rel="noopener">ftp://127.0.0.1:8087&quot;</a>;</li>
<li>Acuqire::socks::Proxy “<a href="https://127.0.0.1:8087&quot;" target="_blank" rel="noopener">https://127.0.0.1:8087&quot;</a>;</li>
</ul>
</li>
<li>/etc/bash.bashrc<ul>
<li>export http_proxy=”<a href="http://username:password@proxyIP:port&quot;" target="_blank" rel="noopener">http://username:password@proxyIP:port&quot;</a></li>
<li>export ftp_proxy=”<a href="ftp://username:password@proxyIP:port&quot;" target="_blank" rel="noopener">ftp://username:password@proxyIP:port&quot;</a></li>
<li>export https_proxy=”<a href="https://username:password@proxyIP:port&quot;" target="_blank" rel="noopener">https://username:password@proxyIP:port&quot;</a></li>
<li>export socks_proxy=”<a href="https://username:password@proxyIP:port&quot;" target="_blank" rel="noopener">https://username:password@proxyIP:port&quot;</a></li>
</ul>
</li>
</ul>
<h4 id="7-代理链"><a href="#7-代理链" class="headerlink" title="7. 代理链"></a>7. 代理链</h4><ul>
<li>公开的代理服务器</li>
<li>配置代理链<ul>
<li><strong><code>🔺命令：vi /etc/proxychains.conf</code></strong></li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>strict_chain（静态链，1-5级，不会自动剔除不通的代理链）
dynamic_chain（动态链，1-5级，自动剔除不通的代理链)
random_chain（随机链，1-5级随机选级）
chain_len = 2 （只适用于dynamic_chain）
proxy_dns（域名代理链解析）
【ProxyList】 （代理列表，在下面修改）</code></pre></blockquote>
<ul>
<li>配置代理链<ul>
<li><strong><code>🔺命令：proxychains nmap -p80 网段/24</code></strong>（可以用于不支持代理的软件）</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/09/kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%B8%80)%EF%BC%9A%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%EF%BC%88Google%E3%80%81ShoDan%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tomas'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/09/kali%20Linux%E7%AC%94%E8%AE%B0(%E5%8D%81%E4%B8%80)%EF%BC%9A%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%EF%BC%88Google%E3%80%81ShoDan%EF%BC%89/" itemprop="url">Kali Linux笔记(十一)：搜索引擎（Google、ShoDan）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-09T19:29:25+08:00">
                2019-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kali/" itemprop="url" rel="index">
                    <span itemprop="name">Kali</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h4 id="1-搜索引擎（爬虫机器人爬取信息）"><a href="#1-搜索引擎（爬虫机器人爬取信息）" class="headerlink" title="1. 搜索引擎（爬虫机器人爬取信息）"></a>1. 搜索引擎（爬虫机器人爬取信息）</h4><ul>
<li>公司新闻动态</li>
<li>重要雇员信息</li>
<li>机密文档/网络拓扑</li>
<li>用户名密码</li>
<li>目标系统软硬件技术架构（Banner信息）</li>
</ul>
<h4 id="2-SHODAN"><a href="#2-SHODAN" class="headerlink" title="2. SHODAN"></a>2. SHODAN</h4><ul>
<li>搜索联网的设备（只搜索设备）</li>
<li>Banner：http、ftp、ssh、telnet</li>
<li><a href="https://www.shodan.io/" target="_blank" rel="noopener">https://www.shodan.io/</a></li>
<li>常见filter（冒号作为定界符,空格为分节符）：<ul>
<li>net（192.168.20.1）</li>
<li>city</li>
<li>country（CN、US）</li>
<li>port（80、21、22、23）</li>
<li>OS</li>
<li>Hostname（主机或域名）</li>
<li>server</li>
<li>200 OK cisco country：JP</li>
<li>user：admin pass：password</li>
<li>linux upnp avtech</li>
</ul>
</li>
</ul>
<h4 id="3-SHODAN"><a href="#3-SHODAN" class="headerlink" title="3. SHODAN"></a>3. SHODAN</h4><ul>
<li>200 OK cisco country：JP</li>
<li>user:admin   pass:password</li>
<li>linux upnp avtech</li>
<li><a href="https://account.shodan.io/" target="_blank" rel="noopener">https://account.shodan.io/</a> （API Key为调用的API接口）</li>
<li><a href="https://www.shodan.io/explore" target="_blank" rel="noopener">https://www.shodan.io/explore</a> （搜索方式提供）</li>
<li>Add-Ons（Firefox的shadon插件）</li>
</ul>
<h4 id="4-GOOGLE搜索"><a href="#4-GOOGLE搜索" class="headerlink" title="4. GOOGLE搜索"></a>4. GOOGLE搜索</h4><ul>
<li>+充值-支付（含有充值，不含有支付的页面）</li>
<li>北京的电子商务公司–北京 intitle（标题部分）:电子商务 intext（页面正文部分）:法人 intext（页面正文部分）:电话</li>
<li>阿里网站上的北京公司联系人–北京 site:alibaba.com inurl:contact</li>
<li>塞班司法案的PDF文档–SOX filetype:pdf（doc,html等）</li>
<li>法国的支付相关页面–payment site（同country）:fr</li>
</ul>
<h4 id="5-GOOGLE搜索–实例"><a href="#5-GOOGLE搜索–实例" class="headerlink" title="5. GOOGLE搜索–实例"></a>5. GOOGLE搜索–实例</h4><ul>
<li>inurl:”level/15/exec/~/show”（网络设备开启http服务，15级服务，show服务）</li>
<li>intitle:”netbotz appliance” “ok”（机架设备，cameras APC公司，主要是机房）</li>
<li>inurl:/admin/login.php</li>
<li>inurl:qq.txt</li>
<li>filetype:xls “usename | password”</li>
<li>inurl:ftp “password” filetype:xls site:baidu.com（url是ftp）</li>
<li>inurl:service.pwd（FrontPage存在漏洞 → service.pwd）</li>
</ul>
<blockquote>
<pre><code>Google Hacking DataBase：http://exploit-db.com/google-dorks
Google、Bing等搜索引擎对来自同一个IP地址的搜索数量进行限制，进行自我保护</code></pre></blockquote>
<h4 id="6-YANDEX"><a href="#6-YANDEX" class="headerlink" title="6. YANDEX"></a>6. YANDEX</h4><ul>
<li>世界第四大搜索引擎–俄罗斯</li>
<li><a href="https://www.yandex.com/" target="_blank" rel="noopener">https://www.yandex.com/</a></li>
</ul>
<h4 id="7-用户信息"><a href="#7-用户信息" class="headerlink" title="7. 用户信息"></a>7. 用户信息</h4><ul>
<li>邮件、主机（▲2019.11.29theharvester commond not found）<ul>
<li><strong><code>🔺命令：theharvester -d 域名 -l（并发限制搜索结果数量） 300 -b 搜索引擎</code></strong></li>
<li><strong><code>🔺命令：vi /etc/proxychains</code></strong></li>
<li><strong><code>🔺命令：socks tor的监听端口（按照proxychains配置）</code></strong></li>
<li><strong><code>🔺命令：proxychains theharvester -d 域名 -l（并发限制搜索结果数量） 300 -b 搜索引擎</code></strong></li>
</ul>
</li>
<li>文件<ul>
<li><strong><code>🔺命令：metagoofil（google搜索） -d 域名 -t（文件类型） pdf -l（并发限制搜索结果数量） 200 -o （工作目录）test -f（输出文件） 1.html</code></strong></li>
<li><strong><code>🔺命令：proxychains metagoofil（google搜索） -d 域名 -t（文件类型） pdf -l（并发限制搜索结果数量） 200 -o （工作目录）test -f（输出文件） 1.html</code></strong></li>
</ul>
</li>
</ul>
<blockquote>
<pre><code>tmux终端窗口的复用器，划分窗口大小 ▲2019.11.29未实验
tor可进行代理翻墙</code></pre></blockquote>
<h4 id="8-其他途径"><a href="#8-其他途径" class="headerlink" title="8. 其他途径"></a>8. 其他途径</h4><ul>
<li>社交网络</li>
<li>工商注册（法人、公司规模）</li>
<li>新闻组/论坛</li>
<li>招聘网站</li>
<li><a href="https://archive.org/web/" target="_blank" rel="noopener">https://archive.org/web/</a></li>
</ul>
<h4 id="9-个人专属的密码字典"><a href="#9-个人专属的密码字典" class="headerlink" title="9. 个人专属的密码字典"></a>9. 个人专属的密码字典</h4><ul>
<li>按个人信息生成其专属的密码字典</li>
<li>CUPP–Common User Password Profiler<ul>
<li><strong><code>🔺命令：git clone https://github.com/Mebus/cupp.git</code></strong></li>
<li><strong><code>🔺命令：python3 cupp.py -i</code></strong></li>
<li>进行简单的信息输入</li>
</ul>
</li>
</ul>
<h4 id="10-METADATA"><a href="#10-METADATA" class="headerlink" title="10. METADATA"></a>10. METADATA</h4><ul>
<li>Exif图片信息（图片记录GPS，照片生成时的信息）▲2019.11.29需要安装</li>
<li>Foca ▲2019.11.29未实验</li>
<li><strong><code>🔺命令：exiftool +图片.jpg</code></strong></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">Next</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/photo.jpg"
                alt="Tomas" />
            
              <p class="site-author-name" itemprop="name">Tomas</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Tomassky" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:643008933@qq.com" target="_blank" title="QQ邮箱">
                      
                        <i class="fa fa-fw fa-envelope"></i>QQ邮箱</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ylsword-cheat.top" title="LengSword" target="_blank">LengSword</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://neigeshoufu.github.io/ljy.github.io" title="neigeshoufu" target="_blank">neigeshoufu</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tomas</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
